import{A as la,B as yo,C as i_,D as r_,E as A,F as qe,G as ve,H as Mu,I as o_,J as bo,K as se,L as Je,M as ca,N as Au,O as s_,P as zi,Q as oi,R as ua,S as a_,T as St,U as Ce,a as b,b as ee,c as xe,d as Wm,e as ra,f as qm,g as Km,h as v,i as Gi,j as oa,k as Qm,l as Ym,m as De,n as sa,o as Tu,p as Zm,q as Bt,r as Jm,s as Xm,t as e_,u as aa,v as me,w as t_,x as n_,y as ut,z as In}from"./chunk-OE4E4N7F.js";var Ru=null;var Nu=1,l_=Symbol("SIGNAL");function Y(e){let t=Ru;return Ru=e,t}function c_(){return Ru}var Ou={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vE(e){if(!(Lu(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Nu)){if(!e.producerMustRecompute(e)&&!ku(e)){e.dirty=!1,e.lastCleanEpoch=Nu;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Nu}}function xu(e){return e&&(e.nextProducerIndex=0),Y(e)}function u_(e,t){if(Y(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Lu(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Fu(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function ku(e){Vu(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],i=e.producerLastReadVersion[t];if(i!==n.version||(vE(n),i!==n.version))return!0}return!1}function Pu(e){if(Vu(e),Lu(e))for(let t=0;t<e.producerNode.length;t++)Fu(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Fu(e,t){if(yE(e),e.liveConsumerNode.length===1&&bE(e))for(let i=0;i<e.producerNode.length;i++)Fu(e.producerNode[i],e.producerIndexOfThis[i]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[t],r=e.liveConsumerNode[t];Vu(r),r.producerIndexOfThis[i]=t}}function Lu(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Vu(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function yE(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function bE(e){return e.producerNode!==void 0}function wE(){throw new Error}var DE=wE;function d_(e){DE=e}function T(e){return typeof e=="function"}function Wi(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var da=Wi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function si(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var he=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(T(i))try{i()}catch(o){t=o instanceof da?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{h_(o)}catch(s){t=t??[],s instanceof da?t=[...t,...s.errors]:t.push(s)}}if(t)throw new da(t)}}add(t){var n;if(t&&t!==this)if(this.closed)h_(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&si(n,t)}remove(t){let{_finalizers:n}=this;n&&si(n,t),t instanceof e&&t._removeParent(this)}};he.EMPTY=(()=>{let e=new he;return e.closed=!0,e})();var Bu=he.EMPTY;function ha(e){return e instanceof he||e&&"closed"in e&&T(e.remove)&&T(e.add)&&T(e.unsubscribe)}function h_(e){T(e)?e():e.unsubscribe()}var It={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qi={setTimeout(e,t,...n){let{delegate:i}=qi;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=qi;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function fa(e){qi.setTimeout(()=>{let{onUnhandledError:t}=It;if(t)t(e);else throw e})}function ai(){}var f_=ju("C",void 0,void 0);function p_(e){return ju("E",void 0,e)}function g_(e){return ju("N",e,void 0)}function ju(e,t,n){return{kind:e,value:t,error:n}}var li=null;function Ki(e){if(It.useDeprecatedSynchronousErrorHandling){let t=!li;if(t&&(li={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=li;if(li=null,n)throw i}}else e()}function m_(e){It.useDeprecatedSynchronousErrorHandling&&li&&(li.errorThrown=!0,li.error=e)}var ci=class extends he{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ha(t)&&t.add(this)):this.destination=SE}static create(t,n,i){return new sn(t,n,i)}next(t){this.isStopped?Hu(g_(t),this):this._next(t)}error(t){this.isStopped?Hu(p_(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Hu(f_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},CE=Function.prototype.bind;function Uu(e,t){return CE.call(e,t)}var $u=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){pa(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){pa(i)}else pa(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){pa(n)}}},sn=class extends ci{constructor(t,n,i){super();let r;if(T(t)||!t)r={next:t??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&It.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Uu(t.next,o),error:t.error&&Uu(t.error,o),complete:t.complete&&Uu(t.complete,o)}):r=t}this.destination=new $u(r)}};function pa(e){It.useDeprecatedSynchronousErrorHandling?m_(e):fa(e)}function EE(e){throw e}function Hu(e,t){let{onStoppedNotification:n}=It;n&&qi.setTimeout(()=>n(e,t))}var SE={closed:!0,next:ai,error:EE,complete:ai};var Qi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ae(e){return e}function Gu(...e){return zu(e)}function zu(e){return e.length===0?Ae:e.length===1?e[0]:function(n){return e.reduce((i,r)=>r(i),n)}}var N=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=TE(n)?n:new sn(n,i,r);return Ki(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=__(i),new i((r,o)=>{let s=new sn({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Qi](){return this}pipe(...n){return zu(n)(this)}toPromise(n){return n=__(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return e.create=t=>new e(t),e})();function __(e){var t;return(t=e??It.Promise)!==null&&t!==void 0?t:Promise}function IE(e){return e&&T(e.next)&&T(e.error)&&T(e.complete)}function TE(e){return e&&e instanceof ci||IE(e)&&ha(e)}function Wu(e){return T(e?.lift)}function x(e){return t=>{if(Wu(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function R(e,t,n,i,r){return new qu(e,t,n,i,r)}var qu=class extends ci{constructor(t,n,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Yi(){return x((e,t)=>{let n=null;e._refCount++;let i=R(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let r=e._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}var Zi=class extends N{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Wu(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new he;let n=this.getSubject();t.add(this.source.subscribe(R(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=he.EMPTY)}return t}refCount(){return Yi()(this)}};var v_=Wi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Z=(()=>{class e extends N{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new ga(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new v_}next(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Bu:(this.currentObservers=null,o.push(n),new he(()=>{this.currentObservers=null,si(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new N;return n.source=this,n}}return e.create=(t,n)=>new ga(t,n),e})(),ga=class extends Z{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:Bu}};var Ee=class extends Z{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var wo={now(){return(wo.delegate||Date).now()},delegate:void 0};var ma=class extends Z{constructor(t=1/0,n=1/0,i=wo){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var _a=class extends he{constructor(t,n){super()}schedule(t,n=0){return this}};var Do={setInterval(e,t,...n){let{delegate:i}=Do;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=Do;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Ji=class extends _a{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,i=0){return Do.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Do.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,si(i,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Xi=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}};Xi.now=wo.now;var er=class extends Xi{constructor(t,n=Xi.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}};var Tn=new er(Ji),Ku=Tn;var va=class extends Ji{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(t,n,i):(t.flush(this),0)}};var ya=class extends er{};var Qu=new ya(va);var ye=new N(e=>e.complete());function ba(e){return e&&T(e.schedule)}function Yu(e){return e[e.length-1]}function tr(e){return T(Yu(e))?e.pop():void 0}function jt(e){return ba(Yu(e))?e.pop():void 0}function y_(e,t){return typeof Yu(e)=="number"?e.pop():t}var nr=e=>e&&typeof e.length=="number"&&typeof e!="function";function wa(e){return T(e?.then)}function Da(e){return T(e[Qi])}function Ca(e){return Symbol.asyncIterator&&T(e?.[Symbol.asyncIterator])}function Ea(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ME(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Sa=ME();function Ia(e){return T(e?.[Sa])}function Ta(e){return qm(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:i,done:r}=yield ra(n.read());if(r)return yield ra(void 0);yield yield ra(i)}}finally{n.releaseLock()}})}function Ma(e){return T(e?.getReader)}function q(e){if(e instanceof N)return e;if(e!=null){if(Da(e))return AE(e);if(nr(e))return NE(e);if(wa(e))return RE(e);if(Ca(e))return b_(e);if(Ia(e))return OE(e);if(Ma(e))return xE(e)}throw Ea(e)}function AE(e){return new N(t=>{let n=e[Qi]();if(T(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function NE(e){return new N(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function RE(e){return new N(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,fa)})}function OE(e){return new N(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function b_(e){return new N(t=>{kE(e,t).catch(n=>t.error(n))})}function xE(e){return b_(Ta(e))}function kE(e,t){var n,i,r,o;return Wm(this,void 0,void 0,function*(){try{for(n=Km(e);i=yield n.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}t.complete()})}function Ke(e,t,n,i=0,r=!1){let o=t.schedule(function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function Xe(e,t=0){return x((n,i)=>{n.subscribe(R(i,r=>Ke(i,e,()=>i.next(r),t),()=>Ke(i,e,()=>i.complete(),t),r=>Ke(i,e,()=>i.error(r),t)))})}function Tt(e,t=0){return x((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function w_(e,t){return q(e).pipe(Tt(t),Xe(t))}function D_(e,t){return q(e).pipe(Tt(t),Xe(t))}function C_(e,t){return new N(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}function E_(e,t){return new N(n=>{let i;return Ke(n,t,()=>{i=e[Sa](),Ke(n,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>T(i?.return)&&i.return()})}function Aa(e,t){if(!e)throw new Error("Iterable cannot be null");return new N(n=>{Ke(n,t,()=>{let i=e[Symbol.asyncIterator]();Ke(n,t,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function S_(e,t){return Aa(Ta(e),t)}function I_(e,t){if(e!=null){if(Da(e))return w_(e,t);if(nr(e))return C_(e,t);if(wa(e))return D_(e,t);if(Ca(e))return Aa(e,t);if(Ia(e))return E_(e,t);if(Ma(e))return S_(e,t)}throw Ea(e)}function J(e,t){return t?I_(e,t):q(e)}function C(...e){let t=jt(e);return J(e,t)}function ir(e,t){let n=T(e)?e:()=>e,i=r=>r.error(n());return new N(t?r=>t.schedule(i,0,r):i)}function Zu(e){return!!e&&(e instanceof N||T(e.lift)&&T(e.subscribe))}var an=Wi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function T_(e){return e instanceof Date&&!isNaN(e)}function I(e,t){return x((n,i)=>{let r=0;n.subscribe(R(i,o=>{i.next(e.call(t,o,r++))}))})}var{isArray:PE}=Array;function FE(e,t){return PE(t)?e(...t):e(t)}function Na(e){return I(t=>FE(e,t))}var{isArray:LE}=Array,{getPrototypeOf:VE,prototype:BE,keys:jE}=Object;function M_(e){if(e.length===1){let t=e[0];if(LE(t))return{args:t,keys:null};if(UE(t)){let n=jE(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}function UE(e){return e&&typeof e=="object"&&VE(e)===BE}function A_(e,t){return e.reduce((n,i,r)=>(n[i]=t[r],n),{})}function rr(...e){let t=jt(e),n=tr(e),{args:i,keys:r}=M_(e);if(i.length===0)return J([],t);let o=new N(HE(i,t,r?s=>A_(r,s):Ae));return n?o.pipe(Na(n)):o}function HE(e,t,n=Ae){return i=>{N_(t,()=>{let{length:r}=e,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)N_(t,()=>{let c=J(e[l],t),u=!1;c.subscribe(R(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function N_(e,t,n){e?Ke(n,e,t):t()}function R_(e,t,n,i,r,o,s,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},f=_=>c<i?p(_):l.push(_),p=_=>{o&&t.next(_),c++;let y=!1;q(n(_,u++)).subscribe(R(t,M=>{r?.(M),o?f(M):t.next(M)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<i;){let M=l.shift();s?Ke(t,s,()=>p(M)):p(M)}h()}catch(M){t.error(M)}}))};return e.subscribe(R(t,f,()=>{d=!0,h()})),()=>{a?.()}}function ce(e,t,n=1/0){return T(t)?ce((i,r)=>I((o,s)=>t(i,o,r,s))(q(e(i,r))),n):(typeof t=="number"&&(n=t),x((i,r)=>R_(i,r,e,n)))}function Mn(e=1/0){return ce(Ae,e)}function O_(){return Mn(1)}function An(...e){return O_()(J(e,jt(e)))}function Ra(e){return new N(t=>{q(e()).subscribe(t)})}var $E=["addListener","removeListener"],GE=["addEventListener","removeEventListener"],zE=["on","off"];function dt(e,t,n,i){if(T(n)&&(i=n,n=void 0),i)return dt(e,t,n).pipe(Na(i));let[r,o]=KE(e)?GE.map(s=>a=>e[s](t,a,n)):WE(e)?$E.map(x_(e,t)):qE(e)?zE.map(x_(e,t)):[];if(!r&&nr(e))return ce(s=>dt(s,t,n))(q(e));if(!r)throw new TypeError("Invalid event target");return new N(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function x_(e,t){return n=>i=>e[n](t,i)}function WE(e){return T(e.addListener)&&T(e.removeListener)}function qE(e){return T(e.on)&&T(e.off)}function KE(e){return T(e.addEventListener)&&T(e.removeEventListener)}function Ju(e=0,t,n=Ku){let i=-1;return t!=null&&(ba(t)?n=t:i=t),new N(r=>{let o=T_(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function ui(...e){let t=jt(e),n=y_(e,1/0),i=e;return i.length?i.length===1?q(i[0]):Mn(n)(J(i,t)):ye}var{isArray:QE}=Array;function Oa(e){return e.length===1&&QE(e[0])?e[0]:e}function be(e,t){return x((n,i)=>{let r=0;n.subscribe(R(i,o=>e.call(t,o,r++)&&i.next(o)))})}function Xu(...e){return e=Oa(e),e.length===1?q(e[0]):new N(YE(e))}function YE(e){return t=>{let n=[];for(let i=0;n&&!t.closed&&i<e.length;i++)n.push(q(e[i]).subscribe(R(t,r=>{if(n){for(let o=0;o<n.length;o++)o!==i&&n[o].unsubscribe();n=null}t.next(r)})))}}function Co(...e){let t=tr(e),n=Oa(e);return n.length?new N(i=>{let r=n.map(()=>[]),o=n.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<n.length;s++)q(n[s]).subscribe(R(i,a=>{if(r[s].push(a),r.every(l=>l.length)){let l=r.map(c=>c.shift());i.next(t?t(...l):l),r.some((c,u)=>!c.length&&o[u])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):ye}function Nn(e){return x((t,n)=>{let i=null,r=!1,o;i=t.subscribe(R(n,void 0,void 0,s=>{o=q(e(s,Nn(e)(t))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function k_(e,t,n,i,r){return(o,s)=>{let a=n,l=t,c=0;o.subscribe(R(s,u=>{let d=c++;l=a?e(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function di(e,t){return T(t)?ce(e,t,1):ce(e,1)}function ed(e,t=Tn){return x((n,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,i.next(c)}};function l(){let c=s+e,u=t.now();if(u<c){r=this.schedule(void 0,c-u),i.add(r);return}a()}n.subscribe(R(i,c=>{o=c,s=t.now(),r||(r=t.schedule(l,e),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function Rn(e){return x((t,n)=>{let i=!1;t.subscribe(R(n,r=>{i=!0,n.next(r)},()=>{i||n.next(e),n.complete()}))})}function Qe(e){return e<=0?()=>ye:x((t,n)=>{let i=0;t.subscribe(R(n,r=>{++i<=e&&(n.next(r),e<=i&&n.complete())}))})}function td(e){return I(()=>e)}function xa(e,t=Ae){return e=e??ZE,x((n,i)=>{let r,o=!0;n.subscribe(R(i,s=>{let a=t(s);(o||!e(r,a))&&(o=!1,r=a,i.next(s))}))})}function ZE(e,t){return e===t}function ka(e=JE){return x((t,n)=>{let i=!1;t.subscribe(R(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(e())))})}function JE(){return new an}function nd(...e){return t=>An(t,C(...e))}function ln(e){return x((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function ht(e,t){let n=arguments.length>=2;return i=>i.pipe(e?be((r,o)=>e(r,o,i)):Ae,Qe(1),n?Rn(t):ka(()=>new an))}function or(e){return e<=0?()=>ye:x((t,n)=>{let i=[];t.subscribe(R(n,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function id(e,t){let n=arguments.length>=2;return i=>i.pipe(e?be((r,o)=>e(r,o,i)):Ae,or(1),n?Rn(t):ka(()=>new an))}function sr(e,t){return x(k_(e,t,arguments.length>=2,!0))}function Eo(e={}){let{connector:t=()=>new Z,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return o=>{let s,a,l,c=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{let _=s;f(),_?.unsubscribe()};return x((_,y)=>{c++,!d&&!u&&h();let M=l=l??t();y.add(()=>{c--,c===0&&!d&&!u&&(a=rd(p,r))}),M.subscribe(y),!s&&c>0&&(s=new sn({next:k=>M.next(k),error:k=>{d=!0,h(),a=rd(f,n,k),M.error(k)},complete:()=>{u=!0,h(),a=rd(f,i),M.complete()}}),q(_).subscribe(s))})(o)}}function rd(e,t,...n){if(t===!0){e();return}if(t===!1)return;let i=new sn({next:()=>{i.unsubscribe(),e()}});return q(t(...n)).subscribe(i)}function Pa(e,t,n){let i,r=!1;return e&&typeof e=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:n}=e:i=e??1/0,Eo({connector:()=>new ma(i,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function od(e){return x((t,n)=>{let i=!1,r=0;t.subscribe(R(n,o=>(i||(i=!e(o,r++)))&&n.next(o)))})}function Fa(...e){let t=jt(e);return x((n,i)=>{(t?An(e,n,t):An(e,n)).subscribe(i)})}function te(e,t){return x((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(R(i,l=>{r?.unsubscribe();let c=0,u=o++;q(e(l,u)).subscribe(r=R(i,d=>i.next(t?t(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function La(e,t){return T(t)?te(()=>e,t):te(()=>e)}function ke(e){return x((t,n)=>{q(e).subscribe(R(n,()=>n.complete(),ai)),!n.closed&&t.subscribe(n)})}function fe(e,t,n){let i=T(e)||t||n?{next:e,error:t,complete:n}:e;return i?x((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(R(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Ae}function ar(...e){let t=tr(e);return x((n,i)=>{let r=e.length,o=new Array(r),s=e.map(()=>!1),a=!1;for(let l=0;l<r;l++)q(e[l]).subscribe(R(i,c=>{o[l]=c,!a&&!s[l]&&(s[l]=!0,(a=s.every(Ae))&&(s=null))},ai));n.subscribe(R(i,l=>{if(a){let c=[l,...o];i.next(t?t(...c):c)}}))})}var _v="https://g.co/ng/security#xss",S=class extends Error{constructor(t,n){super(mh(t,n)),this.code=t}};function mh(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Fo(e){return{toString:e}.toString()}var Va="__parameters__";function XE(e){return function(...n){if(e){let i=e(...n);for(let r in i)this[r]=i[r]}}}function vv(e,t,n){return Fo(()=>{let i=XE(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(Va)?l[Va]:Object.defineProperty(l,Va,{value:[]})[Va];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}var fn=globalThis;function ie(e){for(let t in e)if(e[t]===ie)return t;throw Error("Could not find renamed property on target object.")}function Ye(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Ye).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function _d(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var eS=ie({__forward_ref__:ie});function vl(e){return e.__forward_ref__=vl,e.toString=function(){return Ye(this())},e}function pt(e){return yv(e)?e():e}function yv(e){return typeof e=="function"&&e.hasOwnProperty(eS)&&e.__forward_ref__===vl}function D(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function F(e){return{providers:e.providers||[],imports:e.imports||[]}}function yl(e){return P_(e,wv)||P_(e,Dv)}function bv(e){return yl(e)!==null}function P_(e,t){return e.hasOwnProperty(t)?e[t]:null}function tS(e){let t=e&&(e[wv]||e[Dv]);return t||null}function F_(e){return e&&(e.hasOwnProperty(L_)||e.hasOwnProperty(nS))?e[L_]:null}var wv=ie({\u0275prov:ie}),L_=ie({\u0275inj:ie}),Dv=ie({ngInjectableDef:ie}),nS=ie({ngInjectorDef:ie}),w=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=D({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Cv(e){return e&&!!e.\u0275providers}var iS=ie({\u0275cmp:ie}),rS=ie({\u0275dir:ie}),oS=ie({\u0275pipe:ie}),sS=ie({\u0275mod:ie}),qa=ie({\u0275fac:ie}),Io=ie({__NG_ELEMENT_ID__:ie}),V_=ie({__NG_ENV_ID__:ie});function bl(e){return typeof e=="string"?e:e==null?"":String(e)}function aS(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():bl(e)}function lS(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new S(-200,e)}function _h(e,t){throw new S(-201,!1)}var U=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(U||{}),vd;function Ev(){return vd}function ft(e){let t=vd;return vd=e,t}function Sv(e,t,n){let i=yl(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&U.Optional)return null;if(t!==void 0)return t;_h(e,"Injector")}var cS={},Mo=cS,yd="__NG_DI_FLAG__",Ka="ngTempTokenPath",uS="ngTokenPath",dS=/\n/gm,hS="\u0275",B_="__source",hr;function fS(){return hr}function On(e){let t=hr;return hr=e,t}function pS(e,t=U.Default){if(hr===void 0)throw new S(-203,!1);return hr===null?Sv(e,void 0,t):hr.get(e,t&U.Optional?null:void 0,t)}function m(e,t=U.Default){return(Ev()||pS)(pt(e),t)}function g(e,t=U.Default){return m(e,wl(t))}function wl(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function bd(e){let t=[];for(let n=0;n<e.length;n++){let i=pt(e[n]);if(Array.isArray(i)){if(i.length===0)throw new S(900,!1);let r,o=U.Default;for(let s=0;s<i.length;s++){let a=i[s],l=gS(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}t.push(m(r,o))}else t.push(m(i))}return t}function Iv(e,t){return e[yd]=t,e.prototype[yd]=t,e}function gS(e){return e[yd]}function mS(e,t,n,i){let r=e[Ka];throw t[B_]&&r.unshift(t[B_]),e.message=_S(`
`+e.message,r,n,i),e[uS]=r,e[Ka]=null,e}function _S(e,t,n,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==hS?e.slice(2):e;let r=Ye(t);if(Array.isArray(t))r=t.map(Ye).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ye(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(dS,`
  `)}`}var wi=Iv(vv("Optional"),8);var Dl=Iv(vv("SkipSelf"),4);function pr(e,t){let n=e.hasOwnProperty(qa);return n?e[qa]:null}function vS(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function yS(e){return e.flat(Number.POSITIVE_INFINITY)}function vh(e,t){e.forEach(n=>Array.isArray(n)?vh(n,t):t(n))}function Tv(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Qa(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function bS(e,t){let n=[];for(let i=0;i<e;i++)n.push(t);return n}function wS(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(r===1)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;){let o=r-2;e[r]=e[o],r--}e[t]=n,e[t+1]=i}}function yh(e,t,n){let i=Lo(e,t);return i>=0?e[i|1]=n:(i=~i,wS(e,i,t,n)),i}function sd(e,t){let n=Lo(e,t);if(n>=0)return e[n|1]}function Lo(e,t){return DS(e,t,1)}function DS(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=e[o<<n];if(t===s)return o<<n;s>t?r=o:i=o+1}return~(r<<n)}var Ao={},et=[],gr=new w(""),Mv=new w("",-1),Av=new w(""),Ya=class{get(t,n=Mo){if(n===Mo){let i=new Error(`NullInjectorError: No provider for ${Ye(t)}!`);throw i.name="NullInjectorError",i}return n}},Nv=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Nv||{}),$t=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}($t||{}),Pn=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Pn||{});function CS(e,t,n){let i=e.length;for(;;){let r=e.indexOf(t,n);if(r===-1)return r;if(r===0||e.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}function wd(e,t,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];e.setAttribute(t,s,a,o)}else{let o=r,s=n[++i];SS(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),i++}}return i}function ES(e){return e===3||e===4||e===6}function SS(e){return e.charCodeAt(0)===64}function bh(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?j_(e,n,r,null,t[++i]):j_(e,n,r,null,null))}}return e}function j_(e,t,n,i,r){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(e[o+1]=r);return}else if(i===e[o+1]){e[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i),r!==null&&e.splice(o++,0,r)}var Rv="ng-template";function IS(e,t,n,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&CS(t[r+1].toLowerCase(),n,0)!==-1)return!0}else if(wh(e))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function wh(e){return e.type===4&&e.value!==Rv}function TS(e,t,n){let i=e.type===4&&!n?Rv:e.value;return t===i}function MS(e,t,n){let i=4,r=e.attrs,o=r!==null?RS(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!Mt(i)&&!Mt(l))return!1;if(s&&Mt(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!TS(e,l,n)||l===""&&t.length===1){if(Mt(i))return!1;s=!0}}else if(i&8){if(r===null||!IS(e,r,l,n)){if(Mt(i))return!1;s=!0}}else{let c=t[++a],u=AS(l,r,wh(e),n);if(u===-1){if(Mt(i))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(Mt(i))return!1;s=!0}}}}return Mt(i)||s}function Mt(e){return(e&1)===0}function AS(e,t,n,i){if(t===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<t.length;){let s=t[r];if(s===e)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return OS(t,e)}function Ov(e,t,n=!1){for(let i=0;i<t.length;i++)if(MS(e,t[i],n))return!0;return!1}function NS(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function RS(e){for(let t=0;t<e.length;t++){let n=e[t];if(ES(n))return t}return e.length}function OS(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function xS(e,t){e:for(let n=0;n<t.length;n++){let i=t[n];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function U_(e,t){return e?":not("+t.trim()+")":t}function kS(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(i&2){let a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Mt(s)&&(t+=U_(o,r),r=""),i=s,o=o||!Mt(i);n++}return r!==""&&(t+=U_(o,r)),t}function PS(e){return e.map(kS).join(",")}function FS(e){let t=[],n=[],i=1,r=2;for(;i<e.length;){let o=e[i];if(typeof o=="string")r===2?o!==""&&t.push(o,e[++i]):r===8&&n.push(o);else{if(!Mt(r))break;r=o}i++}return{attrs:t,classes:n}}function Ot(e){return Fo(()=>{let t=Lv(e),n=ee(b({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Nv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||$t.Emulated,styles:e.styles||et,_:null,schemas:e.schemas||null,tView:null,id:""});Vv(n);let i=e.dependencies;return n.directiveDefs=$_(i,!1),n.pipeDefs=$_(i,!0),n.id=BS(n),n})}function LS(e){return cn(e)||xv(e)}function VS(e){return e!==null}function L(e){return Fo(()=>({type:e.type,bootstrap:e.bootstrap||et,declarations:e.declarations||et,imports:e.imports||et,exports:e.exports||et,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function H_(e,t){if(e==null)return Ao;let n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i],o,s,a=Pn.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),t?(n[o]=a!==Pn.None?[i,a]:i,t[o]=s):n[o]=i}return n}function Di(e){return Fo(()=>{let t=Lv(e);return Vv(t),t})}function cn(e){return e[iS]||null}function xv(e){return e[rS]||null}function kv(e){return e[oS]||null}function Pv(e){let t=cn(e)||xv(e)||kv(e);return t!==null?t.standalone:!1}function Fv(e,t){let n=e[sS]||null;if(!n&&t===!0)throw new Error(`Type ${Ye(e)} does not have '\u0275mod' property.`);return n}function Lv(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Ao,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||et,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:H_(e.inputs,t),outputs:H_(e.outputs),debugInfo:null}}function Vv(e){e.features?.forEach(t=>t(e))}function $_(e,t){if(!e)return null;let n=t?kv:LS;return()=>(typeof e=="function"?e():e).map(i=>n(i)).filter(VS)}function BS(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let r of n)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function jS(...e){return{\u0275providers:Bv(!0,e),\u0275fromNgModule:!0}}function Bv(e,...t){let n=[],i=new Set,r,o=s=>{n.push(s)};return vh(t,s=>{let a=s;Dd(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&jv(r,o),n}function jv(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:r}=e[n];Dh(r,o=>{t(o,i)})}}function Dd(e,t,n,i){if(e=pt(e),!e)return!1;let r=null,o=F_(e),s=!o&&cn(e);if(!o&&!s){let l=e.ngModule;if(o=F_(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=e}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)Dd(c,t,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{vh(o.imports,u=>{Dd(u,t,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&jv(c,t)}if(!a){let c=pr(r)||(()=>new r);t({provide:r,useFactory:c,deps:et},r),t({provide:Av,useValue:r,multi:!0},r),t({provide:gr,useValue:()=>m(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=e;Dh(l,u=>{t(u,c)})}}else return!1;return r!==e&&e.providers!==void 0}function Dh(e,t){for(let n of e)Cv(n)&&(n=n.\u0275providers),Array.isArray(n)?Dh(n,t):t(n)}var US=ie({provide:String,useValue:ie});function Uv(e){return e!==null&&typeof e=="object"&&US in e}function HS(e){return!!(e&&e.useExisting)}function $S(e){return!!(e&&e.useFactory)}function Cd(e){return typeof e=="function"}var Cl=new w(""),Ha={},GS={},ad;function El(){return ad===void 0&&(ad=new Ya),ad}var Pe=class{},No=class extends Pe{get destroyed(){return this._destroyed}constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sd(t,s=>this.processProvider(s)),this.records.set(Mv,lr(void 0,this)),r.has("environment")&&this.records.set(Pe,lr(void 0,this));let o=this.records.get(Cl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Av,et,U.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Y(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=On(this),i=ft(void 0),r;try{return t()}finally{On(n),ft(i)}}get(t,n=Mo,i=U.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(V_))return t[V_](this);i=wl(i);let r,o=On(this),s=ft(void 0);try{if(!(i&U.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=YS(t)&&yl(t);c&&this.injectableDefInScope(c)?l=lr(Ed(t),Ha):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&U.Self?El():this.parent;return n=i&U.Optional&&n===Mo?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ka]=a[Ka]||[]).unshift(Ye(t)),o)throw a;return mS(a,t,"R3InjectorError",this.source)}else throw a}finally{ft(s),On(o)}}resolveInjectorInitializers(){let t=Y(null),n=On(this),i=ft(void 0),r;try{let o=this.get(gr,et,U.Self);for(let s of o)s()}finally{On(n),ft(i),Y(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(Ye(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(t){t=pt(t);let n=Cd(t)?t:pt(t&&t.provide),i=WS(t);if(!Cd(t)&&t.multi===!0){let r=this.records.get(n);r||(r=lr(void 0,Ha,!0),r.factory=()=>bd(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n){let i=Y(null);try{return n.value===Ha&&(n.value=GS,n.value=n.factory()),typeof n.value=="object"&&n.value&&QS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Y(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=pt(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ed(e){let t=yl(e),n=t!==null?t.factory:pr(e);if(n!==null)return n;if(e instanceof w)throw new S(204,!1);if(e instanceof Function)return zS(e);throw new S(204,!1)}function zS(e){if(e.length>0)throw new S(204,!1);let n=tS(e);return n!==null?()=>n.factory(e):()=>new e}function WS(e){if(Uv(e))return lr(void 0,e.useValue);{let t=qS(e);return lr(t,Ha)}}function qS(e,t,n){let i;if(Cd(e)){let r=pt(e);return pr(r)||Ed(r)}else if(Uv(e))i=()=>pt(e.useValue);else if($S(e))i=()=>e.useFactory(...bd(e.deps||[]));else if(HS(e))i=()=>m(pt(e.useExisting));else{let r=pt(e&&(e.useClass||e.provide));if(KS(e))i=()=>new r(...bd(e.deps));else return pr(r)||Ed(r)}return i}function lr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function KS(e){return!!e.deps}function QS(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function YS(e){return typeof e=="function"||typeof e=="object"&&e instanceof w}function Sd(e,t){for(let n of e)Array.isArray(n)?Sd(n,t):n&&Cv(n)?Sd(n.\u0275providers,t):t(n)}function Kt(e,t){e instanceof No&&e.assertNotDestroyed();let n,i=On(e),r=ft(void 0);try{return t()}finally{On(i),ft(r)}}function Hv(){return Ev()!==void 0||fS()!=null}function ZS(e){if(!Hv())throw new S(-203,!1)}function JS(e){let t=fn.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function XS(e){return typeof e=="function"}var pn=0,H=1,O=2,Fe=3,Nt=4,Ze=5,Ro=6,Za=7,Rt=8,mr=9,Gt=10,we=11,Oo=12,G_=13,Cr=14,mt=15,fi=16,cr=17,un=18,Sl=19,$v=20,xn=21,ld=22,gt=23,zt=25,Gv=1;var pi=7,Ja=8,_r=9,tt=10,Xa=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Xa||{});function kn(e){return Array.isArray(e)&&typeof e[Gv]=="object"}function gn(e){return Array.isArray(e)&&e[Gv]===!0}function zv(e){return(e.flags&4)!==0}function Il(e){return e.componentOffset>-1}function Ch(e){return(e.flags&1)===1}function Vo(e){return!!e.template}function Id(e){return(e[O]&512)!==0}var Td=class{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function Wv(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}function Er(){return qv}function qv(e){return e.type.prototype.ngOnChanges&&(e.setInput=tI),eI}Er.ngInherit=!0;function eI(){let e=Qv(this),t=e?.current;if(t){let n=e.previous;if(n===Ao)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function tI(e,t,n,i,r){let o=this.declaredInputs[i],s=Qv(e)||nI(e,{previous:Ao,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Td(c&&c.currentValue,n,l===Ao),Wv(e,t,r,n)}var Kv="__ngSimpleChanges__";function Qv(e){return e[Kv]||null}function nI(e,t){return e[Kv]=t}var z_=null;var Ut=function(e,t,n){z_?.(e,t,n)},iI="svg",rI="math";function Wt(e){for(;Array.isArray(e);)e=e[pn];return e}function Yv(e,t){return Wt(t[e])}function _t(e,t){return Wt(t[e.index])}function Zv(e,t){return e.data[t]}function Vn(e,t){let n=t[e];return kn(n)?n:n[pn]}function oI(e){return(e[O]&4)===4}function Eh(e){return(e[O]&128)===128}function sI(e){return gn(e[Fe])}function el(e,t){return t==null?null:e[t]}function Jv(e){e[cr]=0}function Xv(e){e[O]&1024||(e[O]|=1024,Eh(e)&&Ml(e))}function aI(e,t){for(;e>0;)t=t[Cr],e--;return t}function Tl(e){return!!(e[O]&9216||e[gt]?.dirty)}function Md(e){e[Gt].changeDetectionScheduler?.notify(8),e[O]&64&&(e[O]|=1024),Tl(e)&&Ml(e)}function Ml(e){e[Gt].changeDetectionScheduler?.notify(0);let t=gi(e);for(;t!==null&&!(t[O]&8192||(t[O]|=8192,!Eh(t)));)t=gi(t)}function ey(e,t){if((e[O]&256)===256)throw new S(911,!1);e[xn]===null&&(e[xn]=[]),e[xn].push(t)}function lI(e,t){if(e[xn]===null)return;let n=e[xn].indexOf(t);n!==-1&&e[xn].splice(n,1)}function gi(e){let t=e[Fe];return gn(t)?t[Fe]:t}var z={lFrame:hy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ty=!1;function cI(){return z.lFrame.elementDepthCount}function uI(){z.lFrame.elementDepthCount++}function dI(){z.lFrame.elementDepthCount--}function ny(){return z.bindingsEnabled}function iy(){return z.skipHydrationRootTNode!==null}function hI(e){return z.skipHydrationRootTNode===e}function fI(){z.skipHydrationRootTNode=null}function ne(){return z.lFrame.lView}function nt(){return z.lFrame.tView}function Sh(e){return z.lFrame.contextLView=e,e[Rt]}function Ih(e){return z.lFrame.contextLView=null,e}function vt(){let e=ry();for(;e!==null&&e.type===64;)e=e.parent;return e}function ry(){return z.lFrame.currentTNode}function pI(){let e=z.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Bo(e,t){let n=z.lFrame;n.currentTNode=e,n.isParent=t}function oy(){return z.lFrame.isParent}function sy(){z.lFrame.isParent=!1}function ay(){return ty}function W_(e){ty=e}function gI(){let e=z.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function mI(e){return z.lFrame.bindingIndex=e}function Th(){return z.lFrame.bindingIndex++}function ly(e){let t=z.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function _I(){return z.lFrame.inI18n}function vI(e,t){let n=z.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ad(t)}function yI(){return z.lFrame.currentDirectiveIndex}function Ad(e){z.lFrame.currentDirectiveIndex=e}function bI(e){let t=z.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function cy(){return z.lFrame.currentQueryIndex}function Mh(e){z.lFrame.currentQueryIndex=e}function wI(e){let t=e[H];return t.type===2?t.declTNode:t.type===1?e[Ze]:null}function uy(e,t,n){if(n&U.SkipSelf){let r=t,o=e;for(;r=r.parent,r===null&&!(n&U.Host);)if(r=wI(o),r===null||(o=o[Cr],r.type&10))break;if(r===null)return!1;t=r,e=o}let i=z.lFrame=dy();return i.currentTNode=t,i.lView=e,!0}function Ah(e){let t=dy(),n=e[H];z.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function dy(){let e=z.lFrame,t=e===null?null:e.child;return t===null?hy(e):t}function hy(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function fy(){let e=z.lFrame;return z.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var py=fy;function Nh(){let e=fy();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function DI(e){return(z.lFrame.contextLView=aI(e,z.lFrame.contextLView))[Rt]}function Ci(){return z.lFrame.selectedIndex}function mi(e){z.lFrame.selectedIndex=e}function gy(){let e=z.lFrame;return Zv(e.tView,e.selectedIndex)}function CI(){return z.lFrame.currentNamespace}var my=!0;function Rh(){return my}function Oh(e){my=e}function EI(e,t,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=qv(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}r&&(n.preOrderHooks??=[]).push(0-e,r),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function xh(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function $a(e,t,n){_y(e,t,3,n)}function Ga(e,t,n,i){(e[O]&3)===n&&_y(e,t,n,i)}function cd(e,t){let n=e[O];(n&3)===t&&(n&=16383,n+=1,e[O]=n)}function _y(e,t,n,i){let r=i!==void 0?e[cr]&65535:0,o=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(e[cr]+=65536),(a<o||o==-1)&&(SI(e,n,t,l),e[cr]=(e[cr]&4294901760)+l+2),l++}function q_(e,t){Ut(4,e,t);let n=Y(null);try{t.call(e)}finally{Y(n),Ut(5,e,t)}}function SI(e,t,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=e[s];r?e[O]>>14<e[cr]>>16&&(e[O]&3)===t&&(e[O]+=16384,q_(a,o)):q_(a,o)}var fr=-1,xo=class{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function II(e){return e instanceof xo}function TI(e){return(e.flags&8)!==0}function MI(e){return(e.flags&16)!==0}var ud={},Nd=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=wl(i);let r=this.injector.get(t,ud,i);return r!==ud||n===ud?r:this.parentInjector.get(t,n,i)}};function vy(e){return e!==fr}function tl(e){return e&32767}function AI(e){return e>>16}function nl(e,t){let n=AI(e),i=t;for(;n>0;)i=i[Cr],n--;return i}var Rd=!0;function K_(e){let t=Rd;return Rd=e,t}var NI=256,yy=NI-1,by=5,RI=0,Ht={};function OI(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Io)&&(i=n[Io]),i==null&&(i=n[Io]=RI++);let r=i&yy,o=1<<r;t.data[e+(r>>by)]|=o}function wy(e,t){let n=Dy(e,t);if(n!==-1)return n;let i=t[H];i.firstCreatePass&&(e.injectorIndex=t.length,dd(i.data,e),dd(t,null),dd(i.blueprint,null));let r=kh(e,t),o=e.injectorIndex;if(vy(r)){let s=tl(r),a=nl(r,t),l=a[H].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=r,o}function dd(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Dy(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function kh(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;r!==null;){if(i=Ty(r),i===null)return fr;if(n++,r=r[Cr],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return fr}function xI(e,t,n){OI(e,t,n)}function Cy(e,t,n){if(n&U.Optional||e!==void 0)return e;_h(t,"NodeInjector")}function Ey(e,t,n,i){if(n&U.Optional&&i===void 0&&(i=null),!(n&(U.Self|U.Host))){let r=e[mr],o=ft(void 0);try{return r?r.get(t,i,n&U.Optional):Sv(t,i,n&U.Optional)}finally{ft(o)}}return Cy(i,t,n)}function Sy(e,t,n,i=U.Default,r){if(e!==null){if(t[O]&2048&&!(i&U.Self)){let s=LI(e,t,n,i,Ht);if(s!==Ht)return s}let o=Iy(e,t,n,i,Ht);if(o!==Ht)return o}return Ey(t,n,i,r)}function Iy(e,t,n,i,r){let o=PI(n);if(typeof o=="function"){if(!uy(t,e,i))return i&U.Host?Cy(r,n,i):Ey(t,n,i,r);try{let s;if(s=o(i),s==null&&!(i&U.Optional))_h(n);else return s}finally{py()}}else if(typeof o=="number"){let s=null,a=Dy(e,t),l=fr,c=i&U.Host?t[mt][Ze]:null;for((a===-1||i&U.SkipSelf)&&(l=a===-1?kh(e,t):t[a+8],l===fr||!Y_(i,!1)?a=-1:(s=t[H],a=tl(l),t=nl(l,t)));a!==-1;){let u=t[H];if(Q_(o,a,u.data)){let d=kI(a,t,n,s,i,c);if(d!==Ht)return d}l=t[a+8],l!==fr&&Y_(i,t[H].data[a+8]===c)&&Q_(o,a,t)?(s=u,a=tl(l),t=nl(l,t)):a=-1}}return r}function kI(e,t,n,i,r,o){let s=t[H],a=s.data[e+8],l=i==null?Il(a)&&Rd:i!=s&&(a.type&3)!==0,c=r&U.Host&&o===a,u=za(a,s,n,l,c);return u!==null?vr(t,s,u,a):Ht}function za(e,t,n,i,r){let o=e.providerIndexes,s=t.data,a=o&1048575,l=e.directiveStart,c=e.directiveEnd,u=o>>20,d=i?a:a+u,h=r?a+u:c;for(let f=d;f<h;f++){let p=s[f];if(f<l&&n===p||f>=l&&p.type===n)return f}if(r){let f=s[l];if(f&&Vo(f)&&f.type===n)return l}return null}function vr(e,t,n,i){let r=e[n],o=t.data;if(II(r)){let s=r;s.resolving&&lS(aS(o[n]));let a=K_(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?ft(s.injectImpl):null,u=uy(e,i,U.Default);try{r=e[n]=s.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&EI(n,o[n],t)}finally{c!==null&&ft(c),K_(a),s.resolving=!1,py()}}return r}function PI(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Io)?e[Io]:void 0;return typeof t=="number"?t>=0?t&yy:FI:t}function Q_(e,t,n){let i=1<<e;return!!(n[t+(e>>by)]&i)}function Y_(e,t){return!(e&U.Self)&&!(e&U.Host&&t)}var hi=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return Sy(this._tNode,this._lView,t,wl(i),n)}};function FI(){return new hi(vt(),ne())}function jo(e){return Fo(()=>{let t=e.prototype.constructor,n=t[qa]||Od(t),i=Object.prototype,r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){let o=r[qa]||Od(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Od(e){return yv(e)?()=>{let t=Od(pt(e));return t&&t()}:pr(e)}function LI(e,t,n,i,r){let o=e,s=t;for(;o!==null&&s!==null&&s[O]&2048&&!(s[O]&512);){let a=Iy(o,s,n,i|U.Self,Ht);if(a!==Ht)return a;let l=o.parent;if(!l){let c=s[$v];if(c){let u=c.get(n,Ht,i);if(u!==Ht)return u}l=Ty(s),s=s[Cr]}o=l}return r}function Ty(e){let t=e[H],n=t.type;return n===2?t.declTNode:n===1?e[Ze]:null}function Z_(e,t=null,n=null,i){let r=My(e,t,n,i);return r.resolveInjectorInitializers(),r}function My(e,t=null,n=null,i,r=new Set){let o=[n||et,jS(e)];return i=i||(typeof e=="object"?void 0:Ye(e)),new No(o,t||El(),i||null,r)}var Ne=class e{static{this.THROW_IF_NOT_FOUND=Mo}static{this.NULL=new Ya}static create(t,n){if(Array.isArray(t))return Z_({name:""},n,t,"");{let i=t.name??"";return Z_({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=D({token:e,providedIn:"any",factory:()=>m(Mv)})}static{this.__NG_ELEMENT_ID__=-1}};var VI=new w("");VI.__NG_ELEMENT_ID__=e=>{let t=vt();if(t===null)throw new S(204,!1);if(t.type&2)return t.value;if(e&U.Optional)return null;throw new S(204,!1)};var BI="ngOriginalError";function hd(e){return e[BI]}var Ay=!0,Al=(()=>{class e{static{this.__NG_ELEMENT_ID__=jI}static{this.__NG_ENV_ID__=n=>n}}return e})(),xd=class extends Al{constructor(t){super(),this._lView=t}onDestroy(t){return ey(this._lView,t),()=>lI(this._lView,t)}};function jI(){return new xd(ne())}var Sr=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ee(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=D({token:e,providedIn:"root",factory:()=>new e})}}return e})();var kd=class extends Z{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,Hv()&&(this.destroyRef=g(Al,{optional:!0})??void 0,this.pendingTasks=g(Sr,{optional:!0})??void 0)}emit(t){let n=Y(null);try{super.next(t)}finally{Y(n)}}subscribe(t,n,i){let r=t,o=n||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof he&&t.add(a),a}wrapInTimeout(t){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{t(n),i!==void 0&&this.pendingTasks?.remove(i)})}}},_e=kd;function il(...e){}function Ny(e){let t,n;function i(){e=il;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),i()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),i()})),()=>i()}function J_(e){return queueMicrotask(()=>e()),()=>{e=il}}var Ph="isAngularZone",rl=Ph+"_ID",UI=0,j=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _e(!1),this.onMicrotaskEmpty=new _e(!1),this.onStable=new _e(!1),this.onError=new _e(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=Ay}=t;if(typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,GI(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ph)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new S(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,HI,il,il);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},HI={};function Fh(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function $I(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Ny(()=>{e.callbackScheduled=!1,Pd(e),e.isCheckStableRunning=!0,Fh(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Pd(e)}function GI(e){let t=()=>{$I(e)},n=UI++;e._inner=e._inner.fork({name:"angular",properties:{[Ph]:!0,[rl]:n,[rl+n]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(zI(l))return i.invokeTask(o,s,a,l);try{return X_(e),i.invokeTask(o,s,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),ev(e)}},onInvoke:(i,r,o,s,a,l,c)=>{try{return X_(e),i.invoke(o,s,a,l,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!WI(l)&&t(),ev(e)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Pd(e),Fh(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Pd(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function X_(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ev(e){e._nesting--,Fh(e)}var ol=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _e,this.onMicrotaskEmpty=new _e,this.onStable=new _e,this.onError=new _e}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}};function zI(e){return Ry(e,"__ignore_ng_zone__")}function WI(e){return Ry(e,"__scheduler_tick__")}function Ry(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}function qI(e="zone.js",t){return e==="noop"?new ol:e==="zone.js"?new j(t):e}var dn=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&hd(t);for(;n&&hd(n);)n=hd(n);return n||null}},KI=new w("",{providedIn:"root",factory:()=>{let e=g(j),t=g(dn);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function QI(){return Ir(vt(),ne())}function Ir(e,t){return new yt(_t(e,t))}var yt=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=QI}}return e})();function YI(e){return e instanceof yt?e.nativeElement:e}function ZI(){return this._results[Symbol.iterator]()}var Fd=class e{get changes(){return this._changes??=new _e}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=ZI)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let i=yS(t);(this._changesDetected=!vS(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Oy(e){return(e.flags&128)===128}var xy=new Map,JI=0;function XI(){return JI++}function eT(e){xy.set(e[Sl],e)}function Ld(e){xy.delete(e[Sl])}var tv="__ngContext__";function _i(e,t){kn(t)?(e[tv]=t[Sl],eT(t)):e[tv]=t}function ky(e){return Fy(e[Oo])}function Py(e){return Fy(e[Nt])}function Fy(e){for(;e!==null&&!gn(e);)e=e[Nt];return e}var Vd;function Ly(e){Vd=e}function tT(){if(Vd!==void 0)return Vd;if(typeof document<"u")return document;throw new S(210,!1)}var Nl=new w("",{providedIn:"root",factory:()=>nT}),nT="ng",Lh=new w(""),Re=new w("",{providedIn:"platform",factory:()=>"unknown"});var Vh=new w("",{providedIn:"root",factory:()=>tT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var iT="h",rT="b";var oT=()=>null;function Bh(e,t,n=!1){return oT(e,t,n)}var Vy=!1,sT=new w("",{providedIn:"root",factory:()=>Vy});var sl=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_v})`}};function Uo(e){return e instanceof sl?e.changingThisBreaksApplicationSecurity:e}function By(e,t){let n=aT(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${_v})`)}return n===t}function aT(e){return e instanceof sl&&e.getTypeName()||null}var lT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jy(e){return e=String(e),e.match(lT)?e:"unsafe:"+e}var jh=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(jh||{});function Uy(e){let t=cT();return t?t.sanitize(jh.URL,e)||"":By(e,"URL")?Uo(e):jy(bl(e))}function cT(){let e=ne();return e&&e[Gt].sanitizer}function Hy(e){return e instanceof Function?e():e}function uT(e){return(e??g(Ne)).get(Re)==="browser"}var qt=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(qt||{}),dT;function Uh(e,t){return dT(e,t)}function ur(e,t,n,i,r){if(i!=null){let o,s=!1;gn(i)?o=i:kn(i)&&(s=!0,i=i[pn]);let a=Wt(i);e===0&&n!==null?r==null?Ky(t,n,a):al(t,n,a,r||null,!0):e===1&&n!==null?al(t,n,a,r||null,!0):e===2?ET(t,a,s):e===3&&t.destroyNode(a),o!=null&&IT(t,e,o,n,r)}}function hT(e,t){return e.createText(t)}function fT(e,t,n){e.setValue(t,n)}function $y(e,t,n){return e.createElement(t,n)}function pT(e,t){Gy(e,t),t[pn]=null,t[Ze]=null}function gT(e,t,n,i,r,o){i[pn]=r,i[Ze]=t,Rl(e,i,n,1,r,o)}function Gy(e,t){t[Gt].changeDetectionScheduler?.notify(9),Rl(e,t,t[we],2,null,null)}function mT(e){let t=e[Oo];if(!t)return fd(e[H],e);for(;t;){let n=null;if(kn(t))n=t[Oo];else{let i=t[tt];i&&(n=i)}if(!n){for(;t&&!t[Nt]&&t!==e;)kn(t)&&fd(t[H],t),t=t[Fe];t===null&&(t=e),kn(t)&&fd(t[H],t),n=t&&t[Nt]}t=n}}function _T(e,t,n,i){let r=tt+i,o=n.length;i>0&&(n[r-1][Nt]=t),i<o-tt?(t[Nt]=n[r],Tv(n,tt+i,t)):(n.push(t),t[Nt]=null),t[Fe]=n;let s=t[fi];s!==null&&n!==s&&zy(s,t);let a=t[un];a!==null&&a.insertView(e),Md(t),t[O]|=128}function zy(e,t){let n=e[_r],i=t[Fe];if(kn(i))e[O]|=Xa.HasTransplantedViews;else{let r=i[Fe][mt];t[mt]!==r&&(e[O]|=Xa.HasTransplantedViews)}n===null?e[_r]=[t]:n.push(t)}function Hh(e,t){let n=e[_r],i=n.indexOf(t);n.splice(i,1)}function Bd(e,t){if(e.length<=tt)return;let n=tt+t,i=e[n];if(i){let r=i[fi];r!==null&&r!==e&&Hh(r,i),t>0&&(e[n-1][Nt]=i[Nt]);let o=Qa(e,tt+t);pT(i[H],i);let s=o[un];s!==null&&s.detachView(o[H]),i[Fe]=null,i[Nt]=null,i[O]&=-129}return i}function Wy(e,t){if(!(t[O]&256)){let n=t[we];n.destroyNode&&Rl(e,t,n,3,null,null),mT(t)}}function fd(e,t){if(t[O]&256)return;let n=Y(null);try{t[O]&=-129,t[O]|=256,t[gt]&&Pu(t[gt]),yT(e,t),vT(e,t),t[H].type===1&&t[we].destroy();let i=t[fi];if(i!==null&&gn(t[Fe])){i!==t[Fe]&&Hh(i,t);let r=t[un];r!==null&&r.detachView(e)}Ld(t)}finally{Y(n)}}function vT(e,t){let n=e.cleanup,i=t[Za];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(t[Za]=null);let r=t[xn];if(r!==null){t[xn]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function yT(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=t[n[i]];if(!(r instanceof xo)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Ut(4,a,l);try{l.call(a)}finally{Ut(5,a,l)}}else{Ut(4,r,o);try{o.call(r)}finally{Ut(5,r,o)}}}}}function qy(e,t,n){return bT(e,t.parent,n)}function bT(e,t,n){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return n[pn];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=e.data[i.directiveStart+r];if(o===$t.None||o===$t.Emulated)return null}return _t(i,n)}}function al(e,t,n,i,r){e.insertBefore(t,n,i,r)}function Ky(e,t,n){e.appendChild(t,n)}function nv(e,t,n,i,r){i!==null?al(e,t,n,i,r):Ky(e,t,n)}function Qy(e,t){return e.parentNode(t)}function wT(e,t){return e.nextSibling(t)}function Yy(e,t,n){return CT(e,t,n)}function DT(e,t,n){return e.type&40?_t(e,n):null}var CT=DT,iv;function $h(e,t,n,i){let r=qy(e,i,t),o=t[we],s=i.parent||t[Ze],a=Yy(s,i,t);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)nv(o,r,n[l],a,!1);else nv(o,r,n,a,!1);iv!==void 0&&iv(o,i,t,n,r)}function So(e,t){if(t!==null){let n=t.type;if(n&3)return _t(t,e);if(n&4)return jd(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return So(e,i);{let r=e[t.index];return gn(r)?jd(-1,r):Wt(r)}}else{if(n&128)return So(e,t.next);if(n&32)return Uh(t,e)()||Wt(e[t.index]);{let i=Zy(e,t);if(i!==null){if(Array.isArray(i))return i[0];let r=gi(e[mt]);return So(r,i)}else return So(e,t.next)}}}return null}function Zy(e,t){if(t!==null){let i=e[mt][Ze],r=t.projection;return i.projection[r]}return null}function jd(e,t){let n=tt+e+1;if(n<t.length){let i=t[n],r=i[H].firstChild;if(r!==null)return So(i,r)}return t[pi]}function ET(e,t,n){e.removeChild(null,t,n)}function Gh(e,t,n,i,r,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=i[n.index],l=n.type;if(s&&t===0&&(a&&_i(Wt(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)Gh(e,t,n.child,i,r,o,!1),ur(t,e,r,a,o);else if(l&32){let c=Uh(n,i),u;for(;u=c();)ur(t,e,r,u,o);ur(t,e,r,a,o)}else l&16?Jy(e,t,i,n,r,o):ur(t,e,r,a,o);n=s?n.projectionNext:n.next}}function Rl(e,t,n,i,r,o){Gh(n,i,e.firstChild,t,r,o,!1)}function ST(e,t,n){let i=t[we],r=qy(e,n,t),o=n.parent||t[Ze],s=Yy(o,n,t);Jy(i,0,t,n,r,s)}function Jy(e,t,n,i,r,o){let s=n[mt],l=s[Ze].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];ur(t,e,r,u,o)}else{let c=l,u=s[Fe];Oy(i)&&(c.flags|=128),Gh(e,t,c,u,r,o,!0)}}function IT(e,t,n,i,r){let o=n[pi],s=Wt(n);o!==s&&ur(t,e,i,o,r);for(let a=tt;a<n.length;a++){let l=n[a];Rl(l[H],l,e,t,i,o)}}function TT(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:qt.DashCase;r==null?e.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=qt.Important),e.setStyle(n,i,r,o))}}function MT(e,t,n){e.setAttribute(t,"style",n)}function Xy(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function e0(e,t,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&wd(e,t,i),r!==null&&Xy(e,t,r),o!==null&&MT(e,t,o)}var mn={};function Bn(e=1){t0(nt(),ne(),Ci()+e,!1)}function t0(e,t,n,i){if(!i)if((t[O]&3)===3){let o=e.preOrderCheckHooks;o!==null&&$a(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Ga(t,o,0,n)}mi(n)}function Le(e,t=U.Default){let n=ne();if(n===null)return m(e,t);let i=vt();return Sy(i,n,pt(e),t)}function n0(){let e="invalid";throw new Error(e)}function i0(e,t,n,i,r,o){let s=Y(null);try{let a=null;r&Pn.SignalBased&&(a=t[i][l_]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&Pn.HasDecoratorInputTransform&&(o=e.inputTransforms[i].call(t,o)),e.setInput!==null?e.setInput(t,a,o,n,i):Wv(t,a,i,o)}finally{Y(s)}}function AT(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)mi(~r);else{let o=r,s=n[++i],a=n[++i];vI(s,o);let l=t[o];a(2,l)}}}finally{mi(-1)}}function Ol(e,t,n,i,r,o,s,a,l,c,u){let d=t.blueprint.slice();return d[pn]=r,d[O]=i|4|128|8|64,(c!==null||e&&e[O]&2048)&&(d[O]|=2048),Jv(d),d[Fe]=d[Cr]=e,d[Rt]=n,d[Gt]=s||e&&e[Gt],d[we]=a||e&&e[we],d[mr]=l||e&&e[mr]||null,d[Ze]=o,d[Sl]=XI(),d[Ro]=u,d[$v]=c,d[mt]=t.type==2?e[mt]:d,d}function Ho(e,t,n,i,r){let o=e.data[t];if(o===null)o=NT(e,t,n,i,r),_I()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=pI();o.injectorIndex=s===null?-1:s.injectorIndex}return Bo(o,!0),o}function NT(e,t,n,i,r){let o=ry(),s=oy(),a=s?o:o&&o.parent,l=e.data[t]=FT(e,a,n,t,i,r);return e.firstChild===null&&(e.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function r0(e,t,n,i){if(n===0)return-1;let r=t.length;for(let o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function o0(e,t,n,i,r){let o=Ci(),s=i&2;try{mi(-1),s&&t.length>zt&&t0(e,t,zt,!1),Ut(s?2:0,r),n(i,r)}finally{mi(o),Ut(s?3:1,r)}}function s0(e,t,n){if(zv(t)){let i=Y(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=e.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{Y(i)}}}function a0(e,t,n){ny()&&($T(e,t,n,_t(n,t)),(n.flags&64)===64&&h0(e,t,n))}function l0(e,t,n=_t){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(t,e):e[s];e[r++]=a}}}function c0(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=zh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function zh(e,t,n,i,r,o,s,a,l,c,u){let d=zt+i,h=d+r,f=RT(d,h),p=typeof c=="function"?c():c;return f[H]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function RT(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:mn);return n}function OT(e,t,n,i){let o=i.get(sT,Vy)||n===$t.ShadowDom,s=e.selectRootElement(t,o);return xT(s),s}function xT(e){kT(e)}var kT=()=>null;function PT(e,t,n,i){let r=g0(t);r.push(n),e.firstCreatePass&&m0(e).push(i,r.length-1)}function FT(e,t,n,i,r,o){let s=t?t.injectorIndex:-1,a=0;return iy()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function rv(e,t,n,i,r){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;i??={};let a,l=Pn.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(r!==null){if(!r.hasOwnProperty(o))continue;c=r[o]}e===0?ov(i,n,c,a,l):ov(i,n,c,a)}return i}function ov(e,t,n,i,r){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,i):o=e[n]=[t,i],r!==void 0&&o.push(r)}function LT(e,t,n){let i=t.directiveStart,r=t.directiveEnd,o=e.data,s=t.attrs,a=[],l=null,c=null;for(let u=i;u<r;u++){let d=o[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;l=rv(0,d.inputs,u,l,f),c=rv(1,d.outputs,u,c,p);let _=l!==null&&s!==null&&!wh(t)?eM(l,u,s):null;a.push(_)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function VT(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function BT(e,t,n,i,r,o,s,a){let l=_t(t,n),c=t.inputs,u;!a&&c!=null&&(u=c[i])?(Wh(e,n,u,i,r),Il(t)&&jT(n,t.index)):t.type&3?(i=VT(i),r=s!=null?s(r,t.value||"",i):r,o.setProperty(l,i,r)):t.type&12}function jT(e,t){let n=Vn(t,e);n[O]&16||(n[O]|=64)}function u0(e,t,n,i){if(ny()){let r=i===null?null:{"":-1},o=zT(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&d0(e,t,n,s,r,a),r&&WT(n,i,r)}n.mergedAttrs=bh(n.mergedAttrs,n.attrs)}function d0(e,t,n,i,r,o){for(let c=0;c<i.length;c++)xI(wy(n,t),e,i[c].type);KT(n,e.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=r0(e,t,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];n.mergedAttrs=bh(n.mergedAttrs,u.hostAttrs),QT(e,n,t,l,u),qT(l,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}LT(e,n,o)}function UT(e,t,n,i,r){let o=r.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;HT(s)!=a&&s.push(a),s.push(n,i,o)}}function HT(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function $T(e,t,n,i){let r=n.directiveStart,o=n.directiveEnd;Il(n)&&YT(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||wy(n,t),_i(i,t);let s=n.initialInputs;for(let a=r;a<o;a++){let l=e.data[a],c=vr(t,e,a,n);if(_i(c,t),s!==null&&XT(t,a-r,c,l,n,s),Vo(l)){let u=Vn(n.index,t);u[Rt]=vr(t,e,a,n)}}}function h0(e,t,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=yI();try{mi(o);for(let a=i;a<r;a++){let l=e.data[a],c=t[a];Ad(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&GT(l,c)}}finally{mi(-1),Ad(s)}}function GT(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function zT(e,t){let n=e.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(Ov(t,s.selectors,!1))if(i||(i=[]),Vo(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;Ud(e,t,l)}else i.unshift(s),Ud(e,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function Ud(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function WT(e,t,n){if(t){let i=e.localNames=[];for(let r=0;r<t.length;r+=2){let o=n[t[r+1]];if(o==null)throw new S(-301,!1);i.push(t[r],o)}}}function qT(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;Vo(t)&&(n[""]=e)}}function KT(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function QT(e,t,n,i,r){e.data[i]=r;let o=r.factory||(r.factory=pr(r.type,!0)),s=new xo(o,Vo(r),Le);e.blueprint[i]=s,n[i]=s,UT(e,t,i,r0(e,n,r.hostVars,mn),r)}function YT(e,t,n){let i=_t(t,e),r=c0(n),o=e[Gt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=xl(e,Ol(e,r,null,s,i,t,null,o.createRenderer(i,n),null,null,null));e[t.index]=a}function ZT(e,t,n,i,r,o){let s=_t(e,t);JT(t[we],s,o,e.value,n,i,r)}function JT(e,t,n,i,r,o,s){if(o==null)e.removeAttribute(t,r,n);else{let a=s==null?bl(o):s(o,i||"",r);e.setAttribute(t,r,a,n)}}function XT(e,t,n,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];i0(i,n,l,c,u,d)}}function eM(e,t,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){i===null&&(i=[]);let s=e[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(o,s[a+1],s[a+2],n[r+1]);break}}r+=2}return i}function f0(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function p0(e,t){let n=e.contentQueries;if(n!==null){let i=Y(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=e.data[s];Mh(o),a.contentQueries(2,t[s],s)}}}finally{Y(i)}}}function xl(e,t){return e[Oo]?e[G_][Nt]=t:e[Oo]=t,e[G_]=t,t}function Hd(e,t,n){Mh(0);let i=Y(null);try{t(e,n)}finally{Y(i)}}function g0(e){return e[Za]??=[]}function m0(e){return e.cleanup??=[]}function _0(e,t){let n=e[mr],i=n?n.get(dn,null):null;i&&i.handleError(t)}function Wh(e,t,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],c=t[s],u=e.data[s];i0(u,c,i,a,l,r)}}function tM(e,t,n){let i=Yv(t,e);fT(e[we],i,n)}function nM(e,t){let n=Vn(t,e),i=n[H];iM(i,n);let r=n[pn];r!==null&&n[Ro]===null&&(n[Ro]=Bh(r,n[mr])),qh(i,n,n[Rt])}function iM(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function qh(e,t,n){Ah(t);try{let i=e.viewQuery;i!==null&&Hd(1,i,n);let r=e.template;r!==null&&o0(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[un]?.finishViewCreation(e),e.staticContentQueries&&p0(e,t),e.staticViewQueries&&Hd(2,e.viewQuery,n);let o=e.components;o!==null&&rM(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[O]&=-5,Nh()}}function rM(e,t){for(let n=0;n<t.length;n++)nM(e,t[n])}function v0(e,t,n,i){let r=Y(null);try{let o=t.tView,a=e[O]&4096?4096:16,l=Ol(e,o,n,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=e[t.index];l[fi]=c;let u=e[un];return u!==null&&(l[un]=u.createEmbeddedView(o)),qh(o,l,n),l}finally{Y(r)}}function $d(e,t){return!t||t.firstChild===null||Oy(e)}function y0(e,t,n,i=!0){let r=t[H];if(_T(r,t,e,n),i){let s=jd(n,e),a=t[we],l=Qy(a,e[pi]);l!==null&&gT(r,e[Ze],a,t,l,s)}let o=t[Ro];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ll(e,t,n,i,r=!1){for(;n!==null;){if(n.type===128){n=r?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&i.push(Wt(o)),gn(o)&&oM(o,i);let s=n.type;if(s&8)ll(e,t,n.child,i);else if(s&32){let a=Uh(n,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=Zy(t,n);if(Array.isArray(a))i.push(...a);else{let l=gi(t[mt]);ll(l[H],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function oM(e,t){for(let n=tt;n<e.length;n++){let i=e[n],r=i[H].firstChild;r!==null&&ll(i[H],i,r,t)}e[pi]!==e[pn]&&t.push(e[pi])}var b0=[];function sM(e){return e[gt]??aM(e)}function aM(e){let t=b0.pop()??Object.create(cM);return t.lView=e,t}function lM(e){e.lView[gt]!==e&&(e.lView=null,b0.push(e))}var cM=ee(b({},Ou),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ml(e.lView)},consumerOnSignalRead(){this.lView[gt]=this}});function uM(e){let t=e[gt]??Object.create(dM);return t.lView=e,t}var dM=ee(b({},Ou),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=gi(e.lView);for(;t&&!w0(t[H]);)t=gi(t);t&&Xv(t)},consumerOnSignalRead(){this.lView[gt]=this}});function w0(e){return e.type!==2}var hM=100;function D0(e,t=!0,n=0){let i=e[Gt],r=i.rendererFactory,o=!1;o||r.begin?.();try{fM(e,n)}catch(s){throw t&&_0(e,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function fM(e,t){let n=ay();try{W_(!0),Gd(e,t);let i=0;for(;Tl(e);){if(i===hM)throw new S(103,!1);i++,Gd(e,1)}}finally{W_(n)}}function pM(e,t,n,i){let r=t[O];if((r&256)===256)return;let o=!1,s=!1;!o&&t[Gt].inlineEffectRunner?.flush(),Ah(t);let a=!0,l=null,c=null;o||(w0(e)?(c=sM(t),l=xu(c)):c_()===null?(a=!1,c=uM(t),l=xu(c)):t[gt]&&(Pu(t[gt]),t[gt]=null));try{Jv(t),mI(e.bindingStartIndex),n!==null&&o0(e,t,n,2,i);let u=(r&3)===3;if(!o)if(u){let f=e.preOrderCheckHooks;f!==null&&$a(t,f,null)}else{let f=e.preOrderHooks;f!==null&&Ga(t,f,0,null),cd(t,0)}if(s||gM(t),C0(t,0),e.contentQueries!==null&&p0(e,t),!o)if(u){let f=e.contentCheckHooks;f!==null&&$a(t,f)}else{let f=e.contentHooks;f!==null&&Ga(t,f,1),cd(t,1)}AT(e,t);let d=e.components;d!==null&&S0(t,d,0);let h=e.viewQuery;if(h!==null&&Hd(2,h,i),!o)if(u){let f=e.viewCheckHooks;f!==null&&$a(t,f)}else{let f=e.viewHooks;f!==null&&Ga(t,f,2),cd(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[ld]){for(let f of t[ld])f();t[ld]=null}o||(t[O]&=-73)}catch(u){throw o||Ml(t),u}finally{c!==null&&(u_(c,l),a&&lM(c)),Nh()}}function C0(e,t){for(let n=ky(e);n!==null;n=Py(n))for(let i=tt;i<n.length;i++){let r=n[i];E0(r,t)}}function gM(e){for(let t=ky(e);t!==null;t=Py(t)){if(!(t[O]&Xa.HasTransplantedViews))continue;let n=t[_r];for(let i=0;i<n.length;i++){let r=n[i];Xv(r)}}}function mM(e,t,n){let i=Vn(t,e);E0(i,n)}function E0(e,t){Eh(e)&&Gd(e,t)}function Gd(e,t){let i=e[H],r=e[O],o=e[gt],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&ku(o)),s||=!1,o&&(o.dirty=!1),e[O]&=-9217,s)pM(i,e,i.template,e[Rt]);else if(r&8192){C0(e,1);let a=i.components;a!==null&&S0(e,a,1)}}function S0(e,t,n){for(let i=0;i<t.length;i++)mM(e,t[i],n)}function Kh(e,t){let n=ay()?64:1088;for(e[Gt].changeDetectionScheduler?.notify(t);e;){e[O]|=n;let i=gi(e);if(Id(e)&&!i)return e;e=i}return null}var vi=class{get rootNodes(){let t=this._lView,n=t[H];return ll(n,t,n.firstChild,[])}constructor(t,n,i=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rt]}set context(t){this._lView[Rt]=t}get destroyed(){return(this._lView[O]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Fe];if(gn(t)){let n=t[Ja],i=n?n.indexOf(this):-1;i>-1&&(Bd(t,i),Qa(n,i))}this._attachedToViewContainer=!1}Wy(this._lView[H],this._lView)}onDestroy(t){ey(this._lView,t)}markForCheck(){Kh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[O]&=-129}reattach(){Md(this._lView),this._lView[O]|=128}detectChanges(){this._lView[O]|=1024,D0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Id(this._lView),n=this._lView[fi];n!==null&&!t&&Hh(n,this._lView),Gy(this._lView[H],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=t;let n=Id(this._lView),i=this._lView[fi];i!==null&&!n&&zy(i,this._lView),Md(this._lView)}},Fn=(()=>{class e{static{this.__NG_ELEMENT_ID__=yM}}return e})(),_M=Fn,vM=class extends _M{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,i){let r=v0(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:i});return new vi(r)}};function yM(){return Qh(vt(),ne())}function Qh(e,t){return e.type&4?new vM(t,e,Ir(e,t)):null}var w3=new RegExp(`^(\\d+)*(${rT}|${iT})*(.*)`);var bM=()=>null;function zd(e,t){return bM(e,t)}var yr=class{},Yh=new w("",{providedIn:"root",factory:()=>!1});var I0=new w(""),T0=new w(""),Wd=class{},cl=class{};function wM(e){let t=Error(`No component factory found for ${Ye(e)}.`);return t[DM]=e,t}var DM="ngComponent";var qd=class{resolveComponentFactory(t){throw wM(t)}},br=class{static{this.NULL=new qd}},wr=class{},$o=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>CM()}}return e})();function CM(){let e=ne(),t=vt(),n=Vn(t.index,e);return(kn(n)?n:e)[we]}var EM=(()=>{class e{static{this.\u0275prov=D({token:e,providedIn:"root",factory:()=>null})}}return e})();function Kd(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=_d(r,a);else if(o==2){let l=a,c=t[++s];i=_d(i,l+": "+c+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}var ul=class extends br{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=cn(t);return new yi(n,this.ngModule)}};function sv(e,t){let n=[];for(let i in e){if(!e.hasOwnProperty(i))continue;let r=e[i];if(r===void 0)continue;let o=Array.isArray(r),s=o?r[0]:r,a=o?r[1]:Pn.None;t?n.push({propName:s,templateName:i,isSignal:(a&Pn.SignalBased)!==0}):n.push({propName:s,templateName:i})}return n}function SM(e){let t=e.toLowerCase();return t==="svg"?iI:t==="math"?rI:null}var yi=class extends cl{get inputs(){let t=this.componentDef,n=t.inputTransforms,i=sv(t.inputs,!0);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return sv(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=PS(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,i,r){let o=Y(null);try{r=r||this.ngModule;let s=r instanceof Pe?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Nd(t,s):t,l=a.get(wr,null);if(l===null)throw new S(407,!1);let c=a.get(EM,null),u=a.get(yr,null),d={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,changeDetectionScheduler:u},h=l.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=i?OT(h,i,this.componentDef.encapsulation,a):$y(h,f,SM(f)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let y=null;p!==null&&(y=Bh(p,a,!0));let M=zh(0,null,null,1,0,null,null,null,null,null,null),k=Ol(null,M,null,_,null,null,d,h,a,null,y);Ah(k);let E,V,pe=null;try{let ge=this.componentDef,Vt,on=null;ge.findHostDirectiveDefs?(Vt=[],on=new Map,ge.findHostDirectiveDefs(ge,Vt,on),Vt.push(ge)):Vt=[ge];let vo=IM(k,p);pe=TM(vo,p,ge,Vt,k,d,h),V=Zv(M,zt),p&&NM(h,ge,p,i),n!==void 0&&RM(V,this.ngContentSelectors,n),E=AM(pe,ge,Vt,on,k,[OM]),qh(M,k,null)}catch(ge){throw pe!==null&&Ld(pe),Ld(k),ge}finally{Nh()}return new Qd(this.componentType,E,Ir(V,k),k,V)}finally{Y(o)}}},Qd=class extends Wd{constructor(t,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new vi(r,void 0,!1),this.componentType=t}setInput(t,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;Wh(o[H],o,r,t,n),this.previousInputValues.set(t,n);let s=Vn(this._tNode.index,o);Kh(s,1)}}get injector(){return new hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function IM(e,t){let n=e[H],i=zt;return e[i]=t,Ho(n,i,2,"#host",null)}function TM(e,t,n,i,r,o,s){let a=r[H];MM(i,e,t,s);let l=null;t!==null&&(l=Bh(t,r[mr]));let c=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ol(r,c0(n),null,u,r[e.index],e,o,c,null,null,l);return a.firstCreatePass&&Ud(a,e,i.length-1),xl(r,d),r[e.index]=d}function MM(e,t,n,i){for(let r of e)t.mergedAttrs=bh(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(Kd(t,t.mergedAttrs,!0),n!==null&&e0(i,n,t))}function AM(e,t,n,i,r,o){let s=vt(),a=r[H],l=_t(s,r);d0(a,r,s,n,null,i);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=vr(r,a,d,s);_i(h,r)}h0(a,r,s),l&&_i(l,r);let c=vr(r,a,s.directiveStart+s.componentOffset,s);if(e[Rt]=r[Rt]=c,o!==null)for(let u of o)u(c,t);return s0(a,s,r),c}function NM(e,t,n,i){if(i)wd(e,n,["ng-version","18.2.13"]);else{let{attrs:r,classes:o}=FS(t.selectors[0]);r&&wd(e,n,r),o&&o.length>0&&Xy(e,n,o.join(" "))}}function RM(e,t,n){let i=e.projection=[];for(let r=0;r<t.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function OM(){let e=vt();xh(ne()[H],e)}var jn=(()=>{class e{static{this.__NG_ELEMENT_ID__=xM}}return e})();function xM(){let e=vt();return A0(e,ne())}var kM=jn,M0=class extends kM{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return Ir(this._hostTNode,this._hostLView)}get injector(){return new hi(this._hostTNode,this._hostLView)}get parentInjector(){let t=kh(this._hostTNode,this._hostLView);if(vy(t)){let n=nl(t,this._hostLView),i=tl(t),r=n[H].data[i+8];return new hi(r,n)}else return new hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=av(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-tt}createEmbeddedView(t,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=zd(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,$d(this._hostTNode,s)),a}createComponent(t,n,i,r,o){let s=t&&!XS(t),a;if(s)a=n;else{let p=n||{};a=p.index,i=p.injector,r=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let l=s?t:new yi(cn(t)),c=i||this.parentInjector;if(!o&&l.ngModule==null){let _=(s?c:this.parentInjector).get(Pe,null);_&&(o=_)}let u=cn(l.componentType??{}),d=zd(this._lContainer,u?.id??null),h=d?.firstChild??null,f=l.create(c,r,h,o);return this.insertImpl(f.hostView,a,$d(this._hostTNode,d)),f}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let r=t._lView;if(sI(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[Fe],c=new M0(l,l[Ze],l[Fe]);c.detach(c.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return y0(s,r,o,i),t.attachToViewContainerRef(),Tv(pd(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=av(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=Bd(this._lContainer,n);i&&(Qa(pd(this._lContainer),n),Wy(i[H],i))}detach(t){let n=this._adjustIndex(t,-1),i=Bd(this._lContainer,n);return i&&Qa(pd(this._lContainer),n)!=null?new vi(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function av(e){return e[Ja]}function pd(e){return e[Ja]||(e[Ja]=[])}function A0(e,t){let n,i=t[e.index];return gn(i)?n=i:(n=f0(i,t,null,e),t[e.index]=n,xl(t,n)),FM(n,t,e,i),new M0(n,e,t)}function PM(e,t){let n=e[we],i=n.createComment(""),r=_t(t,e),o=Qy(n,r);return al(n,o,i,wT(n,r),!1),i}var FM=BM,LM=()=>!1;function VM(e,t,n){return LM(e,t,n)}function BM(e,t,n,i){if(e[pi])return;let r;n.type&8?r=Wt(i):r=PM(t,n),e[pi]=r}var Yd=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Zd=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let i=t.contentQueries!==null?t.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new e(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Zh(t,n).matches!==null&&this.queries[n].setDirty()}},Jd=class{constructor(t,n,i=null){this.flags=n,this.read=i,typeof t=="string"?this.predicate=qM(t):this.predicate=t}},Xd=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},eh=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,n,jM(n,o)),this.matchTNodeWithReadOption(t,n,za(n,t,o,!1,!1))}else i===Fn?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,za(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===yt||r===jn||r===Fn&&n.type&4)this.addMatch(n.index,-2);else{let o=za(n,t,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function jM(e,t){let n=e.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1]}return null}function UM(e,t){return e.type&11?Ir(e,t):e.type&4?Qh(e,t):null}function HM(e,t,n,i){return n===-1?UM(t,e):n===-2?$M(e,t,i):vr(e,e[H],n,t)}function $M(e,t,n){if(n===yt)return Ir(t,e);if(n===Fn)return Qh(t,e);if(n===jn)return A0(t,e)}function N0(e,t,n,i){let r=t[un].queries[i];if(r.matches===null){let o=e.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(HM(t,u,s[l+1],n.metadata.read))}}r.matches=a}return r.matches}function th(e,t,n,i){let r=e.queries.getByIndex(n),o=r.matches;if(o!==null){let s=N0(e,t,r,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],u=t[-l];for(let d=tt;d<u.length;d++){let h=u[d];h[fi]===h[Fe]&&th(h[H],h,c,i)}if(u[_r]!==null){let d=u[_r];for(let h=0;h<d.length;h++){let f=d[h];th(f[H],f,c,i)}}}}}return i}function GM(e,t){return e[un].queries[t].queryList}function zM(e,t,n){let i=new Fd((n&4)===4);return PT(e,t,i,i.destroy),(t[un]??=new Zd).queries.push(new Yd(i))-1}function WM(e,t,n){let i=nt();return i.firstCreatePass&&(KM(i,new Jd(e,t,n),-1),(t&2)===2&&(i.staticViewQueries=!0)),zM(i,ne(),t)}function qM(e){return e.split(",").map(t=>t.trim())}function KM(e,t,n){e.queries===null&&(e.queries=new Xd),e.queries.track(new eh(t,n))}function Zh(e,t){return e.queries.getByIndex(t)}function QM(e,t){let n=e[H],i=Zh(n,t);return i.crossesNgTemplate?th(n,e,t,[]):N0(n,e,i,t)}var lv=new Set;function Jh(e){lv.has(e)||(lv.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function YM(e){let t=[],n=new Map;function i(r){let o=n.get(r);if(!o){let s=e(r);n.set(r,o=s.then(eA))}return o}return dl.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(i(r.templateUrl).then(c=>{r.template=c}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let c=r.styles.length,u=r.styleUrls;r.styleUrls.forEach((d,h)=>{a.push(""),s.push(i(d).then(f=>{a[c+h]=f,u.splice(u.indexOf(d),1),u.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(i(r.styleUrl).then(c=>{a.push(c),r.styleUrl=void 0}));let l=Promise.all(s).then(()=>tA(o));t.push(l)}),JM(),Promise.all(t).then(()=>{})}var dl=new Map,ZM=new Set;function JM(){let e=dl;return dl=new Map,e}function XM(){return dl.size===0}function eA(e){return typeof e=="string"?e:e.text()}function tA(e){ZM.delete(e)}var Ln=class{},ko=class{};var hl=class extends Ln{constructor(t,n,i,r=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ul(this);let o=Fv(t);this._bootstrapComponents=Hy(o.bootstrap),this._r3Injector=My(t,n,[{provide:Ln,useValue:this},{provide:br,useValue:this.componentFactoryResolver},...i],Ye(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},fl=class extends ko{constructor(t){super(),this.moduleType=t}create(t){return new hl(this.moduleType,t,[])}};function nA(e,t,n){return new hl(e,t,n,!1)}var nh=class extends Ln{constructor(t){super(),this.componentFactoryResolver=new ul(this),this.instance=null;let n=new No([...t.providers,{provide:Ln,useValue:this},{provide:br,useValue:this.componentFactoryResolver}],t.parent||El(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function kl(e,t,n=null){return new nh({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function R0(e){return Xh(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function iA(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),i;for(;!(i=n.next()).done;)t(i.value)}}function Xh(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function rA(e,t,n){return e[t]=n}function Tr(e,t,n){let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}function oA(e){return(e.flags&32)===32}function sA(e,t,n,i,r,o,s,a,l){let c=t.consts,u=Ho(t,e,4,s||null,a||null);u0(t,n,u,el(c,l)),xh(t,u);let d=u.tView=zh(2,u,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function O0(e,t,n,i,r,o,s,a,l,c){let u=n+zt,d=t.firstCreatePass?sA(u,t,e,i,r,o,s,a,l):t.data[u];Bo(d,!1);let h=aA(t,e,d,n);Rh()&&$h(t,e,h,d),_i(h,e);let f=f0(h,e,h,d);return e[u]=f,xl(e,f),VM(f,d,e),Ch(d)&&a0(t,e,d),l!=null&&l0(e,d,c),d}function Pl(e,t,n,i,r,o,s,a){let l=ne(),c=nt(),u=el(c.consts,o);return O0(l,c,e,t,n,i,r,u,s,a),Pl}var aA=lA;function lA(e,t,n,i){return Oh(!0),t[we].createComment("")}var dr=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(dr||{}),x0=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=D({token:e,providedIn:"root",factory:()=>new e})}}return e})(),ih=class e{constructor(){this.ngZone=g(j),this.scheduler=g(yr),this.errorHandler=g(dn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[dr.EarlyRead,dr.Write,dr.MixedReadWrite,dr.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(i){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=D({token:e,providedIn:"root",factory:()=>new e})}},rh=class{constructor(t,n,i,r){this.impl=t,this.hooks=n,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function ef(e,t){!t?.injector&&ZS(ef);let n=t?.injector??g(Ne);return uT(n)?(Jh("NgAfterNextRender"),uA(e,n,t,!0)):dA}function cA(e,t){if(e instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[t]=e,n}else return[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function uA(e,t,n,i){let r=t.get(x0);r.impl??=t.get(ih);let o=n?.phase??dr.MixedReadWrite,s=n?.manualCleanup!==!0?t.get(Al):null,a=new rh(r.impl,cA(e,o),i,s);return r.impl.register(a),a}var dA={destroy(){}};function Ei(e,t,n,i){let r=ne(),o=Th();if(Tr(r,o,t)){let s=nt(),a=gy();ZT(a,r,e,t,n,i)}return Ei}function hA(e,t,n,i){return Tr(e,Th(),n)?t+bl(n)+i:mn}function Ba(e,t){return e<<17|t<<2}function bi(e){return e>>17&32767}function fA(e){return(e&2)==2}function pA(e,t){return e&131071|t<<17}function oh(e){return e|2}function Dr(e){return(e&131068)>>2}function gd(e,t){return e&-131069|t<<2}function gA(e){return(e&1)===1}function sh(e){return e|1}function mA(e,t,n,i,r,o){let s=o?t.classBindings:t.styleBindings,a=bi(s),l=Dr(s);e[i]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Lo(d,u)>0)&&(c=!0)}else u=n;if(r)if(l!==0){let h=bi(e[a+1]);e[i+1]=Ba(h,a),h!==0&&(e[h+1]=gd(e[h+1],i)),e[a+1]=pA(e[a+1],i)}else e[i+1]=Ba(a,0),a!==0&&(e[a+1]=gd(e[a+1],i)),a=i;else e[i+1]=Ba(l,0),a===0?a=i:e[l+1]=gd(e[l+1],i),l=i;c&&(e[i+1]=oh(e[i+1])),cv(e,u,i,!0),cv(e,u,i,!1),_A(t,u,e,i,o),s=Ba(a,l),o?t.classBindings=s:t.styleBindings=s}function _A(e,t,n,i,r){let o=r?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Lo(o,t)>=0&&(n[i+1]=sh(n[i+1]))}function cv(e,t,n,i){let r=e[n+1],o=t===null,s=i?bi(r):Dr(r),a=!1;for(;s!==0&&(a===!1||o);){let l=e[s],c=e[s+1];vA(l,t)&&(a=!0,e[s+1]=i?sh(c):oh(c)),s=i?bi(c):Dr(c)}a&&(e[n+1]=i?oh(r):sh(r))}function vA(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Lo(e,t)>=0:!1}var At={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yA(e){return e.substring(At.key,At.keyEnd)}function bA(e){return wA(e),k0(e,P0(e,0,At.textEnd))}function k0(e,t){let n=At.textEnd;return n===t?-1:(t=At.keyEnd=DA(e,At.key=t,n),P0(e,t,n))}function wA(e){At.key=0,At.keyEnd=0,At.value=0,At.valueEnd=0,At.textEnd=e.length}function P0(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function DA(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function Un(e,t,n){let i=ne(),r=Th();if(Tr(i,r,t)){let o=nt(),s=gy();BT(o,s,i,e,t,i[we],n,!1)}return Un}function ah(e,t,n,i,r){let o=t.inputs,s=r?"class":"style";Wh(e,n,o[s],s,i)}function Go(e,t){return EA(e,t,null,!0),Go}function Fl(e){SA(RA,CA,e,!0)}function CA(e,t){for(let n=bA(t);n>=0;n=k0(t,n))yh(e,yA(t),!0)}function EA(e,t,n,i){let r=ne(),o=nt(),s=ly(2);if(o.firstUpdatePass&&L0(o,e,s,i),t!==mn&&Tr(r,s,t)){let a=o.data[Ci()];V0(o,a,r,r[we],e,r[s+1]=xA(t,n),i,s)}}function SA(e,t,n,i){let r=nt(),o=ly(2);r.firstUpdatePass&&L0(r,null,o,i);let s=ne();if(n!==mn&&Tr(s,o,n)){let a=r.data[Ci()];if(B0(a,i)&&!F0(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=_d(l,n||"")),ah(r,a,s,n,i)}else OA(r,a,s,s[we],s[o+1],s[o+1]=NA(e,t,n),i,o)}}function F0(e,t){return t>=e.expandoStartIndex}function L0(e,t,n,i){let r=e.data;if(r[n+1]===null){let o=r[Ci()],s=F0(e,n);B0(o,i)&&t===null&&!s&&(t=!1),t=IA(r,o,t,i),mA(r,o,t,n,s,i)}}function IA(e,t,n,i){let r=bI(e),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(n=md(null,e,t,n,i),n=Po(n,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==r)if(n=md(r,e,t,n,i),o===null){let l=TA(e,t,i);l!==void 0&&Array.isArray(l)&&(l=md(null,e,t,l[1],i),l=Po(l,t.attrs,i),MA(e,t,i,l))}else o=AA(e,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),n}function TA(e,t,n){let i=n?t.classBindings:t.styleBindings;if(Dr(i)!==0)return e[bi(i)]}function MA(e,t,n,i){let r=n?t.classBindings:t.styleBindings;e[bi(r)]=i}function AA(e,t,n){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=e[o].hostAttrs;i=Po(i,s,n)}return Po(i,t.attrs,n)}function md(e,t,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],i=Po(i,o.hostAttrs,r),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),i}function Po(e,t,n){let i=n?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),yh(e,s,n?!0:t[++o]))}return e===void 0?null:e}function NA(e,t,n){if(n==null||n==="")return et;let i=[],r=Uo(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function RA(e,t,n){let i=String(t);i!==""&&!i.includes(" ")&&yh(e,i,n)}function OA(e,t,n,i,r,o,s,a){r===mn&&(r=et);let l=0,c=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=l<r.length?r[l+1]:void 0,f=c<o.length?o[c+1]:void 0,p=null,_;u===d?(l+=2,c+=2,h!==f&&(p=d,_=f)):d===null||u!==null&&u<d?(l+=2,p=u):(c+=2,p=d,_=f),p!==null&&V0(e,t,n,i,p,_,s,a),u=l<r.length?r[l]:null,d=c<o.length?o[c]:null}}function V0(e,t,n,i,r,o,s,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],u=gA(c)?uv(l,t,n,r,Dr(c),s):void 0;if(!pl(u)){pl(o)||fA(c)&&(o=uv(l,null,n,r,a,s));let d=Yv(Ci(),n);TT(i,s,d,r,o)}}function uv(e,t,n,i,r,o){let s=t===null,a;for(;r>0;){let l=e[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=n[r+1];h===mn&&(h=d?et:void 0);let f=d?sd(h,i):u===i?h:void 0;if(c&&!pl(f)&&(f=sd(l,i)),pl(f)&&(a=f,s))return a;let p=e[r+1];r=s?bi(p):Dr(p)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=sd(l,i))}return a}function pl(e){return e!==void 0}function xA(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Ye(Uo(e)))),e}function B0(e,t){return(e.flags&(t?8:16))!==0}function kA(e,t,n,i,r,o){let s=t.consts,a=el(s,r),l=Ho(t,e,2,i,a);return u0(t,n,l,el(s,o)),l.attrs!==null&&Kd(l,l.attrs,!1),l.mergedAttrs!==null&&Kd(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function Ue(e,t,n,i){let r=ne(),o=nt(),s=zt+e,a=r[we],l=o.firstCreatePass?kA(s,o,r,t,n,i):o.data[s],c=PA(o,r,l,a,t,e);r[s]=c;let u=Ch(l);return Bo(l,!0),e0(a,c,l),!oA(l)&&Rh()&&$h(o,r,c,l),cI()===0&&_i(c,r),uI(),u&&(a0(o,r,l),s0(o,l,r)),i!==null&&l0(r,l),Ue}function He(){let e=vt();oy()?sy():(e=e.parent,Bo(e,!1));let t=e;hI(t)&&fI(),dI();let n=nt();return n.firstCreatePass&&(xh(n,e),zv(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&TI(t)&&ah(n,t,ne(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&MI(t)&&ah(n,t,ne(),t.stylesWithoutHost,!1),He}function Si(e,t,n,i){return Ue(e,t,n,i),He(),Si}var PA=(e,t,n,i,r,o)=>(Oh(!0),$y(i,r,CI()));function tf(){return ne()}var gl="en-US";var FA=gl;function LA(e){typeof e=="string"&&(FA=e.toLowerCase().replace(/_/g,"-"))}var VA=(e,t,n)=>{};function _n(e,t,n,i){let r=ne(),o=nt(),s=vt();return jA(o,r,r[we],s,e,t,i),_n}function BA(e,t,n,i){let r=e.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=t[Za],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function jA(e,t,n,i,r,o,s){let a=Ch(i),c=e.firstCreatePass&&m0(e),u=t[Rt],d=g0(t),h=!0;if(i.type&3||s){let _=_t(i,t),y=s?s(_):_,M=d.length,k=s?V=>s(Wt(V[i.index])):i.index,E=null;if(!s&&a&&(E=BA(e,t,r,i.index)),E!==null){let V=E.__ngLastListenerFn__||E;V.__ngNextListenerFn__=o,E.__ngLastListenerFn__=o,h=!1}else{o=hv(i,t,u,o),VA(_,r,o);let V=n.listen(y,r,o);d.push(o,V),c&&c.push(r,k,M,M+1)}}else o=hv(i,t,u,o);let f=i.outputs,p;if(h&&f!==null&&(p=f[r])){let _=p.length;if(_)for(let y=0;y<_;y+=2){let M=p[y],k=p[y+1],pe=t[M][k].subscribe(o),ge=d.length;d.push(o,pe),c&&c.push(r,i.index,ge,-(ge+1))}}}function dv(e,t,n,i){let r=Y(null);try{return Ut(6,t,n),n(i)!==!1}catch(o){return _0(e,o),!1}finally{Ut(7,t,n),Y(r)}}function hv(e,t,n,i){return function r(o){if(o===Function)return i;let s=e.componentOffset>-1?Vn(e.index,t):t;Kh(s,5);let a=dv(t,n,i,o),l=r.__ngNextListenerFn__;for(;l;)a=dv(t,n,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function nf(e=1){return DI(e)}function UA(e,t){let n=null,i=NS(e);for(let r=0;r<t.length;r++){let o=t[r];if(o==="*"){n=r;continue}if(i===null?Ov(e,o,!0):xS(i,o))return r}return n}function j0(e){let t=ne()[mt][Ze];if(!t.projection){let n=e?e.length:1,i=t.projection=bS(n,null),r=i.slice(),o=t.child;for(;o!==null;){if(o.type!==128){let s=e?UA(o,e):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function U0(e,t=0,n,i,r,o){let s=ne(),a=nt(),l=i?e+1:null;l!==null&&O0(s,a,l,i,r,o,null,n);let c=Ho(a,zt+e,16,null,n||null);c.projection===null&&(c.projection=t),sy();let d=!s[Ro]||iy();s[mt][Ze].projection[c.projection]===null&&l!==null?HA(s,a,l):d&&(c.flags&32)!==32&&ST(a,s,c)}function HA(e,t,n){let i=zt+n,r=t.data[i],o=e[i],s=zd(o,r.tView.ssrId),a=v0(e,r,void 0,{dehydratedView:s});y0(o,a,0,$d(r,s))}function H0(e,t,n){WM(e,t,n)}function rf(e){let t=ne(),n=nt(),i=cy();Mh(i+1);let r=Zh(n,i);if(e.dirty&&oI(t)===((r.metadata.flags&2)===2)){if(r.matches===null)e.reset([]);else{let o=QM(t,i);e.reset(o,YI),e.notifyOnChanges()}return!0}return!1}function of(){return GM(ne(),cy())}function Hn(e,t=""){let n=ne(),i=nt(),r=e+zt,o=i.firstCreatePass?Ho(i,r,1,t,null):i.data[r],s=$A(i,n,o,t,e);n[r]=s,Rh()&&$h(i,n,s,o),Bo(o,!1)}var $A=(e,t,n,i,r)=>(Oh(!0),hT(t[we],i));function Ll(e){return zo("",e,""),Ll}function zo(e,t,n){let i=ne(),r=hA(i,e,t,n);return r!==mn&&tM(i,Ci(),r),zo}var GA=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=Bv(!1,n.type),r=i.length>0?kl([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=D({token:e,providedIn:"environment",factory:()=>new e(m(Pe))})}}return e})();function Wo(e){Jh("NgStandalone"),e.getStandaloneInjector=t=>t.get(GA).getOrCreateStandaloneInjector(e)}function sf(e,t,n,i){return WA(ne(),gI(),e,t,n,i)}function zA(e,t){let n=e[t];return n===mn?void 0:n}function WA(e,t,n,i,r,o){let s=t+n;return Tr(e,s,r)?rA(e,s+1,o?i.call(o,r):i(r)):zA(e,s+1)}var ja=null;function qA(e){ja!==null&&(e.defaultEncapsulation!==ja.defaultEncapsulation||e.preserveWhitespaces!==ja.preserveWhitespaces)||(ja=e)}var hn=class{constructor(t){this.full=t;let n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},$0=new hn("18.2.13");var Vl=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var af=new w(""),qo=new w(""),Bl=(()=>{class e{constructor(n,i,r){this._ngZone=n,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,lf||(KA(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{j.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(n)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n()},i)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}static{this.\u0275fac=function(i){return new(i||e)(m(j),m(jl),m(qo))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})(),jl=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return lf?.findTestabilityInTree(this,n,i)??null}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function KA(e){lf=e}var lf;function Mr(e){return!!e&&typeof e.then=="function"}function G0(e){return!!e&&typeof e.subscribe=="function"}var Ul=new w(""),z0=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i}),this.appInits=g(Ul,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let r of this.appInits){let o=r();if(Mr(o))n.push(o);else if(G0(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),n.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),cf=new w("");function QA(){d_(()=>{throw new S(600,!1)})}function YA(e){return e.isBoundToModule}var ZA=10;function JA(e,t,n){try{let i=n();return Mr(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}function W0(e,t){return Array.isArray(t)?t.reduce(W0,e):b(b({},e),t)}var Qt=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=g(KI),this.afterRenderManager=g(x0),this.zonelessEnabled=g(Yh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Z,this.afterTick=new Z,this.componentTypes=[],this.components=[],this.isStable=g(Sr).hasPendingTasks.pipe(I(n=>!n)),this._injector=g(Pe)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(i=>{n=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,i){let r=n instanceof cl;if(!this._injector.get(z0).done){let h=!r&&Pv(n),f=!1;throw new S(405,f)}let s;r?s=n:s=this._injector.get(br).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=YA(s)?void 0:this._injector.get(Ln),l=i||s.selector,c=s.create(Ne.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get(af,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Wa(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new S(101,!1);let n=Y(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Y(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(wr,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<ZA;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)XA(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Tl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;Wa(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let i=this._injector.get(cf,[]);[...this._bootstrapListeners,...i].forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Wa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new S(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Wa(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function XA(e,t,n,i){if(!n&&!Tl(e))return;D0(e,t,n&&!i?0:1)}var lh=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Hl=(()=>{class e{compileModuleSync(n){return new fl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let i=this.compileModuleSync(n),r=Fv(n),o=Hy(r.declarations).reduce((s,a)=>{let l=cn(a);return l&&s.push(new yi(l)),s},[]);return new lh(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),eN=new w("");function tN(e,t,n){let i=new fl(n);return Promise.resolve(i)}function fv(e){for(let t=e.length-1;t>=0;t--)if(e[t]!==void 0)return e[t]}var nN=(()=>{class e{constructor(){this.zone=g(j),this.changeDetectionScheduler=g(yr),this.applicationRef=g(Qt)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function iN({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new j(ee(b({},q0()),{scheduleInRootZone:n})),[{provide:j,useFactory:e},{provide:gr,multi:!0,useFactory:()=>{let i=g(nN,{optional:!0});return()=>i.initialize()}},{provide:gr,multi:!0,useFactory:()=>{let i=g(rN);return()=>{i.initialize()}}},t===!0?{provide:I0,useValue:!0}:[],{provide:T0,useValue:n??Ay}]}function q0(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var rN=(()=>{class e{constructor(){this.subscription=new he,this.initialized=!1,this.zone=g(j),this.pendingTasks=g(Sr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{j.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{j.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var oN=(()=>{class e{constructor(){this.appRef=g(Qt),this.taskService=g(Sr),this.ngZone=g(j),this.zonelessEnabled=g(Yh),this.disableScheduling=g(I0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new he,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(rl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(g(T0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ol||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?J_:Ny;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(rl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(n),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,J_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function sN(){return typeof $localize<"u"&&$localize.locale||gl}var $l=new w("",{providedIn:"root",factory:()=>g($l,U.Optional|U.SkipSelf)||sN()});var ml=new w("");function Ua(e){return!e.moduleRef}function aN(e){let t=Ua(e)?e.r3Injector:e.moduleRef.injector,n=t.get(j);return n.run(()=>{Ua(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let i=t.get(dn,null),r;if(n.runOutsideAngular(()=>{r=n.onError.subscribe({next:o=>{i.handleError(o)}})}),Ua(e)){let o=()=>t.destroy(),s=e.platformInjector.get(ml);s.add(o),t.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(ml);s.add(o),e.moduleRef.onDestroy(()=>{Wa(e.allPlatformModules,e.moduleRef),r.unsubscribe(),s.delete(o)})}return JA(i,n,()=>{let o=t.get(z0);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get($l,gl);if(LA(s||gl),Ua(e)){let a=t.get(Qt);return e.rootComponent!==void 0&&a.bootstrap(e.rootComponent),a}else return lN(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function lN(e,t){let n=e.injector.get(Qt);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>n.bootstrap(i));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new S(-403,!1);t.push(e)}var K0=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){let r=i?.scheduleInRootZone,o=()=>qI(i?.ngZone,ee(b({},q0({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:r})),s=i?.ignoreChangesOutsideZone,a=[iN({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:yr,useExisting:oN}],l=nA(n.moduleType,this.injector,a);return aN({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(n,i=[]){let r=W0({},i);return tN(this.injector,r,n).then(o=>this.bootstrapModuleFactory(o,r))}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let n=this._injector.get(ml,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||e)(m(Ne))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),To=null,Q0=new w("");function cN(e){if(To&&!To.get(Q0,!1))throw new S(400,!1);QA(),To=e;let t=e.get(K0);return hN(e),t}function uf(e,t,n=[]){let i=`Platform: ${t}`,r=new w(i);return(o=[])=>{let s=Y0();if(!s||s.injector.get(Q0,!1)){let a=[...n,...o,{provide:r,useValue:!0}];e?e(a):cN(uN(a,i))}return dN(r)}}function uN(e=[],t){return Ne.create({name:t,providers:[{provide:Cl,useValue:"platform"},{provide:ml,useValue:new Set([()=>To=null])},...e]})}function dN(e){let t=Y0();if(!t)throw new S(401,!1);return t}function Y0(){return To?.get(K0)??null}function hN(e){e.get(Lh,null)?.forEach(n=>n())}function df(){return!1}var vn=(()=>{class e{static{this.__NG_ELEMENT_ID__=fN}}return e})();function fN(e){return pN(vt(),ne(),(e&16)===16)}function pN(e,t,n){if(Il(e)&&!n){let i=Vn(e.index,t);return new vi(i,i)}else if(e.type&175){let i=t[mt];return new vi(i,t)}return null}var ch=class{constructor(){}supports(t){return R0(t)}create(t){return new uh(t)}},gN=(e,t)=>t,uh=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||gN}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<pv(i,r,o)?n:i,a=pv(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let f=h<o.length?o[h]:o[h]=0,p=f+h;u<=p&&p<c&&(o[h]=f+1)}let d=s.previousIndex;o[d]=u-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!R0(t))throw new S(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,iA(t,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,r)):t=this._addAfter(new dh(n,i),o,r)),t}_verifyReinsertion(t,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){let r=n===null?this._itHead:n._next;return t._next=r,t._prev=n,r===null?this._itTail=t:r._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new _l),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,i=t._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _l),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},dh=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},hh=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let n=t._prevDup,i=t._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},_l=class{constructor(){this.map=new Map}put(t){let n=t.trackById,i=this.map.get(n);i||(i=new hh,this.map.set(n,i)),i.add(t)}get(t,n){let i=t,r=this.map.get(i);return r?r.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function pv(e,t,n){let i=e.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}var fh=class{constructor(){}supports(t){return t instanceof Map||Xh(t)}create(){return new ph}},ph=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let n;for(n=this._mapHead;n!==null;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||Xh(t)))throw new S(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){let i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){let r=this._records.get(t);this._maybeAddToChanges(r,n);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new gh(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}},gh=class{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function gv(){return new hf([new ch])}var hf=(()=>{class e{static{this.\u0275prov=D({token:e,providedIn:"root",factory:gv})}constructor(n){this.factories=n}static create(n,i){if(i!=null){let r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||gv()),deps:[[e,new Dl,new wi]]}}find(n){let i=this.factories.find(r=>r.supports(n));if(i!=null)return i;throw new S(901,!1)}}return e})();function mv(){return new ff([new fh])}var ff=(()=>{class e{static{this.\u0275prov=D({token:e,providedIn:"root",factory:mv})}constructor(n){this.factories=n}static create(n,i){if(i){let r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||mv()),deps:[[e,new Dl,new wi]]}}find(n){let i=this.factories.find(r=>r.supports(n));if(i)return i;throw new S(901,!1)}}return e})();var Z0=uf(null,"core",[]),J0=(()=>{class e{constructor(n){}static{this.\u0275fac=function(i){return new(i||e)(m(Qt))}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();function Gl(e,t){let n=cn(e),i=t.elementInjector||El();return new yi(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}function X0(e){let t=cn(e);if(!t)return null;let n=new yi(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var ob=null;function Ii(){return ob}function sb(e){ob??=e}var zl=class{};var Se=new w(""),_f=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:()=>g(bN),providedIn:"platform"})}}return e})(),ab=new w(""),bN=(()=>{class e extends _f{constructor(){super(),this._doc=g(Se),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ii().getBaseHref(this._doc)}onPopState(n){let i=Ii().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){let i=Ii().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){this._history.pushState(n,i,r)}replaceState(n,i,r){this._history.replaceState(n,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function vf(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function eb(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,i=n-(e[n-1]==="/"?1:0);return e.slice(0,i)+e.slice(n)}function yn(e){return e&&e[0]!=="?"?"?"+e:e}var Ti=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:()=>g(yf),providedIn:"root"})}}return e})(),lb=new w(""),yf=(()=>{class e extends Ti{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??g(Se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return vf(this._baseHref,n)}path(n=!1){let i=this._platformLocation.pathname+yn(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+yn(o));this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+yn(o));this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(i){return new(i||e)(m(_f),m(lb,8))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),cb=(()=>{class e extends Ti{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(n){let i=vf(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+yn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+yn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(i){return new(i||e)(m(_f),m(lb,8))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})(),Ar=(()=>{class e{constructor(n){this._subject=new _e,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let i=this._locationStrategy.getBaseHref();this._basePath=CN(eb(tb(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+yn(i))}normalize(n){return e.stripTrailingSlash(DN(this._basePath,tb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+yn(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+yn(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}static{this.normalizeQueryParams=yn}static{this.joinWithSlash=vf}static{this.stripTrailingSlash=eb}static{this.\u0275fac=function(i){return new(i||e)(m(Ti))}}static{this.\u0275prov=D({token:e,factory:()=>wN(),providedIn:"root"})}}return e})();function wN(){return new Ar(m(Ti))}function DN(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function tb(e){return e.replace(/\/index.html$/,"")}function CN(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function ub(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var pf=class{constructor(t,n,i,r){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},db=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let i=this._viewContainer;n.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new pf(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),nb(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);nb(o,r)})}static ngTemplateContextGuard(n,i){return!0}static{this.\u0275fac=function(i){return new(i||e)(Le(jn),Le(Fn),Le(hf))}}static{this.\u0275dir=Di({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function nb(e,t){e.context.$implicit=t.item}var hb=(()=>{class e{constructor(n,i,r){this._ngEl=n,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){let n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,i){let[r,o]=n.split("."),s=r.indexOf("-")===-1?void 0:qt.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(n){n.forEachRemovedItem(i=>this._setStyle(i.key,null)),n.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),n.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static{this.\u0275fac=function(i){return new(i||e)(Le(yt),Le(ff),Le($o))}}static{this.\u0275dir=Di({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return e})();var fb=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})(),bf="browser",EN="server";function pb(e){return e===bf}function Ko(e){return e===EN}var gb=(()=>{class e{static{this.\u0275prov=D({token:e,providedIn:"root",factory:()=>pb(g(Re))?new gf(g(Se),window):new mf})}}return e})(),gf=class{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=SN(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function SN(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}var mf=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},Wl=class{};var Cf=class extends zl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ef=class e extends Cf{static makeCurrent(){sb(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=TN();return n==null?null:MN(n)}resetBaseElement(){Qo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ub(document.cookie,t)}},Qo=null;function TN(){return Qo=Qo||document.querySelector("base"),Qo?Qo.getAttribute("href"):null}function MN(e){return new URL(e,document.baseURI).pathname}var Sf=class{addToWindow(t){fn.getAngularTestability=(i,r=!0)=>{let o=t.findTestabilityInTree(i,r);if(o==null)throw new S(5103,!1);return o},fn.getAllAngularTestabilities=()=>t.getAllTestabilities(),fn.getAllAngularRootElements=()=>t.getAllRootElements();let n=i=>{let r=fn.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(a=>{a.whenStable(s)})};fn.frameworkStabilizers||(fn.frameworkStabilizers=[]),fn.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,i){if(n==null)return null;let r=t.getTestability(n);return r??(i?Ii().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},AN=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})(),If=new w(""),bb=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>{r.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(o=>o.supports(n)),!i)throw new S(5101,!1);return this._eventNameToPlugin.set(n,i),i}static{this.\u0275fac=function(i){return new(i||e)(m(If),m(j))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})(),ql=class{constructor(t){this._doc=t}},wf="ng-app-id",wb=(()=>{class e{constructor(n,i,r,o={}){this.doc=n,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ko(o),this.resetHostNodes()}addStyles(n){for(let i of n)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(n){for(let i of n)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(i=>i.remove()),n.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){let i=this.styleRef;i.get(n)?.elements?.forEach(r=>r.remove()),i.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${wf}="${this.appId}"]`);if(n?.length){let i=new Map;return n.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(n,i){let r=this.styleRef;if(r.has(n)){let o=r.get(n);return o.usage+=i,o.usage}return r.set(n,{usage:i,elements:[]}),i}getStyleElement(n,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===n)return r.delete(i),o.removeAttribute(wf),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(wf,this.appId),n.appendChild(s),s}}addStyleToHost(n,i){let r=this.getStyleElement(n,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||e)(m(Se),m(Nl),m(Vh,8),m(Re))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})(),Df={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Mf=/%COMP%/g,Db="%COMP%",NN=`_nghost-${Db}`,RN=`_ngcontent-${Db}`,ON=!0,xN=new w("",{providedIn:"root",factory:()=>ON});function kN(e){return RN.replace(Mf,e)}function PN(e){return NN.replace(Mf,e)}function Cb(e,t){return t.map(n=>n.replace(Mf,e))}var _b=(()=>{class e{constructor(n,i,r,o,s,a,l,c=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Ko(a),this.defaultRenderer=new Yo(n,s,l,this.platformIsServer)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===$t.ShadowDom&&(i=ee(b({},i),{encapsulation:$t.Emulated}));let r=this.getOrCreateRenderer(n,i);return r instanceof Kl?r.applyToHost(n):r instanceof Zo&&r.applyStyles(),r}getOrCreateRenderer(n,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case $t.Emulated:o=new Kl(l,c,i,this.appId,u,s,a,d);break;case $t.ShadowDom:return new Tf(l,c,n,i,s,a,this.nonce,d);default:o=new Zo(l,c,i,u,s,a,d);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||e)(m(bb),m(wb),m(Nl),m(xN),m(Se),m(Re),m(j),m(Vh))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})(),Yo=class{constructor(t,n,i,r){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Df[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(vb(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(vb(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){n.remove()}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new S(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;let o=Df[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let r=Df[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(qt.DashCase|qt.Important)?t.style.setProperty(n,i,r&qt.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&qt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=Ii().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function vb(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Tf=class extends Yo{constructor(t,n,i,r,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Cb(r.id,r.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Zo=class extends Yo{constructor(t,n,i,r,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?Cb(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Kl=class extends Zo{constructor(t,n,i,r,o,s,a,l){let c=r+"-"+i.id;super(t,n,i,o,s,a,l,c),this.contentAttr=kN(c),this.hostAttr=PN(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},FN=(()=>{class e extends ql{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||e)(m(Se))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})(),yb=["alt","control","meta","shift"],LN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},VN={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},BN=(()=>{class e extends ql{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,i,r){let o=e.parseEventName(i),s=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ii().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let i=n.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=e._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),yb.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let r=LN[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),yb.forEach(s=>{if(s!==r){let a=VN[s];a(n)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{e.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(i){return new(i||e)(m(Se))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})();function jN(){Ef.makeCurrent()}function UN(){return new dn}function HN(){return Ly(document),document}var $N=[{provide:Re,useValue:bf},{provide:Lh,useValue:jN,multi:!0},{provide:Se,useFactory:HN,deps:[]}],Eb=uf(Z0,"browser",$N),GN=new w(""),zN=[{provide:qo,useClass:Sf,deps:[]},{provide:af,useClass:Bl,deps:[j,jl,qo]},{provide:Bl,useClass:Bl,deps:[j,jl,qo]}],WN=[{provide:Cl,useValue:"root"},{provide:dn,useFactory:UN,deps:[]},{provide:If,useClass:FN,multi:!0,deps:[Se,j,Re]},{provide:If,useClass:BN,multi:!0,deps:[Se]},_b,wb,bb,{provide:wr,useExisting:_b},{provide:Wl,useClass:AN,deps:[]},[]],Sb=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Nl,useValue:n.appId}]}}static{this.\u0275fac=function(i){return new(i||e)(m(GN,12))}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({providers:[...WN,...zN],imports:[fb,J0]})}}return e})();var Ib=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(i){return new(i||e)(m(Se))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var B="primary",hs=Symbol("RouteTitle"),xf=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Pr(e){return new xf(e)}function KN(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=e[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function QN(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Yt(e[n],t[n]))return!1;return!0}function Yt(e,t){let n=e?kf(e):void 0,i=t?kf(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!Vb(e[r],t[r]))return!1;return!0}function kf(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Vb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}else return e===t}function Bb(e){return e.length>0?e[e.length-1]:null}function Gn(e){return Zu(e)?e:Mr(e)?J(Promise.resolve(e)):C(e)}var YN={exact:Ub,subset:Hb},jb={exact:ZN,subset:JN,ignored:()=>!0};function Mb(e,t,n){return YN[n.paths](e.root,t.root,n.matrixParams)&&jb[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function ZN(e,t){return Yt(e,t)}function Ub(e,t,n){if(!Ai(e.segments,t.segments)||!Zl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!Ub(e.children[i],t.children[i],n))return!1;return!0}function JN(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Vb(e[n],t[n]))}function Hb(e,t,n){return $b(e,t,t.segments,n)}function $b(e,t,n,i){if(e.segments.length>n.length){let r=e.segments.slice(0,n.length);return!(!Ai(r,n)||t.hasChildren()||!Zl(r,n,i))}else if(e.segments.length===n.length){if(!Ai(e.segments,n)||!Zl(e.segments,n,i))return!1;for(let r in t.children)if(!e.children[r]||!Hb(e.children[r],t.children[r],i))return!1;return!0}else{let r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Ai(e.segments,r)||!Zl(e.segments,r,i)||!e.children[B]?!1:$b(e.children[B],t,o,i)}}function Zl(e,t,n){return t.every((i,r)=>jb[n](e[r].parameters,i.parameters))}var wn=class{constructor(t=new X([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Pr(this.queryParams),this._queryParamMap}toString(){return tR.serialize(this)}},X=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jl(this)}},Mi=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Pr(this.parameters),this._parameterMap}toString(){return zb(this)}};function XN(e,t){return Ai(e,t)&&e.every((n,i)=>Yt(n.parameters,t[i].parameters))}function Ai(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function eR(e,t){let n=[];return Object.entries(e.children).forEach(([i,r])=>{i===B&&(n=n.concat(t(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==B&&(n=n.concat(t(r,i)))}),n}var fs=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:()=>new Fr,providedIn:"root"})}}return e})(),Fr=class{parse(t){let n=new Ff(t);return new wn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Jo(t.root,!0)}`,i=rR(t.queryParams),r=typeof t.fragment=="string"?`#${nR(t.fragment)}`:"";return`${n}${i}${r}`}},tR=new Fr;function Jl(e){return e.segments.map(t=>zb(t)).join("/")}function Jo(e,t){if(!e.hasChildren())return Jl(e);if(t){let n=e.children[B]?Jo(e.children[B],!1):"",i=[];return Object.entries(e.children).forEach(([r,o])=>{r!==B&&i.push(`${r}:${Jo(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=eR(e,(i,r)=>r===B?[Jo(e.children[B],!1)]:[`${r}:${Jo(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[B]!=null?`${Jl(e)}/${n[0]}`:`${Jl(e)}/(${n.join("//")})`}}function Gb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ql(e){return Gb(e).replace(/%3B/gi,";")}function nR(e){return encodeURI(e)}function Pf(e){return Gb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xl(e){return decodeURIComponent(e)}function Ab(e){return Xl(e.replace(/\+/g,"%20"))}function zb(e){return`${Pf(e.path)}${iR(e.parameters)}`}function iR(e){return Object.entries(e).map(([t,n])=>`;${Pf(t)}=${Pf(n)}`).join("")}function rR(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Ql(n)}=${Ql(r)}`).join("&"):`${Ql(n)}=${Ql(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var oR=/^[^\/()?;#]+/;function Af(e){let t=e.match(oR);return t?t[0]:""}var sR=/^[^\/()?;=#]+/;function aR(e){let t=e.match(sR);return t?t[0]:""}var lR=/^[^=?&#]+/;function cR(e){let t=e.match(lR);return t?t[0]:""}var uR=/^[^&#]+/;function dR(e){let t=e.match(uR);return t?t[0]:""}var Ff=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new X([],{}):new X([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[B]=new X(t,n)),i}parseSegment(){let t=Af(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(t),new Mi(Xl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=aR(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=Af(this.remaining);r&&(i=r,this.capture(i))}t[Xl(n)]=Xl(i)}parseQueryParam(t){let n=cR(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=dR(this.remaining);s&&(i=s,this.capture(i))}let r=Ab(n),o=Ab(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Af(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new S(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=B);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[B]:new X([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new S(4011,!1)}};function Wb(e){return e.segments.length>0?new X([],{[B]:e}):e}function qb(e){let t={};for(let[i,r]of Object.entries(e.children)){let o=qb(r);if(i===B&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let n=new X(e.segments,t);return hR(n)}function hR(e){if(e.numberOfChildren===1&&e.children[B]){let t=e.children[B];return new X(e.segments.concat(t.segments),t.children)}return e}function rs(e){return e instanceof wn}function fR(e,t,n=null,i=null){let r=Kb(e);return Qb(r,t,n,i)}function Kb(e){let t;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new X(o.url,s);return o===e&&(t=a),a}let i=n(e.root),r=Wb(i);return t??r}function Qb(e,t,n,i){let r=e;for(;r.parent;)r=r.parent;if(t.length===0)return Nf(r,r,r,n,i);let o=pR(t);if(o.toRoot())return Nf(r,r,new X([],{}),n,i);let s=gR(o,r,e),a=s.processChildren?ts(s.segmentGroup,s.index,o.commands):Zb(s.segmentGroup,s.index,o.commands);return Nf(r,s.segmentGroup,a,n,i)}function ec(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function os(e){return typeof e=="object"&&e!=null&&e.outlets}function Nf(e,t,n,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;e===t?s=n:s=Yb(e,t,n);let a=Wb(qb(s));return new wn(a,o,r)}function Yb(e,t,n){let i={};return Object.entries(e.children).forEach(([r,o])=>{o===t?i[r]=n:i[r]=Yb(o,t,n)}),new X(e.segments,i)}var tc=class{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&ec(i[0]))throw new S(4003,!1);let r=i.find(os);if(r&&r!==Bb(i))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function pR(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new tc(!0,0,e);let t=0,n=!1,i=e.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new tc(n,t,i)}var Or=class{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function gR(e,t,n){if(e.isAbsolute)return new Or(t,!0,0);if(!n)return new Or(t,!1,NaN);if(n.parent===null)return new Or(n,!0,0);let i=ec(e.commands[0])?0:1,r=n.segments.length-1+i;return mR(n,r,e.numberOfDoubleDots)}function mR(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new S(4005,!1);r=i.segments.length}return new Or(i,!1,r-o)}function _R(e){return os(e[0])?e[0].outlets:{[B]:e}}function Zb(e,t,n){if(e??=new X([],{}),e.segments.length===0&&e.hasChildren())return ts(e,t,n);let i=vR(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let o=new X(e.segments.slice(0,i.pathIndex),{});return o.children[B]=new X(e.segments.slice(i.pathIndex),e.children),ts(o,0,r)}else return i.match&&r.length===0?new X(e.segments,{}):i.match&&!e.hasChildren()?Lf(e,t,n):i.match?ts(e,0,r):Lf(e,t,n)}function ts(e,t,n){if(n.length===0)return new X(e.segments,{});{let i=_R(n),r={};if(Object.keys(i).some(o=>o!==B)&&e.children[B]&&e.numberOfChildren===1&&e.children[B].segments.length===0){let o=ts(e.children[B],t,n);return new X(e.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Zb(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new X(e.segments,r)}}function vR(e,t,n){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;let s=e.segments[r],a=n[i];if(os(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Rb(l,c,s))return o;i+=2}else{if(!Rb(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Lf(e,t,n){let i=e.segments.slice(0,t),r=0;for(;r<n.length;){let o=n[r];if(os(o)){let l=yR(o.outlets);return new X(i,l)}if(r===0&&ec(n[0])){let l=e.segments[t];i.push(new Mi(l.path,Nb(n[0]))),r++;continue}let s=os(o)?o.outlets[B]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&ec(a)?(i.push(new Mi(s,Nb(a))),r+=2):(i.push(new Mi(s,{})),r++)}return new X(i,{})}function yR(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=Lf(new X([],{}),0,i))}),t}function Nb(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function Rb(e,t,n){return e==n.path&&Yt(t,n.parameters)}var ns="imperative",Ie=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Ie||{}),bt=class{constructor(t,n){this.id=t,this.url=n}},Lr=class extends bt{constructor(t,n,i="imperative",r=null){super(t,n),this.type=Ie.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Dn=class extends bt{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=Ie.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},rt=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(rt||{}),nc=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(nc||{}),bn=class extends bt{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=Ie.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$n=class extends bt{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=Ie.NavigationSkipped}},ss=class extends bt{constructor(t,n,i,r){super(t,n),this.error=i,this.target=r,this.type=Ie.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ic=class extends bt{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=Ie.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vf=class extends bt{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=Ie.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bf=class extends bt{constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=Ie.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jf=class extends bt{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=Ie.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uf=class extends bt{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=Ie.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hf=class{constructor(t){this.route=t,this.type=Ie.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$f=class{constructor(t){this.route=t,this.type=Ie.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gf=class{constructor(t){this.snapshot=t,this.type=Ie.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zf=class{constructor(t){this.snapshot=t,this.type=Ie.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wf=class{constructor(t){this.snapshot=t,this.type=Ie.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qf=class{constructor(t){this.snapshot=t,this.type=Ie.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rc=class{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i,this.type=Ie.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},as=class{},Vr=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function bR(e,t){return e.providers&&!e._injector&&(e._injector=kl(e.providers,t,`Route: ${e.path}`)),e._injector??t}function xt(e){return e.outlet||B}function wR(e,t){let n=e.filter(i=>xt(i)===t);return n.push(...e.filter(i=>xt(i)!==t)),n}function ps(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Kf=class{get injector(){return ps(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new gs(this.rootInjector),this.attachRef=null}},gs=(()=>{class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,i){let r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){let i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new Kf(this.rootInjector),this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(i){return new(i||e)(m(Pe))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),oc=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Qf(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=Qf(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Yf(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Yf(t,this._root).map(n=>n.value)}};function Qf(e,t){if(e===t.value)return t;for(let n of t.children){let i=Qf(e,n);if(i)return i}return null}function Yf(e,t){if(e===t.value)return[t];for(let n of t.children){let i=Yf(e,n);if(i.length)return i.unshift(t),i}return[]}var it=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Rr(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var sc=class extends oc{constructor(t,n){super(t),this.snapshot=n,op(this,t)}toString(){return this.snapshot.toString()}};function Jb(e){let t=DR(e),n=new Ee([new Mi("",{})]),i=new Ee({}),r=new Ee({}),o=new Ee({}),s=new Ee(""),a=new Br(n,i,o,s,r,B,e,t.root);return a.snapshot=t.root,new sc(new it(a,[]),t)}function DR(e){let t={},n={},i={},r="",o=new xr([],t,i,r,n,B,e,null,{});return new lc("",new it(o,[]))}var Br=class{constructor(t,n,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(I(c=>c[hs]))??C(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(I(t=>Pr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(I(t=>Pr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ac(e,t,n="emptyOnly"){let i,{routeConfig:r}=e;return t!==null&&(n==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:b(b({},t.params),e.params),data:b(b({},t.data),e.data),resolve:b(b(b(b({},e.data),t.data),r?.data),e._resolvedData)}:i={params:b({},e.params),data:b({},e.data),resolve:b(b({},e.data),e._resolvedData??{})},r&&ew(r)&&(i.resolve[hs]=r.title),i}var xr=class{get title(){return this.data?.[hs]}constructor(t,n,i,r,o,s,a,l,c){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},lc=class extends oc{constructor(t,n){super(n),this.url=t,op(this,n)}toString(){return Xb(this._root)}};function op(e,t){t.value._routerState=e,t.children.forEach(n=>op(e,n))}function Xb(e){let t=e.children.length>0?` { ${e.children.map(Xb).join(", ")} } `:"";return`${e.value}${t}`}function Rf(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Yt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Yt(t.params,n.params)||e.paramsSubject.next(n.params),QN(t.url,n.url)||e.urlSubject.next(n.url),Yt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Zf(e,t){let n=Yt(e.params,t.params)&&XN(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||Zf(e.parent,t.parent))}function ew(e){return typeof e.title=="string"||e.title===null}var CR=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=B,this.activateEvents=new _e,this.deactivateEvents=new _e,this.attachEvents=new _e,this.detachEvents=new _e,this.parentContexts=g(gs),this.location=g(jn),this.changeDetector=g(vn),this.inputBinder=g(fc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:i,previousValue:r}=n.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=n;let r=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Jf(n,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=Di({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Er]})}}return e})(),Jf=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===Br?this.route:t===gs?this.childContexts:this.parent.get(t,n)}},fc=new w(""),Ob=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:i}=n,r=rr([i.queryParams,i.params,i.data]).pipe(te(([o,s,a],l)=>(a=b(b(b({},o),s),a),l===0?C(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(n);return}let s=X0(i.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,r)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})();function ER(e,t,n){let i=ls(e,t._root,n?n._root:void 0);return new sc(i,t)}function ls(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let r=SR(e,t,n);return new it(i,r)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>ls(e,a)),s}}let i=IR(t.value),r=t.children.map(o=>ls(e,o));return new it(i,r)}}function SR(e,t,n){return t.children.map(i=>{for(let r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return ls(e,i,r);return ls(e,i)})}function IR(e){return new Br(new Ee(e.url),new Ee(e.params),new Ee(e.queryParams),new Ee(e.fragment),new Ee(e.data),e.outlet,e.component,e)}var cs=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},tw="ngNavigationCancelingError";function cc(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=rs(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=nw(!1,rt.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function nw(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[tw]=!0,n.cancellationCode=t,n}function TR(e){return iw(e)&&rs(e.url)}function iw(e){return!!e&&e[tw]}var MR=(e,t,n,i)=>I(r=>(new Xf(t,r.targetRouterState,r.currentRouterState,n,i).activate(e),r)),Xf=class{constructor(t,n,i,r,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),Rf(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let r=Rr(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=Rr(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=Rr(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let r=Rr(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new qf(o.value.snapshot))}),t.children.length&&this.forwardEvent(new zf(t.value.snapshot))}activateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(Rf(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Rf(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},uc=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},kr=class{constructor(t,n){this.component=t,this.route=n}};function AR(e,t,n){let i=e._root,r=t?t._root:null;return Xo(i,r,n,[i.value])}function NR(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Ur(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!bv(e)?e:t.get(e):i}function Xo(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Rr(t);return e.children.forEach(s=>{RR(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>is(a,n.getContext(s),r)),r}function RR(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=OR(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new uc(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Xo(e,t,a?a.children:null,i,r):Xo(e,t,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new kr(a.outlet.component,s))}else s&&is(t,a,r),r.canActivateChecks.push(new uc(i)),o.component?Xo(e,null,a?a.children:null,i,r):Xo(e,null,n,i,r);return r}function OR(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Ai(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ai(e.url,t.url)||!Yt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zf(e,t)||!Yt(e.queryParams,t.queryParams);case"paramsChange":default:return!Zf(e,t)}}function is(e,t,n){let i=Rr(e),r=e.value;Object.entries(i).forEach(([o,s])=>{r.component?t?is(s,t.children.getContext(o),n):is(s,null,n):is(s,t,n)}),r.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new kr(t.outlet.component,r)):n.canDeactivateChecks.push(new kr(null,r)):n.canDeactivateChecks.push(new kr(null,r))}function ms(e){return typeof e=="function"}function xR(e){return typeof e=="boolean"}function kR(e){return e&&ms(e.canLoad)}function PR(e){return e&&ms(e.canActivate)}function FR(e){return e&&ms(e.canActivateChild)}function LR(e){return e&&ms(e.canDeactivate)}function VR(e){return e&&ms(e.canMatch)}function rw(e){return e instanceof an||e?.name==="EmptyError"}var Yl=Symbol("INITIAL_VALUE");function jr(){return te(e=>rr(e.map(t=>t.pipe(Qe(1),Fa(Yl)))).pipe(I(t=>{for(let n of t)if(n!==!0){if(n===Yl)return Yl;if(n===!1||BR(n))return n}return!0}),be(t=>t!==Yl),Qe(1)))}function BR(e){return rs(e)||e instanceof cs}function jR(e,t){return ce(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?C(ee(b({},n),{guardsResult:!0})):UR(s,i,r,e).pipe(ce(a=>a&&xR(a)?HR(i,o,e,t):C(a)),I(a=>ee(b({},n),{guardsResult:a})))})}function UR(e,t,n,i){return J(e).pipe(ce(r=>qR(r.component,r.route,n,t,i)),ht(r=>r!==!0,!0))}function HR(e,t,n,i){return J(t).pipe(di(r=>An(GR(r.route.parent,i),$R(r.route,i),WR(e,r.path,n),zR(e,r.route,n))),ht(r=>r!==!0,!0))}function $R(e,t){return e!==null&&t&&t(new Wf(e)),C(!0)}function GR(e,t){return e!==null&&t&&t(new Gf(e)),C(!0)}function zR(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return C(!0);let r=i.map(o=>Ra(()=>{let s=ps(t)??n,a=Ur(o,s),l=PR(a)?a.canActivate(t,e):Kt(s,()=>a(t,e));return Gn(l).pipe(ht())}));return C(r).pipe(jr())}function WR(e,t,n){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>NR(s)).filter(s=>s!==null).map(s=>Ra(()=>{let a=s.guards.map(l=>{let c=ps(s.node)??n,u=Ur(l,c),d=FR(u)?u.canActivateChild(i,e):Kt(c,()=>u(i,e));return Gn(d).pipe(ht())});return C(a).pipe(jr())}));return C(o).pipe(jr())}function qR(e,t,n,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return C(!0);let s=o.map(a=>{let l=ps(t)??r,c=Ur(a,l),u=LR(c)?c.canDeactivate(e,t,n,i):Kt(l,()=>c(e,t,n,i));return Gn(u).pipe(ht())});return C(s).pipe(jr())}function KR(e,t,n,i){let r=t.canLoad;if(r===void 0||r.length===0)return C(!0);let o=r.map(s=>{let a=Ur(s,e),l=kR(a)?a.canLoad(t,n):Kt(e,()=>a(t,n));return Gn(l)});return C(o).pipe(jr(),ow(i))}function ow(e){return Gu(fe(t=>{if(typeof t!="boolean")throw cc(e,t)}),I(t=>t===!0))}function QR(e,t,n,i){let r=t.canMatch;if(!r||r.length===0)return C(!0);let o=r.map(s=>{let a=Ur(s,e),l=VR(a)?a.canMatch(t,n):Kt(e,()=>a(t,n));return Gn(l)});return C(o).pipe(jr(),ow(i))}var us=class{constructor(t){this.segmentGroup=t||null}},ds=class extends Error{constructor(t){super(),this.urlTree=t}};function Nr(e){return ir(new us(e))}function YR(e){return ir(new S(4e3,!1))}function ZR(e){return ir(nw(!1,rt.GuardRejected))}var ep=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return C(i);if(r.numberOfChildren>1||!r.children[B])return YR(`${t.redirectTo}`);r=r.children[B]}}applyRedirectCommands(t,n,i,r,o){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:_}=r,y=Kt(o,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:_}));if(y instanceof wn)throw new ds(y);n=y}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n[0]==="/")throw new ds(s);return s}applyRedirectCreateUrlTree(t,n,i,r){let o=this.createSegmentGroup(t,n.root,i,r);return new wn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(t,n,i,r){let o=this.createSegments(t,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new X(o,s)}createSegments(t,n,i,r){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){let r=i[n.path.substring(1)];if(!r)throw new S(4001,!1);return r}findOrReturn(t,n){let i=0;for(let r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}},tp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JR(e,t,n,i,r){let o=sw(e,t,n);return o.matched?(i=bR(t,i),QR(i,t,n,r).pipe(I(s=>s===!0?o:b({},tp)))):C(o)}function sw(e,t,n){if(t.path==="**")return XR(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?b({},tp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(t.matcher||KN)(n,e,t);if(!r)return b({},tp);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?b(b({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function XR(e){return{matched:!0,parameters:e.length>0?Bb(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function xb(e,t,n,i){return n.length>0&&nO(e,n,i)?{segmentGroup:new X(t,tO(i,new X(n,e.children))),slicedSegments:[]}:n.length===0&&iO(e,n,i)?{segmentGroup:new X(e.segments,eO(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new X(e.segments,e.children),slicedSegments:n}}function eO(e,t,n,i){let r={};for(let o of n)if(pc(e,t,o)&&!i[xt(o)]){let s=new X([],{});r[xt(o)]=s}return b(b({},i),r)}function tO(e,t){let n={};n[B]=t;for(let i of e)if(i.path===""&&xt(i)!==B){let r=new X([],{});n[xt(i)]=r}return n}function nO(e,t,n){return n.some(i=>pc(e,t,i)&&xt(i)!==B)}function iO(e,t,n){return n.some(i=>pc(e,t,i))}function pc(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function rO(e,t,n){return t.length===0&&!e.children[n]}var np=class{};function oO(e,t,n,i,r,o,s="emptyOnly"){return new ip(e,t,n,i,r,s,o).recognize()}var sO=31,ip=class{constructor(t,n,i,r,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ep(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new S(4002,`'${t.segmentGroup}'`)}recognize(){let t=xb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(I(({children:n,rootSnapshot:i})=>{let r=new it(i,n),o=new lc("",r),s=fR(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new xr([],Object.freeze({}),Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),B,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,B,n).pipe(I(i=>({children:i,rootSnapshot:n})),Nn(i=>{if(i instanceof ds)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof us?this.noMatchError(i):i}))}processSegmentGroup(t,n,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i,o):this.processSegment(t,n,i,i.segments,r,!0,o).pipe(I(s=>s instanceof it?[s]:[]))}processChildren(t,n,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return J(o).pipe(di(s=>{let a=i.children[s],l=wR(n,s);return this.processSegmentGroup(t,l,a,s,r)}),sr((s,a)=>(s.push(...a),s)),Rn(null),id(),ce(s=>{if(s===null)return Nr(i);let a=aw(s);return aO(a),C(a)}))}processSegment(t,n,i,r,o,s,a){return J(n).pipe(di(l=>this.processSegmentAgainstRoute(l._injector??t,n,l,i,r,o,s,a).pipe(Nn(c=>{if(c instanceof us)return C(null);throw c}))),ht(l=>!!l),Nn(l=>{if(rw(l))return rO(i,r,o)?C(new np):Nr(i);throw l}))}processSegmentAgainstRoute(t,n,i,r,o,s,a,l){return xt(i)!==s&&(s===B||!pc(r,o,i))?Nr(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,n,i,o,s,l):Nr(r)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=sw(n,r,o);if(!l)return Nr(n);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sO&&(this.allowRedirects=!1));let f=new xr(o,c,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,kb(r),xt(r),r.component??r._loadedComponent??null,r,Pb(r)),p=ac(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let _=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,t);return this.applyRedirects.lineralizeSegments(r,_).pipe(ce(y=>this.processSegment(t,i,n,y.concat(h),s,!1,a)))}matchSegmentAgainstRoute(t,n,i,r,o,s){let a=JR(n,i,r,t,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(te(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(te(({routes:c})=>{let u=i._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new xr(h,d,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,kb(i),xt(i),i.component??i._loadedComponent??null,i,Pb(i)),_=ac(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(_.params),p.data=Object.freeze(_.data);let{segmentGroup:y,slicedSegments:M}=xb(n,h,f,c);if(M.length===0&&y.hasChildren())return this.processChildren(u,c,y,p).pipe(I(E=>new it(p,E)));if(c.length===0&&M.length===0)return C(new it(p,[]));let k=xt(i)===o;return this.processSegment(u,c,y,M,k?B:o,!0,p).pipe(I(E=>new it(p,E instanceof it?[E]:[])))}))):Nr(n)))}getChildConfig(t,n,i){return n.children?C({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?C({routes:n._loadedRoutes,injector:n._loadedInjector}):KR(t,n,i,this.urlSerializer).pipe(ce(r=>r?this.configLoader.loadChildren(t,n).pipe(fe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):ZR(n))):C({routes:[],injector:t})}};function aO(e){e.sort((t,n)=>t.value.outlet===B?-1:n.value.outlet===B?1:t.value.outlet.localeCompare(n.value.outlet))}function lO(e){let t=e.value.routeConfig;return t&&t.path===""}function aw(e){let t=[],n=new Set;for(let i of e){if(!lO(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):t.push(i)}for(let i of n){let r=aw(i.children);t.push(new it(i.value,r))}return t.filter(i=>!n.has(i))}function kb(e){return e.data||{}}function Pb(e){return e.resolve||{}}function cO(e,t,n,i,r,o){return ce(s=>oO(e,t,n,i,s.extractedUrl,r,o).pipe(I(({state:a,tree:l})=>ee(b({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function uO(e,t){return ce(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return C(n);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of lw(l))s.add(c);let a=0;return J(s).pipe(di(l=>o.has(l)?dO(l,i,e,t):(l.data=ac(l,l.parent,e).resolve,C(void 0))),fe(()=>a++),or(1),ce(l=>a===s.size?C(n):ye))})}function lw(e){let t=e.children.map(n=>lw(n)).flat();return[e,...t]}function dO(e,t,n,i){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!ew(r)&&(o[hs]=r.title),hO(o,e,t,i).pipe(I(s=>(e._resolvedData=s,e.data=ac(e,e.parent,n).resolve,null)))}function hO(e,t,n,i){let r=kf(e);if(r.length===0)return C({});let o={};return J(r).pipe(ce(s=>fO(e[s],t,n,i).pipe(ht(),fe(a=>{if(a instanceof cs)throw cc(new Fr,a);o[s]=a}))),or(1),td(o),Nn(s=>rw(s)?ye:ir(s)))}function fO(e,t,n,i){let r=ps(t)??i,o=Ur(e,r),s=o.resolve?o.resolve(t,n):Kt(r,()=>o(t,n));return Gn(s)}function Of(e){return te(t=>{let n=e(t);return n?J(n).pipe(I(()=>t)):C(t)})}var cw=(()=>{class e{buildTitle(n){let i,r=n.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===B);return i}getResolvedTitleForRoute(n){return n.data[hs]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:()=>g(pO),providedIn:"root"})}}return e})(),pO=(()=>{class e extends cw{constructor(n){super(),this.title=n}updateTitle(n){let i=this.buildTitle(n);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||e)(m(Ib))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),_s=new w("",{providedIn:"root",factory:()=>({})}),gO=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Ot({type:e,selectors:[["ng-component"]],standalone:!0,features:[Wo],decls:1,vars:0,template:function(i,r){i&1&&Si(0,"router-outlet")},dependencies:[CR],encapsulation:2})}}return e})();function sp(e){let t=e.children&&e.children.map(sp),n=t?ee(b({},e),{children:t}):b({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==B&&(n.component=gO),n}var dc=new w(""),ap=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=g(Hl)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return C(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let i=Gn(n.loadComponent()).pipe(I(uw),fe(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),ln(()=>{this.componentLoaders.delete(n)})),r=new Zi(i,()=>new Z).pipe(Yi());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return C({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=mO(i,this.compiler,n,this.onLoadEndListener).pipe(ln(()=>{this.childrenLoaders.delete(i)})),s=new Zi(o,()=>new Z).pipe(Yi());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function mO(e,t,n,i){return Gn(e.loadChildren()).pipe(I(uw),ce(r=>r instanceof ko||Array.isArray(r)?C(r):J(t.compileModuleAsync(r))),I(r=>{i&&i(e);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(dc,[],{optional:!0,self:!0}).flat()),{routes:s.map(sp),injector:o}}))}function _O(e){return e&&typeof e=="object"&&"default"in e}function uw(e){return _O(e)?e.default:e}var lp=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:()=>g(vO),providedIn:"root"})}}return e})(),vO=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),dw=new w(""),hw=new w("");function yO(e,t,n){let i=e.get(hw),r=e.get(Se);return e.get(j).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,s=new Promise(c=>{o=c}),a=r.startViewTransition(()=>(o(),bO(e))),{onViewTransitionCreated:l}=i;return l&&Kt(e,()=>l({transition:a,from:t,to:n})),s})}function bO(e){return new Promise(t=>{ef({read:()=>setTimeout(t)},{injector:e})})}var wO=new w(""),cp=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Z,this.transitionAbortSubject=new Z,this.configLoader=g(ap),this.environmentInjector=g(Pe),this.urlSerializer=g(fs),this.rootContexts=g(gs),this.location=g(Ar),this.inputBindingEnabled=g(fc,{optional:!0})!==null,this.titleStrategy=g(cw),this.options=g(_s,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=g(lp),this.createViewTransition=g(dw,{optional:!0}),this.navigationErrorHandler=g(wO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>C(void 0),this.rootComponentType=null;let n=r=>this.events.next(new Hf(r)),i=r=>this.events.next(new $f(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let i=++this.navigationId;this.transitions?.next(ee(b(b({},this.transitions.value),n),{id:i}))}setupNavigations(n,i,r){return this.transitions=new Ee({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ns,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(be(o=>o.id!==0),I(o=>ee(b({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),te(o=>{let s=!1,a=!1;return C(o).pipe(te(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",rt.SupersededByNewNavigation),ye;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ee(b({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&u!=="reload"){let d="";return this.events.next(new $n(l.id,this.urlSerializer.serialize(l.rawUrl),d,nc.IgnoredSameUrlNavigation)),l.resolve(!1),ye}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return C(l).pipe(te(d=>{let h=this.transitions?.getValue();return this.events.next(new Lr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?ye:Promise.resolve(d)}),cO(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),fe(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=ee(b({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new ic(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:h,source:f,restoredState:p,extras:_}=l,y=new Lr(d,this.urlSerializer.serialize(h),f,p);this.events.next(y);let M=Jb(this.rootComponentType).snapshot;return this.currentTransition=o=ee(b({},l),{targetSnapshot:M,urlAfterRedirects:h,extras:ee(b({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,C(o)}else{let d="";return this.events.next(new $n(l.id,this.urlSerializer.serialize(l.extractedUrl),d,nc.IgnoredByUrlHandlingStrategy)),l.resolve(!1),ye}}),fe(l=>{let c=new Vf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),I(l=>(this.currentTransition=o=ee(b({},l),{guards:AR(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),jR(this.environmentInjector,l=>this.events.next(l)),fe(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw cc(this.urlSerializer,l.guardsResult);let c=new Bf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),be(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",rt.GuardRejected),!1)),Of(l=>{if(l.guards.canActivateChecks.length)return C(l).pipe(fe(c=>{let u=new jf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),te(c=>{let u=!1;return C(c).pipe(uO(this.paramsInheritanceStrategy,this.environmentInjector),fe({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",rt.NoDataFromResolver)}}))}),fe(c=>{let u=new Uf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),Of(l=>{let c=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(fe(h=>{u.component=h}),I(()=>{})));for(let h of u.children)d.push(...c(h));return d};return rr(c(l.targetSnapshot.root)).pipe(Rn(null),Qe(1))}),Of(()=>this.afterPreactivation()),te(()=>{let{currentSnapshot:l,targetSnapshot:c}=o,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?J(u).pipe(I(()=>o)):C(o)}),I(l=>{let c=ER(n.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ee(b({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),fe(()=>{this.events.next(new as)}),MR(this.rootContexts,n.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Qe(1),fe({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Dn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),ke(this.transitionAbortSubject.pipe(fe(l=>{throw l}))),ln(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",rt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Nn(l=>{if(a=!0,iw(l))this.events.next(new bn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),TR(l)?this.events.next(new Vr(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let c=new ss(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let u=Kt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof cs){let{message:d,cancellationCode:h}=cc(this.urlSerializer,u);this.events.next(new bn(o.id,this.urlSerializer.serialize(o.extractedUrl),d,h)),this.events.next(new Vr(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);let d=n.errorHandler(l);o.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return ye}))}))}cancelNavigationTransition(n,i,r){let o=new bn(n.id,this.urlSerializer.serialize(n.extractedUrl),i,r);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function DO(e){return e!==ns}var CO=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:()=>g(EO),providedIn:"root"})}}return e})(),rp=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},EO=(()=>{class e extends rp{static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=jo(e)))(r||e)}})()}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),fw=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:()=>g(SO),providedIn:"root"})}}return e})(),SO=(()=>{class e extends fw{constructor(){super(...arguments),this.location=g(Ar),this.urlSerializer=g(fs),this.options=g(_s,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=g(lp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new wn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Jb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(i=>{i.type==="popstate"&&n(i.url,i.state)})}handleRouterEvent(n,i){if(n instanceof Lr)this.stateMemento=this.createStateMemento();else if(n instanceof $n)this.rawUrlTree=i.initialUrl;else if(n instanceof ic){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else n instanceof as?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):n instanceof bn&&(n.code===rt.GuardRejected||n.code===rt.NoDataFromResolver)?this.restoreHistory(i):n instanceof ss?this.restoreHistory(i,!0):n instanceof Dn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,i){let r=n instanceof wn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=b(b({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=b(b({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(n,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=jo(e)))(r||e)}})()}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),es=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(es||{});function pw(e,t){e.events.pipe(be(n=>n instanceof Dn||n instanceof bn||n instanceof ss||n instanceof $n),I(n=>n instanceof Dn||n instanceof $n?es.COMPLETE:(n instanceof bn?n.code===rt.Redirect||n.code===rt.SupersededByNewNavigation:!1)?es.REDIRECTING:es.FAILED),be(n=>n!==es.REDIRECTING),Qe(1)).subscribe(()=>{t()})}function IO(e){throw e}var TO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ni=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=g(Vl),this.stateManager=g(fw),this.options=g(_s,{optional:!0})||{},this.pendingTasks=g(Sr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=g(cp),this.urlSerializer=g(fs),this.location=g(Ar),this.urlHandlingStrategy=g(lp),this._events=new Z,this.errorHandler=this.options.errorHandler||IO,this.navigated=!1,this.routeReuseStrategy=g(CO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=g(dc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!g(fc,{optional:!0}),this.eventsSubscription=new he,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof bn&&i.code!==rt.Redirect&&i.code!==rt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Dn)this.navigated=!0;else if(i instanceof Vr){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=b({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||DO(r.source)},s);this.scheduleNavigation(a,ns,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}NO(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ns,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",i)},0)})}navigateToSyncWithBrowser(n,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=b({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(sp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=b(b({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=Kb(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return Qb(d,n,u,c??null)}navigateByUrl(n,i={skipLocationChange:!1}){let r=rs(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,ns,null,i)}navigate(n,i={skipLocationChange:!1}){return AO(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,i){let r;if(i===!0?r=b({},TO):i===!1?r=b({},MO):r=i,rs(n))return Mb(this.currentUrlTree,n,r);let o=this.parseUrl(n);return Mb(this.currentUrlTree,o,r)}removeEmptyProps(n){return Object.entries(n).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(n,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return pw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function AO(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new S(4008,!1)}function NO(e){return!(e instanceof as)&&!(e instanceof Vr)}var hc=class{};var RO=(()=>{class e{constructor(n,i,r,o,s){this.router=n,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(be(n=>n instanceof Dn),di(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=kl(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return J(r).pipe(Mn())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(n,i):r=C(null);let o=r.pipe(ce(s=>s===null?C(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return J([o,s]).pipe(Mn())}else return o})}static{this.\u0275fac=function(i){return new(i||e)(m(Ni),m(Hl),m(Pe),m(hc),m(ap))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),gw=new w(""),OO=(()=>{class e{constructor(n,i,r,o,s={}){this.urlSerializer=n,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Lr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Dn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof $n&&n.code===nc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof rc&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new rc(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){n0()}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac})}}return e})();function xO(e){return e.routerState.root}function vs(e,t){return{\u0275kind:e,\u0275providers:t}}function kO(){let e=g(Ne);return t=>{let n=e.get(Qt);if(t!==n.components[0])return;let i=e.get(Ni),r=e.get(mw);e.get(up)===1&&i.initialNavigation(),e.get(_w,null,U.Optional)?.setUpPreloading(),e.get(gw,null,U.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var mw=new w("",{factory:()=>new Z}),up=new w("",{providedIn:"root",factory:()=>1});function PO(){return vs(2,[{provide:up,useValue:0},{provide:Ul,multi:!0,deps:[Ne],useFactory:t=>{let n=t.get(ab,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=t.get(Ni),o=t.get(mw);pw(r,()=>{i(!0)}),t.get(cp).afterPreactivation=()=>(i(!0),o.closed?C(void 0):o),r.initialNavigation()}))}}])}function FO(){return vs(3,[{provide:Ul,multi:!0,useFactory:()=>{let t=g(Ni);return()=>{t.setUpLocationChangeListener()}}},{provide:up,useValue:2}])}var _w=new w("");function LO(e){return vs(0,[{provide:_w,useExisting:RO},{provide:hc,useExisting:e}])}function VO(){return vs(8,[Ob,{provide:fc,useExisting:Ob}])}function BO(e){let t=[{provide:dw,useValue:yO},{provide:hw,useValue:b({skipNextTransition:!!e?.skipInitialTransition},e)}];return vs(9,t)}var Fb=new w("ROUTER_FORROOT_GUARD"),jO=[Ar,{provide:fs,useClass:Fr},Ni,gs,{provide:Br,useFactory:xO,deps:[Ni]},ap,[]],dp=(()=>{class e{constructor(n){}static forRoot(n,i){return{ngModule:e,providers:[jO,[],{provide:dc,multi:!0,useValue:n},{provide:Fb,useFactory:GO,deps:[[Ni,new wi,new Dl]]},{provide:_s,useValue:i||{}},i?.useHash?HO():$O(),UO(),i?.preloadingStrategy?LO(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?zO(i):[],i?.bindToComponentInputs?VO().\u0275providers:[],i?.enableViewTransitions?BO().\u0275providers:[],WO()]}}static forChild(n){return{ngModule:e,providers:[{provide:dc,multi:!0,useValue:n}]}}static{this.\u0275fac=function(i){return new(i||e)(m(Fb,8))}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();function UO(){return{provide:gw,useFactory:()=>{let e=g(gb),t=g(j),n=g(_s),i=g(cp),r=g(fs);return n.scrollOffset&&e.setOffset(n.scrollOffset),new OO(r,i,e,t,n)}}}function HO(){return{provide:Ti,useClass:cb}}function $O(){return{provide:Ti,useClass:yf}}function GO(e){return"guarded"}function zO(e){return[e.initialNavigation==="disabled"?FO().\u0275providers:[],e.initialNavigation==="enabledBlocking"?PO().\u0275providers:[]]}var Lb=new w("");function WO(){return[{provide:Lb,useFactory:kO},{provide:cf,multi:!0,useExisting:Lb}]}var qO=[],gc=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=L({type:e});static \u0275inj=F({imports:[dp.forRoot(qO),dp]})};var KO="firebase",QO="10.14.1";St(KO,QO,"app");var zn=new hn("ANGULARFIRE2_VERSION");var YO=(e,t)=>{let n=t?[t]:a_(),i=[];return n.forEach(r=>{r.container.getProvider(e).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Cn=class{constructor(){return YO(ZO)}},ZO="app-check";function hp(){}var mc=class{zone;delegate;constructor(t,n=Qu){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},fp=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hp,{},hp,hp)),n.pipe(fe({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Hr=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new mc(Zone.current)),this.insideAngular=n.run(()=>new mc(Zone.current,Tn)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||e)(m(j))};static \u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vw(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function pp(e){return e.pipe(Xe(vw().outsideAngular))}function wt(e){return JO(vw())(e)}function JO(e){return function(n){return n=n.lift(new fp(e.ngZone)),n.pipe(Tt(e.outsideAngular),Xe(e.insideAngular))}}var XO=new Map,ex={activated:!1,tokenObservers:[]},tx={initialized:!1,enabled:!1};function kt(e){return XO.get(e)||Object.assign({},ex)}function Sw(){return tx}var nx="https://content-firebaseappcheck.googleapis.com/v1";var ix="exchangeDebugToken",yw={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Y8=24*60*60*1e3;var _p=class{constructor(t,n,i,r,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return xe(this,null,function*(){this.stop();try{this.pending=new De,this.pending.promise.catch(n=>{}),yield rx(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new De,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function rx(e){return new Promise(t=>{setTimeout(t,e)})}var ox={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Wn=new e_("appCheck","AppCheck",ox);function Iw(e){if(!kt(e).activated)throw Wn.create("use-before-activation",{appName:e.name})}function Tw(i,r){return xe(this,arguments,function*({url:e,body:t},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(t),headers:o},l;try{l=yield fetch(e,a)}catch(f){throw Wn.create("fetch-network-error",{originalErrorMessage:f?.message})}if(l.status!==200)throw Wn.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(f){throw Wn.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Wn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function Mw(e,t){let{projectId:n,appId:i,apiKey:r}=e.options;return{url:`${nx}/projects/${n}/apps/${i}:${ix}?key=${r}`,body:{debug_token:t}}}var sx="firebase-app-check-database",ax=1,vp="firebase-app-check-store";var _c=null;function lx(){return _c||(_c=new Promise((e,t)=>{try{let n=indexedDB.open(sx,ax);n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{var r;t(Wn.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(vp,{keyPath:"compositeKey"})}}}catch(n){t(Wn.create("storage-open",{originalErrorMessage:n?.message}))}}),_c)}function cx(e,t){return ux(dx(e),t)}function ux(e,t){return xe(this,null,function*(){let i=(yield lx()).transaction(vp,"readwrite"),o=i.objectStore(vp).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=l=>{s()},i.onerror=l=>{var c;a(Wn.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function dx(e){return`${e.options.appId}-${e.name}`}var yp=new zi("@firebase/app-check");function mp(e,t){return Jm()?cx(e,t).catch(n=>{yp.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Aw(){return Sw().enabled}function Nw(){return xe(this,null,function*(){let e=Sw();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var hx={error:"UNKNOWN_ERROR"};function fx(e){return oa.encodeString(JSON.stringify(e),!1)}function bp(e,t=!1){return xe(this,null,function*(){let n=e.app;Iw(n);let i=kt(n),r=i.token,o;if(r&&!ys(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(ys(l)?r=l:yield mp(n,void 0))}if(!t&&r&&ys(r))return{token:r.token};let s=!1;if(Aw()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Tw(Mw(n,yield Nw()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let l=yield i.exchangeTokenPromise;return yield mp(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield kt(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?yp.warn(l.message):yp.error(l),o=l}let a;return r?o?ys(r)?a={token:r.token,internalError:o}:a=ww(o):(a={token:r.token},i.token=r,yield mp(n,r)):a=ww(o),s&&_x(n,a),a})}function px(e){return xe(this,null,function*(){let t=e.app;Iw(t);let{provider:n}=kt(t);if(Aw()){let i=yield Nw(),{token:r}=yield Tw(Mw(t,i),e.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function gx(e,t,n,i){let{app:r}=e,o=kt(r),s={next:n,error:i,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ys(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),bw(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>bw(e))}function Rw(e,t){let n=kt(e),i=n.tokenObservers.filter(r=>r.next!==t);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function bw(e){let{app:t}=e,n=kt(t),i=n.tokenRefresher;i||(i=mx(e),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function mx(e){let{app:t}=e;return new _p(()=>xe(this,null,function*(){let n=kt(t),i;if(n.token?i=yield bp(e,!0):i=yield bp(e),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=kt(t);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},yw.RETRIAL_MIN_WAIT,yw.RETRIAL_MAX_WAIT)}function _x(e,t){let n=kt(e).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function ys(e){return e.expireTimeMillis-Date.now()>0}function ww(e){return{token:fx(hx),error:e}}var wp=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=kt(this.app);for(let n of t)Rw(this.app,n.next);return Promise.resolve()}};function vx(e,t){return new wp(e,t)}function yx(e){return{getToken:t=>bp(e,t),getLimitedUseToken:()=>px(e),addTokenListener:t=>gx(e,"INTERNAL",t),removeTokenListener:t=>Rw(e.app,t)}}var bx="@firebase/app-check",wx="0.8.8";var Dx="app-check",Dw="app-check-internal";function Cx(){oi(new Je(Dx,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return vx(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Dw).initialize()})),oi(new Je(Dw,e=>{let t=e.getProvider("app-check").getImmediate();return yx(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),St(bx,wx)}Cx();var Ex=["localhost","0.0.0.0","127.0.0.1"],lz=typeof window<"u"&&Ex.includes(window.location.hostname);var Sx="firebase",Ix="10.14.1";Ce.registerVersion(Sx,Ix,"app-compat");var Tx=["ngOnDestroy"],xw=(e,t,n,i={})=>new Proxy(e,{get:(r,o)=>n.runOutsideAngular(()=>{if(e[o])return i?.spy?.get&&i.spy.get(o,e[o]),e[o];if(Tx.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>n.run(()=>c)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,c)=>s.then(u=>{let d=u?.(...c);return i?.spy?.apply&&i.spy.apply(o,c,d),d})})})});var vc=class{constructor(t){return t}},qn=new w("angularfire2.app.options"),Kn=new w("angularfire2.app.name");function Ri(e,t,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=Ce.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>Ce.initializeApp(e,r));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let a=!!module.hot;Mx("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new vc(s)}var Mx=(e,...t)=>{df()&&typeof console<"u"&&console[e](...t)},Ax={provide:vc,useFactory:Ri,deps:[qn,j,[new wi,Kn]]},kw=(()=>{class e{static initializeApp(n,i){return{ngModule:e,providers:[{provide:qn,useValue:n},{provide:Kn,useValue:i}]}}constructor(n){Ce.registerVersion("angularfire",zn.full,"core"),Ce.registerVersion("angularfire",zn.full,"app-compat"),Ce.registerVersion("angular",$0.full,n.toString())}static \u0275fac=function(i){return new(i||e)(m(Re))};static \u0275mod=L({type:e});static \u0275inj=F({providers:[Ax]})}return e})();function $r(e,t,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(o)return Nx(r,s)||(Ow("error",`${t} was already initialized on the ${n} Firebase App with different settings.${Rx?" You may need to reload as Firebase is not HMR aware.":""}`),Ow("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([e,a,r]),a}}function Nx(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var Rx=typeof module<"u"&&!!module.hot,Ow=(e,...t)=>{df()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var Cp=new w("angularfire2.auth.use-emulator"),Ep=new w("angularfire2.auth.settings"),Sp=new w("angularfire2.auth.tenant-id"),Ip=new w("angularfire2.auth.langugage-code"),Tp=new w("angularfire2.auth.use-device-language"),Mp=new w("angularfire.auth.persistence"),Ap=(e,t,n,i,r,o,s,a)=>$r(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(let[c,u]of Object.entries(s))l.settings[c]=u;return a&&l.setPersistence(a),l},[n,i,r,o,s,a]),Pw=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,l,c,u,d,h,f){let p=new Z,_=C(void 0).pipe(Xe(s.outsideAngular),te(()=>o.runOutsideAngular(()=>import("./chunk-KUXOSEJS.js"))),I(()=>Ri(n,o,i)),I(y=>Ap(y,o,a,c,u,d,l,h)),Pa({bufferSize:1,refCount:!1}));if(Ko(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=C(null);else{_.pipe(ht()).subscribe();let y=_.pipe(te(E=>E.getRedirectResult().then(V=>V,()=>null)),wt,Pa({bufferSize:1,refCount:!1})),M=_.pipe(te(E=>new N(V=>({unsubscribe:o.runOutsideAngular(()=>E.onAuthStateChanged(pe=>V.next(pe),pe=>V.error(pe),()=>V.complete()))})))),k=_.pipe(te(E=>new N(V=>({unsubscribe:o.runOutsideAngular(()=>E.onIdTokenChanged(pe=>V.next(pe),pe=>V.error(pe),()=>V.complete()))}))));this.authState=y.pipe(La(M),Tt(s.outsideAngular),Xe(s.insideAngular)),this.user=y.pipe(La(k),Tt(s.outsideAngular),Xe(s.insideAngular)),this.idToken=this.user.pipe(te(E=>E?J(E.getIdToken()):C(null))),this.idTokenResult=this.user.pipe(te(E=>E?J(E.getIdTokenResult()):C(null))),this.credential=ui(y,p,this.authState.pipe(be(E=>!E))).pipe(I(E=>E?.user?E:null),Tt(s.outsideAngular),Xe(s.insideAngular))}return xw(this,_,o,{spy:{apply:(y,M,k)=>{(y.startsWith("signIn")||y.startsWith("createUser"))&&k.then(E=>p.next(E))}}})}static \u0275fac=function(i){return new(i||e)(m(qn),m(Kn,8),m(Re),m(j),m(Hr),m(Cp,8),m(Ep,8),m(Sp,8),m(Ip,8),m(Tp,8),m(Mp,8),m(Cn,8))};static \u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var Fw="@firebase/database",Lw="1.0.8";var Ug="";function Hg(e){Ug=e}var Lp=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),me(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:aa(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Vp=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return ut(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var pD=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Lp(t)}}catch{}return new Vp},xi=pD("localStorage"),Bp=pD("sessionStorage");var qr=new zi("@firebase/database"),gD=function(){let e=1;return function(){return e++}}(),mD=function(e){let t=o_(e),n=new r_;n.update(t);let i=n.digest();return oa.encodeByteArray(i)},$s=function(...e){let t="";for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=$s.apply(null,i):typeof i=="object"?t+=me(i):t+=i,t+=" "}return t},ki=null,Vw=!0,_D=function(e,t){v(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(qr.logLevel=s_.VERBOSE,ki=qr.log.bind(qr),t&&Bp.set("logging_enabled",!0)):typeof e=="function"?ki=e:(ki=null,Bp.remove("logging_enabled"))},Te=function(...e){if(Vw===!0&&(Vw=!1,ki===null&&Bp.get("logging_enabled")===!0&&_D(!0)),ki){let t=$s.apply(null,e);ki(t)}},Gs=function(e){return function(...t){Te(e,...t)}},jp=function(...e){let t="FIREBASE INTERNAL ERROR: "+$s(...e);qr.error(t)},Xt=function(...e){let t=`FIREBASE FATAL ERROR: ${$s(...e)}`;throw qr.error(t),new Error(t)},Be=function(...e){let t="FIREBASE WARNING: "+$s(...e);qr.warn(t)},kx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Be("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Wc=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Px=function(e){if(Bt()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Jn="[MIN_NAME]",En="[MAX_NAME]",Fi=function(e,t){if(e===t)return 0;if(e===Jn||t===En)return-1;if(t===Jn||e===En)return 1;{let n=Bw(e),i=Bw(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},Fx=function(e,t){return e===t?0:e<t?-1:1},bs=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+me(t))},$g=function(e){if(typeof e!="object"||e===null)return me(e);let t=[];for(let i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=me(t[i]),n+=":",n+=$g(e[t[i]]);return n+="}",n},vD=function(e,t){let n=e.length;if(n<=t)return[e];let i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function Me(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var yD=function(e){v(!Wc(e),"Invalid JSON number");let t=11,n=52,i=(1<<t-1)-1,r,o,s,a,l;e===0?(o=0,s=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),i),o=a+i,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-i-n))));let c=[];for(l=n;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(r?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Lx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Vx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Bx(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}var jx=new RegExp("^-?(0*)\\d{1,10}$"),Ux=-2147483648,Hx=2147483647,Bw=function(e){if(jx.test(e)){let t=Number(e);if(t>=Ux&&t<=Hx)return t}return null},no=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw Be("Exception was thrown by user callback.",n),t},Math.floor(0))}},$x=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Es=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Up=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Be(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Hp=class{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Te("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Be(t)}},Ss=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),bc="5",bD="v",wD="s",DD="r",CD="f",ED=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,SD="ls",ID="p",$p="ac",TD="websocket",MD="long_polling";var wc=class{constructor(t,n,i,r,o=!1,s="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xi.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&xi.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function Gx(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function AD(e,t,n){v(typeof t=="string","typeof type must == string"),v(typeof n=="object","typeof params must == object");let i;if(t===TD)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===MD)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Gx(e)&&(n.ns=e.namespace);let r=[];return Me(n,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}var Gp=class{constructor(){this.counters_={}}incrementCounter(t,n=1){ut(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return Ym(this.counters_)}};var Np={},Rp={};function Gg(e){let t=e.toString();return Np[t]||(Np[t]=new Gp),Np[t]}function zx(e,t){let n=e.toString();return Rp[n]||(Rp[n]=t()),Rp[n]}var zp=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&no(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var jw="start",Wx="close",qx="pLPCommand",Kx="pRTLPCB",ND="id",RD="pw",OD="ser",Qx="cb",Yx="seg",Zx="ts",Jx="d",Xx="dframe",xD=1870,kD=30,ek=xD-kD,tk=25e3,nk=3e4,As=class e{constructor(t,n,i,r,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gs(t),this.stats_=Gg(n),this.urlFn=l=>(this.appCheckToken&&(l[$p]=this.appCheckToken),AD(n,MD,l))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new zp(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nk)),Px(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Wp((...o)=>{let[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===jw)this.id=a,this.password=l;else if(s===Wx)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[jw]="t",i[OD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Qx]=this.scriptTagHolder.uniqueCallbackIdentifier),i[bD]=bc,this.transportSessionId&&(i[wD]=this.transportSessionId),this.lastSessionId&&(i[SD]=this.lastSessionId),this.applicationId&&(i[ID]=this.applicationId),this.appCheckToken&&(i[$p]=this.appCheckToken),typeof location<"u"&&location.hostname&&ED.test(location.hostname)&&(i[DD]=CD);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Bt()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Lx()&&!Vx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=me(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=Qm(n),r=vD(i,ek);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Bt())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[Xx]="t",i[ND]=t,i[RD]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=me(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Wp=class e{constructor(t,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Bt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=gD(),window[qx+this.uniqueCallbackIdentifier]=t,window[Kx+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Te("frame writing exception"),a.stack&&Te(a.stack),Te(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Te("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[ND]=this.myID,t[RD]=this.myPW,t[OD]=this.currentSerial;let n=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kD+i.length<=xD;){let s=this.pendingSegs.shift();i=i+"&"+Yx+r+"="+s.seg+"&"+Zx+r+"="+s.ts+"&"+Jx+r+"="+s.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(tk)),o=()=>{clearTimeout(r),i()};this.addTag(t,o)}addTag(t,n){Bt()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Te("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var ik=16384,rk=45e3,Dc=null;typeof MozWebSocket<"u"?Dc=MozWebSocket:typeof WebSocket<"u"&&(Dc=WebSocket);var zr=(()=>{class e{constructor(n,i,r,o,s,a,l){this.connId=n,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gs(this.connId),this.stats_=Gg(i),this.connURL=e.connectionURL_(i,a,l,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,o,s){let a={};return a[bD]=bc,!Bt()&&typeof location<"u"&&location.hostname&&ED.test(location.hostname)&&(a[DD]=CD),i&&(a[wD]=i),r&&(a[SD]=r),o&&(a[$p]=o),s&&(a[ID]=s),AD(n,TD,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xi.set("previous_websocket_failure",!0);try{let r;if(Bt()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${bc}/${Ug}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Dc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&Dc!==null&&!e.forceDisallow_}static previouslyFailed(){return xi.isInMemoryStorage||xi.get("previous_websocket_failure")===!0}markConnectionHealthy(){xi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=aa(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(v(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=me(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=vD(i,ik);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(rk))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),PD=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[As,zr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=zr&&zr.isAvailable(),r=i&&!zr.previouslyFailed();if(n.webSocketOnly&&(i||Be("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[zr];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),ok=6e4,sk=5e3,ak=10*1024,lk=100*1024,Op="t",Uw="d",ck="s",Hw="r",uk="e",$w="o",Gw="a",zw="n",Ww="p",dk="h",qp=class{constructor(t,n,i,r,o,s,a,l,c,u){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gs("c:"+this.id+":"),this.transportManager_=new PD(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Es(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lk?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>ak?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Op in t){let n=t[Op];n===Gw?this.upgradeIfSecondaryHealthy_():n===Hw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===$w&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=bs("t",t),i=bs("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ww,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Gw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=bs("t",t),i=bs("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=bs(Op,t);if(Uw in t){let i=t[Uw];if(n===dk){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===zw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===ck?this.onConnectionShutdown_(i):n===Hw?this.onReset_(i):n===uk?jp("Server Error: "+i):n===$w?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jp("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),bc!==i&&Be("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Es(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ok))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Es(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(sk))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ww,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Cc=class{put(t,n,i,r){}merge(t,n,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}};var Ec=class{constructor(t){this.allowedEvents_=t,this.listeners_={},v(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});let r=this.getInitialEvent(t);r&&n.apply(i,r)}off(t,n,i){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(t){v(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var Sc=class e extends Ec{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Tu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return v(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var qw=32,Kw=768,Q=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function K(){return new Q("")}function $(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Xn(e){return e.pieces_.length-e.pieceNum_}function re(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Q(e.pieces_,t)}function zg(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function hk(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Ns(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function FD(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Q(t,0)}function ae(e,t){let n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof Q)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{let i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Q(n,0)}function G(e){return e.pieceNum_>=e.pieces_.length}function $e(e,t){let n=$(e),i=$(t);if(n===null)return t;if(n===i)return $e(re(e),re(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function fk(e,t){let n=Ns(e,0),i=Ns(t,0);for(let r=0;r<n.length&&r<i.length;r++){let o=Fi(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function Wg(e,t){if(Xn(e)!==Xn(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Dt(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Xn(e)>Xn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}var Kp=class{constructor(t,n){this.errorPrefix_=n,this.parts_=Ns(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=bo(this.parts_[i]);LD(this)}};function pk(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=bo(t),LD(e)}function gk(e){let t=e.parts_.pop();e.byteLength_-=bo(t),e.parts_.length>0&&(e.byteLength_-=1)}function LD(e){if(e.byteLength_>Kw)throw new Error(e.errorPrefix_+"has a key path longer than "+Kw+" bytes ("+e.byteLength_+").");if(e.parts_.length>qw)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qw+") or object contains a cycle "+Oi(e))}function Oi(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Qp=class e extends Ec{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new e}getInitialEvent(t){return v(t==="visible","Unknown event type: "+t),[this.visible_]}};var ws=1e3,mk=60*5*1e3,Qw=30*1e3,_k=1.3,vk=3e4,yk="server_kill",Yw=3,qg=(()=>{class e extends Cc{constructor(n,i,r,o,s,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=Gs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ws,this.maxReconnectDelay_=mk,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Bt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qp.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Sc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let o=++this.requestNumber_,s={r:o,a:n,b:i};this.log_(me(s)),v(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(n){this.initConnection_();let i=new De,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),i.promise}listen(n,i,r,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),v(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),v(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let l={onComplete:o,hashFn:i,query:n,tag:r};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);let s={p:r},a="q";n.tag&&(s.q=i._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,l=>{let c=l.d,u=l.s;e.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(o))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,o),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&ut(n,"w")){let r=In(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();Be(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||n_(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Qw)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=t_(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),v(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,n._queryObject,i)}sendUnlisten_(n,i,r,o){this.log_("Unlisten on "+n+" for "+i);let s={p:n},a="n";o&&(s.q=r,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,o){let s={p:i,d:r};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,i,r,o){this.putInternal("p",n,i,r,o)}merge(n,i,r,o){this.putInternal("m",n,i,r,o)}putInternal(n,i,r,o,s){this.initConnection_();let a={p:i,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+me(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):jp("Unrecognized action received from server: "+me(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){v(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ws,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=ws,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vk&&(this.reconnectDelay_=ws),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_k)}this.onConnectStatus_(!1)}establishConnection_(){return xe(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,r())},u=function(h){v(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Te("getToken() completed but was canceled"):(Te("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new qp(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,p=>{Be(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(yk)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Be(h),c())}}})}interrupt(n){Te("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Te("Resuming connection for reason: "+n),delete this.interruptReasons_[n],la(this.interruptReasons_)&&(this.reconnectDelay_=ws,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(s=>$g(s)).join("$"):r="default";let o=this.removeListen_(n,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,i){let r=new Q(n).toString(),o;if(this.listens.has(r)){let s=this.listens.get(r);o=s.get(i),s.delete(i),s.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(n,i){Te("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Yw&&(this.reconnectDelay_=Qw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){Te("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Yw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";Bt()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+Ug.replace(/\./g,"-")]=1,Tu()?n["framework.cordova"]=1:Zm()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Sc.getInstance().currentlyOnline();return la(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),W=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Kr=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let i=new W(Jn,t),r=new W(Jn,n);return this.compare(i,r)!==0}minPost(){return W.MIN}};var yc,Ic=class extends Kr{static get __EMPTY_NODE(){return yc}static set __EMPTY_NODE(t){yc=t}compare(t,n){return Fi(t.name,n.name)}isDefinedOn(t){throw Gi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return W.MIN}maxPost(){return new W(En,yc)}makePost(t,n){return v(typeof t=="string","KeyIndex indexValue must always be a string."),new W(t,yc)}toString(){return".key"}},Jt=new Ic;var Wr=class{constructor(t,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?i(t.key,n):1,r&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Pt=(()=>{class e{constructor(n,i,r,o,s){this.key=n,this.value=i,this.color=r??e.RED,this.left=o??Ct.EMPTY_NODE,this.right=s??Ct.EMPTY_NODE}copy(n,i,r,o,s){return new e(n??this.key,i??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let o=this,s=r(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,i,r),null):s===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ct.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,o;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return Ct.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Yp=class{copy(t,n,i,r,o){return this}insert(t,n,i){return new Pt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ct=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Pt.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Pt.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Wr(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Wr(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Wr(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Wr(this.root_,null,this.comparator_,!0,t)}};Ct.EMPTY_NODE=new Yp;function bk(e,t){return Fi(e.name,t.name)}function Kg(e,t){return Fi(e,t)}var Zp;function wk(e){Zp=e}var VD=function(e){return typeof e=="number"?"number:"+yD(e):"string:"+e},BD=function(e){if(e.isLeafNode()){let t=e.val();v(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ut(t,".sv"),"Priority must be a string or number.")}else v(e===Zp||e.isEmpty(),"priority of unexpected type.");v(e===Zp||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Zw,Qr=(()=>{class e{constructor(n,i=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,v(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),BD(this.priorityNode_)}static set __childrenNodeConstructor(n){Zw=n}static get __childrenNodeConstructor(){return Zw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return G(n)?this:$(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=$(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(v(r!==".priority"||Xn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(re(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+VD(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=yD(this.value_):n+=this.value_,this.lazyHash_=mD(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(v(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(i),s=e.VALUE_TYPE_ORDER.indexOf(r);return v(o>=0,"Unknown leaf type: "+i),v(s>=0,"Unknown leaf type: "+r),o===s?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),jD,UD;function Dk(e){jD=e}function Ck(e){UD=e}var Jp=class extends Kr{compare(t,n){let i=t.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Fi(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return W.MIN}maxPost(){return new W(En,new Qr("[PRIORITY-POST]",UD))}makePost(t,n){let i=jD(t);return new W(n,new Qr("[PRIORITY-POST]",i))}toString(){return".priority"}},oe=new Jp;var Ek=Math.log(2),Xp=class{constructor(t){let n=o=>parseInt(Math.log(o)/Ek,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Tc=function(e,t,n,i){e.sort(t);let r=function(l,c){let u=c-l,d,h;if(u===0)return null;if(u===1)return d=e[l],h=n?n(d):d,new Pt(h,d.node,Pt.BLACK,null,null);{let f=parseInt(u/2,10)+l,p=r(l,f),_=r(f+1,c);return d=e[f],h=n?n(d):d,new Pt(h,d.node,Pt.BLACK,p,_)}},o=function(l){let c=null,u=null,d=e.length,h=function(p,_){let y=d-p,M=d;d-=p;let k=r(y+1,M),E=e[y],V=n?n(E):E;f(new Pt(V,E.node,_,null,k))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){let _=l.nextBitIsOne(),y=Math.pow(2,l.count-(p+1));_?h(y,Pt.BLACK):(h(y,Pt.BLACK),h(y,Pt.RED))}return u},s=new Xp(e.length),a=o(s);return new Ct(i||t,a)};var xp,Gr={},Yr=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return v(Gr&&oe,"ChildrenNode.ts has not been loaded"),xp=xp||new e({".priority":Gr},{".priority":oe}),xp}get(t){let n=In(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Ct?n:null}hasIndex(t){return ut(this.indexSet_,t.toString())}addIndex(t,n){v(t!==Jt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,o=n.getIterator(W.Wrap),s=o.getNext();for(;s;)r=r||t.isDefinedOn(s.node),i.push(s),s=o.getNext();let a;r?a=Tc(i,t.getCompare()):a=Gr;let l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;let u=Object.assign({},this.indexes_);return u[l]=a,new e(u,c)}addToIndexes(t,n){let i=yo(this.indexes_,(r,o)=>{let s=In(this.indexSet_,o);if(v(s,"Missing index implementation for "+o),r===Gr)if(s.isDefinedOn(t.node)){let a=[],l=n.getIterator(W.Wrap),c=l.getNext();for(;c;)c.name!==t.name&&a.push(c),c=l.getNext();return a.push(t),Tc(a,s.getCompare())}else return Gr;else{let a=n.get(t.name),l=r;return a&&(l=l.remove(new W(t.name,a))),l.insert(t,t.node)}});return new e(i,this.indexSet_)}removeFromIndexes(t,n){let i=yo(this.indexes_,r=>{if(r===Gr)return r;{let o=n.get(t.name);return o?r.remove(new W(t.name,o)):r}});return new e(i,this.indexSet_)}};var Ds,P=(()=>{class e{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&BD(this.priorityNode_),this.children_.isEmpty()&&v(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ds||(Ds=new e(new Ct(Kg),null,Yr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ds}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?Ds:i}}getChild(n){let i=$(n);return i===null?this:this.getImmediateChild(i).getChild(re(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(v(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new W(n,i),o,s;i.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(n,i),s=this.indexMap_.addToIndexes(r,this.children_));let a=o.isEmpty()?Ds:this.priorityNode_;return new e(o,a,s)}}updateChild(n,i){let r=$(n);if(r===null)return i;{v($(n)!==".priority"||Xn(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(re(n),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,o=0,s=!0;if(this.forEachChild(oe,(a,l)=>{i[a]=l.val(n),r++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*r){let a=[];for(let l in i)a[l]=i[l];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+VD(this.getPriority().val())+":"),this.forEachChild(oe,(i,r)=>{let o=r.hash();o!==""&&(n+=":"+i+":"+o)}),this.lazyHash_=n===""?"":mD(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let o=this.resolveIndex_(r);if(o){let s=o.getPredecessorKey(new W(n,i));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new W(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new W(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,W.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,W.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===zs?-1:0}withIndex(n){if(n===Jt||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Jt||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(oe),o=i.getIterator(oe),s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Jt?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),eg=class extends P{constructor(){super(new Ct(Kg),P.EMPTY_NODE,Yr.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return P.EMPTY_NODE}isEmpty(){return!1}},zs=new eg;Object.defineProperties(W,{MIN:{value:new W(Jn,P.EMPTY_NODE)},MAX:{value:new W(En,zs)}});Ic.__EMPTY_NODE=P.EMPTY_NODE;Qr.__childrenNodeConstructor=P;wk(zs);Ck(zs);var Sk=!0;function ue(e,t=null){if(e===null)return P.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),v(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Qr(n,ue(t))}if(!(e instanceof Array)&&Sk){let n=[],i=!1;if(Me(e,(s,a)=>{if(s.substring(0,1)!=="."){let l=ue(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new W(s,l)))}}),n.length===0)return P.EMPTY_NODE;let o=Tc(n,bk,s=>s.name,Kg);if(i){let s=Tc(n,oe.getCompare());return new P(o,ue(t),new Yr({".priority":s},{".priority":oe}))}else return new P(o,ue(t),Yr.Default)}else{let n=P.EMPTY_NODE;return Me(e,(i,r)=>{if(ut(e,i)&&i.substring(0,1)!=="."){let o=ue(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(ue(t))}}Dk(ue);var Rs=class extends Kr{constructor(t){super(),this.indexPath_=t,v(!G(t)&&$(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let i=this.extractChild(t.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Fi(t.name,n.name):o}makePost(t,n){let i=ue(t),r=P.EMPTY_NODE.updateChild(this.indexPath_,i);return new W(n,r)}maxPost(){let t=P.EMPTY_NODE.updateChild(this.indexPath_,zs);return new W(En,t)}toString(){return Ns(this.indexPath_,0).join("/")}};var tg=class extends Kr{compare(t,n){let i=t.node.compareTo(n.node);return i===0?Fi(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return W.MIN}maxPost(){return W.MAX}makePost(t,n){let i=ue(t);return new W(n,i)}toString(){return".value"}},Qg=new tg;function HD(e){return{type:"value",snapshotNode:e}}function Zr(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Os(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function xs(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function Ik(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var ks=class{constructor(t){this.index_=t}updateChild(t,n,i,r,o,s){v(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(s!=null&&(i.isEmpty()?t.hasChild(n)?s.trackChildChange(Os(n,a)):v(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Zr(n,i)):s.trackChildChange(xs(n,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(t,n,i){return i!=null&&(t.isLeafNode()||t.forEachChild(oe,(r,o)=>{n.hasChild(r)||i.trackChildChange(Os(r,o))}),n.isLeafNode()||n.forEachChild(oe,(r,o)=>{if(t.hasChild(r)){let s=t.getImmediateChild(r);s.equals(o)||i.trackChildChange(xs(r,o,s))}else i.trackChildChange(Zr(r,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?P.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Mc=class e{constructor(t){this.indexedFilter_=new ks(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&i}updateChild(t,n,i,r,o,s){return this.matches(new W(n,i))||(i=P.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,i,r,o,s)}updateFullNode(t,n,i){n.isLeafNode()&&(n=P.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(P.EMPTY_NODE);let o=this;return n.forEachChild(oe,(s,a)=>{o.matches(new W(s,a))||(r=r.updateImmediateChild(s,P.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var ng=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{let i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Mc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,i,r,o,s){return this.rangedFilter_.matches(new W(n,i))||(i=P.EMPTY_NODE),t.getImmediateChild(n).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,i,r,o,s):this.fullLimitUpdateChild_(t,n,i,o,s)}updateFullNode(t,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=P.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=P.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(P.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:r=r.updateImmediateChild(a.name,P.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,i,r,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(h,f)=>d(f,h)}else s=this.index_.getCompare();let a=t;v(a.numChildren()===this.limit_,"");let l=new W(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:s(h,l);if(u&&!i.isEmpty()&&f>=0)return o?.trackChildChange(xs(n,i,d)),a.updateImmediateChild(n,i);{o?.trackChildChange(Os(n,d));let _=a.updateImmediateChild(n,P.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o?.trackChildChange(Zr(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return i.isEmpty()?t:u&&s(c,l)>=0?(o!=null&&(o.trackChildChange(Os(c.name,c.node)),o.trackChildChange(Zr(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,P.EMPTY_NODE)):t}};var Ps=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return v(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return v(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Jn}hasEnd(){return this.endSet_}getIndexEndValue(){return v(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return v(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:En}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return v(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function Tk(e){return e.loadsAllData()?new ks(e.getIndex()):e.hasLimit()?new ng(e):new Mc(e)}function Mk(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function Ak(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function ig(e,t,n){let i=e.copy();return i.startSet_=!0,t===void 0&&(t=null),i.indexStartValue_=t,n!=null?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function Nk(e,t,n){let i;return e.index_===Jt||n?i=ig(e,t,n):i=ig(e,t,En),i.startAfterSet_=!0,i}function rg(e,t,n){let i=e.copy();return i.endSet_=!0,t===void 0&&(t=null),i.indexEndValue_=t,n!==void 0?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function Rk(e,t,n){let i;return e.index_===Jt||n?i=rg(e,t,n):i=rg(e,t,Jn),i.endBeforeSet_=!0,i}function qc(e,t){let n=e.copy();return n.index_=t,n}function Jw(e){let t={};if(e.isDefault())return t;let n;if(e.index_===oe?n="$priority":e.index_===Qg?n="$value":e.index_===Jt?n="$key":(v(e.index_ instanceof Rs,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=me(n),e.startSet_){let i=e.startAfterSet_?"startAfter":"startAt";t[i]=me(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+me(e.indexStartName_))}if(e.endSet_){let i=e.endBeforeSet_?"endBefore":"endAt";t[i]=me(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+me(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Xw(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==oe&&(t.i=e.index_.toString()),t}var og=class e extends Cc{constructor(t,n,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Gs("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(v(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,i,r){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,i),a={};this.listens_[s]=a;let l=Jw(t._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(o,d,!1,i),In(this.listens_,s)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",r(h,null)}})}unlisten(t,n){let i=e.getListenId_(t,n);delete this.listens_[i]}get(t){let n=Jw(t._queryParams),i=t._path.toString(),r=new De;return this.restRequest_(i+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+i_(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=aa(a.responseText)}catch{Be("Failed to parse JSON response for "+s+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Be("Got unsuccessful REST response for "+s+" Status: "+a.status),i(a.status);i=null}},a.open("GET",s,!0),a.send()})}};var sg=class{constructor(){this.rootNode_=P.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function Ac(){return{value:null,children:new Map}}function io(e,t,n){if(G(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let i=$(t);e.children.has(i)||e.children.set(i,Ac());let r=e.children.get(i);t=re(t),io(r,t,n)}}function ag(e,t){if(G(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;{let n=e.value;return e.value=null,n.forEachChild(oe,(i,r)=>{io(e,new Q(i),r)}),ag(e,t)}}else if(e.children.size>0){let n=$(t);return t=re(t),e.children.has(n)&&ag(e.children.get(n),t)&&e.children.delete(n),e.children.size===0}else return!0}function lg(e,t,n){e.value!==null?n(t,e.value):Ok(e,(i,r)=>{let o=new Q(t.toString()+"/"+i);lg(r,o,n)})}function Ok(e,t){e.children.forEach((n,i)=>{t(i,n)})}var cg=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Me(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=t,n}};var eD=10*1e3,xk=30*1e3,kk=5*60*1e3,ug=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new cg(t);let i=eD+(xk-eD)*Math.random();Es(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),n={},i=!1;Me(t,(r,o)=>{o>0&&ut(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),Es(this.reportStats_.bind(this),Math.floor(Math.random()*2*kk))}};var Zt=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Zt||{});function Yg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Zg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Jg(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var dg=class e{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=Zt.ACK_USER_WRITE,this.source=Yg()}operationForChild(t){if(G(this.path)){if(this.affectedTree.value!=null)return v(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Q(t));return new e(K(),n,this.revert)}}else return v($(this.path)===t,"operationForChild called for unrelated child."),new e(re(this.path),this.affectedTree,this.revert)}};var Nc=class e{constructor(t,n){this.source=t,this.path=n,this.type=Zt.LISTEN_COMPLETE}operationForChild(t){return G(this.path)?new e(this.source,K()):new e(this.source,re(this.path))}};var Jr=class e{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=Zt.OVERWRITE}operationForChild(t){return G(this.path)?new e(this.source,K(),this.snap.getImmediateChild(t)):new e(this.source,re(this.path),this.snap)}};var Fs=class e{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=Zt.MERGE}operationForChild(t){if(G(this.path)){let n=this.children.subtree(new Q(t));return n.isEmpty()?null:n.value?new Jr(this.source,K(),n.value):new e(this.source,K(),n)}else return v($(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var en=class{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(G(t))return this.isFullyInitialized()&&!this.filtered_;let n=$(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var hg=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function Pk(e,t,n,i){let r=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(Ik(s.childName,s.snapshotNode))}),Cs(e,r,"child_removed",t,i,n),Cs(e,r,"child_added",t,i,n),Cs(e,r,"child_moved",o,i,n),Cs(e,r,"child_changed",t,i,n),Cs(e,r,"value",t,i,n),r}function Cs(e,t,n,i,r,o){let s=i.filter(a=>a.type===n);s.sort((a,l)=>Lk(e,a,l)),s.forEach(a=>{let l=Fk(e,a,o);r.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(l,e.query_))})})}function Fk(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Lk(e,t,n){if(t.childName==null||n.childName==null)throw Gi("Should only compare child_ events.");let i=new W(t.childName,t.snapshotNode),r=new W(n.childName,n.snapshotNode);return e.index_.compare(i,r)}function Kc(e,t){return{eventCache:e,serverCache:t}}function Is(e,t,n,i){return Kc(new en(t,n,i),e.serverCache)}function $D(e,t,n,i){return Kc(e.eventCache,new en(t,n,i))}function Rc(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Pi(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var kp,Vk=()=>(kp||(kp=new Ct(Fx)),kp),Ge=class e{constructor(t,n=Vk()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return Me(t,(i,r)=>{n=n.set(new Q(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:K(),value:this.value};if(G(t))return null;{let i=$(t),r=this.children.get(i);if(r!==null){let o=r.findRootMostMatchingPathAndValue(re(t),n);return o!=null?{path:ae(new Q(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(G(t))return this;{let n=$(t),i=this.children.get(n);return i!==null?i.subtree(re(t)):new e(null)}}set(t,n){if(G(t))return new e(n,this.children);{let i=$(t),o=(this.children.get(i)||new e(null)).set(re(t),n),s=this.children.insert(i,o);return new e(this.value,s)}}remove(t){if(G(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=$(t),i=this.children.get(n);if(i){let r=i.remove(re(t)),o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(G(t))return this.value;{let n=$(t),i=this.children.get(n);return i?i.get(re(t)):null}}setTree(t,n){if(G(t))return n;{let i=$(t),o=(this.children.get(i)||new e(null)).setTree(re(t),n),s;return o.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,o),new e(this.value,s)}}fold(t){return this.fold_(K(),t)}fold_(t,n){let i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(ae(t,r),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,K(),n)}findOnPath_(t,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if(G(t))return null;{let o=$(t),s=this.children.get(o);return s?s.findOnPath_(re(t),ae(n,o),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,K(),n)}foreachOnPath_(t,n,i){if(G(t))return this;{this.value&&i(n,this.value);let r=$(t),o=this.children.get(r);return o?o.foreachOnPath_(re(t),ae(n,r),i):new e(null)}}foreach(t){this.foreach_(K(),t)}foreach_(t,n){this.children.inorderTraversal((i,r)=>{r.foreach_(ae(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}};var Ft=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new Ge(null))}};function Ts(e,t,n){if(G(t))return new Ft(new Ge(n));{let i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){let r=i.path,o=i.value,s=$e(r,t);return o=o.updateChild(s,n),new Ft(e.writeTree_.set(r,o))}else{let r=new Ge(n),o=e.writeTree_.setTree(t,r);return new Ft(o)}}}function fg(e,t,n){let i=e;return Me(n,(r,o)=>{i=Ts(i,ae(t,r),o)}),i}function tD(e,t){if(G(t))return Ft.empty();{let n=e.writeTree_.setTree(t,new Ge(null));return new Ft(n)}}function pg(e,t){return Li(e,t)!=null}function Li(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild($e(n.path,t)):null}function nD(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(oe,(i,r)=>{t.push(new W(i,r))}):e.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new W(i,r.value))}),t}function Yn(e,t){if(G(t))return e;{let n=Li(e,t);return n!=null?new Ft(new Ge(n)):new Ft(e.writeTree_.subtree(t))}}function gg(e){return e.writeTree_.isEmpty()}function Xr(e,t){return GD(K(),e.writeTree_,t)}function GD(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((r,o)=>{r===".priority"?(v(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=GD(ae(e,r),o,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(ae(e,".priority"),i)),n}}function Qc(e,t){return KD(t,e)}function Bk(e,t,n,i,r){v(i>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=Ts(e.visibleWrites,t,n)),e.lastWriteId=i}function jk(e,t,n,i){v(i>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:i,visible:!0}),e.visibleWrites=fg(e.visibleWrites,t,n),e.lastWriteId=i}function Uk(e,t){for(let n=0;n<e.allWrites.length;n++){let i=e.allWrites[n];if(i.writeId===t)return i}return null}function Hk(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);v(n>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,o=!1,s=e.allWrites.length-1;for(;r&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&$k(a,i.path)?r=!1:Dt(i.path,a.path)&&(o=!0)),s--}if(r){if(o)return Gk(e),!0;if(i.snap)e.visibleWrites=tD(e.visibleWrites,i.path);else{let a=i.children;Me(a,l=>{e.visibleWrites=tD(e.visibleWrites,ae(i.path,l))})}return!0}else return!1}function $k(e,t){if(e.snap)return Dt(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Dt(ae(e.path,n),t))return!0;return!1}function Gk(e){e.visibleWrites=zD(e.allWrites,zk,K()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function zk(e){return e.visible}function zD(e,t,n){let i=Ft.empty();for(let r=0;r<e.length;++r){let o=e[r];if(t(o)){let s=o.path,a;if(o.snap)Dt(n,s)?(a=$e(n,s),i=Ts(i,a,o.snap)):Dt(s,n)&&(a=$e(s,n),i=Ts(i,K(),o.snap.getChild(a)));else if(o.children){if(Dt(n,s))a=$e(n,s),i=fg(i,a,o.children);else if(Dt(s,n))if(a=$e(s,n),G(a))i=fg(i,K(),o.children);else{let l=In(o.children,$(a));if(l){let c=l.getChild(re(a));i=Ts(i,K(),c)}}}else throw Gi("WriteRecord should have .snap or .children")}}return i}function WD(e,t,n,i,r){if(!i&&!r){let o=Li(e.visibleWrites,t);if(o!=null)return o;{let s=Yn(e.visibleWrites,t);if(gg(s))return n;if(n==null&&!pg(s,K()))return null;{let a=n||P.EMPTY_NODE;return Xr(s,a)}}}else{let o=Yn(e.visibleWrites,t);if(!r&&gg(o))return n;if(!r&&n==null&&!pg(o,K()))return null;{let s=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Dt(c.path,t)||Dt(t,c.path))},a=zD(e.allWrites,s,t),l=n||P.EMPTY_NODE;return Xr(a,l)}}}function Wk(e,t,n){let i=P.EMPTY_NODE,r=Li(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(oe,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(n){let o=Yn(e.visibleWrites,t);return n.forEachChild(oe,(s,a)=>{let l=Xr(Yn(o,new Q(s)),a);i=i.updateImmediateChild(s,l)}),nD(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}else{let o=Yn(e.visibleWrites,t);return nD(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}}function qk(e,t,n,i,r){v(i||r,"Either existingEventSnap or existingServerSnap must exist");let o=ae(t,n);if(pg(e.visibleWrites,o))return null;{let s=Yn(e.visibleWrites,o);return gg(s)?r.getChild(n):Xr(s,r.getChild(n))}}function Kk(e,t,n,i){let r=ae(t,n),o=Li(e.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){let s=Yn(e.visibleWrites,r);return Xr(s,i.getNode().getImmediateChild(n))}else return null}function Qk(e,t){return Li(e.visibleWrites,t)}function Yk(e,t,n,i,r,o,s){let a,l=Yn(e.visibleWrites,t),c=Li(l,K());if(c!=null)a=c;else if(n!=null)a=Xr(l,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s),f=h.getNext();for(;f&&u.length<r;)d(f,i)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Zk(){return{visibleWrites:Ft.empty(),allWrites:[],lastWriteId:-1}}function Oc(e,t,n,i){return WD(e.writeTree,e.treePath,t,n,i)}function Xg(e,t){return Wk(e.writeTree,e.treePath,t)}function iD(e,t,n,i){return qk(e.writeTree,e.treePath,t,n,i)}function xc(e,t){return Qk(e.writeTree,ae(e.treePath,t))}function Jk(e,t,n,i,r,o){return Yk(e.writeTree,e.treePath,t,n,i,r,o)}function em(e,t,n){return Kk(e.writeTree,e.treePath,t,n)}function qD(e,t){return KD(ae(e.treePath,t),e.writeTree)}function KD(e,t){return{treePath:e,writeTree:t}}var mg=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,i=t.childName;v(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),v(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,xs(i,t.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Os(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,Zr(i,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,xs(i,t.snapshotNode,r.oldSnap));else throw Gi("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var _g=class{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}},QD=new _g,Ls=class{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new en(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return em(this.writes_,t,i)}}getChildAfterChild(t,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Pi(this.viewCache_),o=Jk(this.writes_,r,n,1,i,t);return o.length===0?null:o[0]}};function Xk(e){return{filter:e}}function eP(e,t){v(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),v(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function tP(e,t,n,i,r){let o=new mg,s,a;if(n.type===Zt.OVERWRITE){let c=n;c.source.fromUser?s=vg(e,t,c.path,c.snap,i,r,o):(v(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!G(c.path),s=kc(e,t,c.path,c.snap,i,r,a,o))}else if(n.type===Zt.MERGE){let c=n;c.source.fromUser?s=iP(e,t,c.path,c.children,i,r,o):(v(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),s=yg(e,t,c.path,c.children,i,r,a,o))}else if(n.type===Zt.ACK_USER_WRITE){let c=n;c.revert?s=sP(e,t,c.path,i,r,o):s=rP(e,t,c.path,c.affectedTree,i,r,o)}else if(n.type===Zt.LISTEN_COMPLETE)s=oP(e,t,n.path,i,o);else throw Gi("Unknown operation type: "+n.type);let l=o.getChanges();return nP(t,s,l),{viewCache:s,changes:l}}function nP(e,t,n){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Rc(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(HD(Rc(t)))}}function YD(e,t,n,i,r,o){let s=t.eventCache;if(xc(i,n)!=null)return t;{let a,l;if(G(n))if(v(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let c=Pi(t),u=c instanceof P?c:P.EMPTY_NODE,d=Xg(i,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let c=Oc(i,Pi(t));a=e.filter.updateFullNode(t.eventCache.getNode(),c,o)}else{let c=$(n);if(c===".priority"){v(Xn(n)===1,"Can't have a priority with additional path components");let u=s.getNode();l=t.serverCache.getNode();let d=iD(i,n,u,l);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=re(n),d;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();let h=iD(i,n,s.getNode(),l);h!=null?d=s.getNode().getImmediateChild(c).updateChild(u,h):d=s.getNode().getImmediateChild(c)}else d=em(i,c,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),c,d,u,r,o):a=s.getNode()}}return Is(t,a,s.isFullyInitialized()||G(n),e.filter.filtersNodes())}}function kc(e,t,n,i,r,o,s,a){let l=t.serverCache,c,u=s?e.filter:e.filter.getIndexedFilter();if(G(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){let f=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),f,null)}else{let f=$(n);if(!l.isCompleteForPath(n)&&Xn(n)>1)return t;let p=re(n),y=l.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?c=u.updatePriority(l.getNode(),y):c=u.updateChild(l.getNode(),f,y,p,QD,null)}let d=$D(t,c,l.isFullyInitialized()||G(n),u.filtersNodes()),h=new Ls(r,d,o);return YD(e,d,n,r,h,a)}function vg(e,t,n,i,r,o,s){let a=t.eventCache,l,c,u=new Ls(r,t,o);if(G(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,s),l=Is(t,c,!0,e.filter.filtersNodes());else{let d=$(n);if(d===".priority")c=e.filter.updatePriority(t.eventCache.getNode(),i),l=Is(t,c,a.isFullyInitialized(),a.isFiltered());else{let h=re(n),f=a.getNode().getImmediateChild(d),p;if(G(h))p=i;else{let _=u.getCompleteChild(d);_!=null?zg(h)===".priority"&&_.getChild(FD(h)).isEmpty()?p=_:p=_.updateChild(h,i):p=P.EMPTY_NODE}if(f.equals(p))l=t;else{let _=e.filter.updateChild(a.getNode(),d,p,h,u,s);l=Is(t,_,a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function rD(e,t){return e.eventCache.isCompleteForChild(t)}function iP(e,t,n,i,r,o,s){let a=t;return i.foreach((l,c)=>{let u=ae(n,l);rD(t,$(u))&&(a=vg(e,a,u,c,r,o,s))}),i.foreach((l,c)=>{let u=ae(n,l);rD(t,$(u))||(a=vg(e,a,u,c,r,o,s))}),a}function oD(e,t,n){return n.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function yg(e,t,n,i,r,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;G(n)?c=i:c=new Ge(null).setTree(n,i);let u=t.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=t.serverCache.getNode().getImmediateChild(d),p=oD(e,f,h);l=kc(e,l,new Q(d),p,r,o,s,a)}}),c.children.inorderTraversal((d,h)=>{let f=!t.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let p=t.serverCache.getNode().getImmediateChild(d),_=oD(e,p,h);l=kc(e,l,new Q(d),_,r,o,s,a)}}),l}function rP(e,t,n,i,r,o,s){if(xc(r,n)!=null)return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(i.value!=null){if(G(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return kc(e,t,n,l.getNode().getChild(n),r,o,a,s);if(G(n)){let c=new Ge(null);return l.getNode().forEachChild(Jt,(u,d)=>{c=c.set(new Q(u),d)}),yg(e,t,n,c,r,o,a,s)}else return t}else{let c=new Ge(null);return i.foreach((u,d)=>{let h=ae(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),yg(e,t,n,c,r,o,a,s)}}function oP(e,t,n,i,r){let o=t.serverCache,s=$D(t,o.getNode(),o.isFullyInitialized()||G(n),o.isFiltered());return YD(e,s,n,i,QD,r)}function sP(e,t,n,i,r,o){let s;if(xc(i,n)!=null)return t;{let a=new Ls(i,t,r),l=t.eventCache.getNode(),c;if(G(n)||$(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=Oc(i,Pi(t));else{let d=t.serverCache.getNode();v(d instanceof P,"serverChildren would be complete if leaf node"),u=Xg(i,d)}u=u,c=e.filter.updateFullNode(l,u,o)}else{let u=$(n),d=em(i,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=e.filter.updateChild(l,u,d,re(n),a,o):t.eventCache.getNode().hasChild(u)?c=e.filter.updateChild(l,u,P.EMPTY_NODE,re(n),a,o):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Oc(i,Pi(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||xc(i,K())!=null,Is(t,c,s,e.filter.filtersNodes())}}var bg=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new ks(i.getIndex()),o=Tk(i);this.processor_=Xk(o);let s=n.serverCache,a=n.eventCache,l=r.updateFullNode(P.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(P.EMPTY_NODE,a.getNode(),null),u=new en(l,s.isFullyInitialized(),r.filtersNodes()),d=new en(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Kc(d,u),this.eventGenerator_=new hg(this.query_)}get query(){return this.query_}};function aP(e){return e.viewCache_.serverCache.getNode()}function lP(e){return Rc(e.viewCache_)}function cP(e,t){let n=Pi(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!G(t)&&!n.getImmediateChild($(t)).isEmpty())?n.getChild(t):null}function sD(e){return e.eventRegistrations_.length===0}function uP(e,t){e.eventRegistrations_.push(t)}function aD(e,t,n){let i=[];if(n){v(t==null,"A cancel should cancel all event registrations.");let r=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,r);s&&i.push(s)})}if(t){let r=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))r.push(s);else if(t.hasAnyCallback()){r=r.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=r}else e.eventRegistrations_=[];return i}function lD(e,t,n,i){t.type===Zt.MERGE&&t.source.queryId!==null&&(v(Pi(e.viewCache_),"We should always have a full cache before handling merges"),v(Rc(e.viewCache_),"Missing event cache, even though we have a server cache"));let r=e.viewCache_,o=tP(e.processor_,r,t,n,i);return eP(e.processor_,o.viewCache),v(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,ZD(e,o.changes,o.viewCache.eventCache.getNode(),null)}function dP(e,t){let n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(oe,(o,s)=>{i.push(Zr(o,s))}),n.isFullyInitialized()&&i.push(HD(n.getNode())),ZD(e,i,n.getNode(),t)}function ZD(e,t,n,i){let r=i?[i]:e.eventRegistrations_;return Pk(e.eventGenerator_,t,n,r)}var Pc,Fc=class{constructor(){this.views=new Map}};function hP(e){v(!Pc,"__referenceConstructor has already been defined"),Pc=e}function fP(){return v(Pc,"Reference.ts has not been loaded"),Pc}function pP(e){return e.views.size===0}function tm(e,t,n,i){let r=t.source.queryId;if(r!==null){let o=e.views.get(r);return v(o!=null,"SyncTree gave us an op for an invalid query."),lD(o,t,n,i)}else{let o=[];for(let s of e.views.values())o=o.concat(lD(s,t,n,i));return o}}function JD(e,t,n,i,r){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=Oc(n,r?i:null),l=!1;a?l=!0:i instanceof P?(a=Xg(n,i),l=!1):(a=P.EMPTY_NODE,l=!1);let c=Kc(new en(a,l,!1),new en(i,r,!1));return new bg(t,c)}return s}function gP(e,t,n,i,r,o){let s=JD(e,t,i,r,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),uP(s,n),dP(s,n)}function mP(e,t,n,i){let r=t._queryIdentifier,o=[],s=[],a=ei(e);if(r==="default")for(let[l,c]of e.views.entries())s=s.concat(aD(c,n,i)),sD(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{let l=e.views.get(r);l&&(s=s.concat(aD(l,n,i)),sD(l)&&(e.views.delete(r),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!ei(e)&&o.push(new(fP())(t._repo,t._path)),{removed:o,events:s}}function XD(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Zn(e,t){let n=null;for(let i of e.views.values())n=n||cP(i,t);return n}function eC(e,t){if(t._queryParams.loadsAllData())return Yc(e);{let i=t._queryIdentifier;return e.views.get(i)}}function tC(e,t){return eC(e,t)!=null}function ei(e){return Yc(e)!=null}function Yc(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Lc;function _P(e){v(!Lc,"__referenceConstructor has already been defined"),Lc=e}function vP(){return v(Lc,"Reference.ts has not been loaded"),Lc}var yP=1,Vc=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ge(null),this.pendingWriteTree_=Zk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function nm(e,t,n,i,r){return Bk(e.pendingWriteTree_,t,n,i,r),r?ro(e,new Jr(Yg(),t,n)):[]}function bP(e,t,n,i){jk(e.pendingWriteTree_,t,n,i);let r=Ge.fromObject(n);return ro(e,new Fs(Yg(),t,r))}function Qn(e,t,n=!1){let i=Uk(e.pendingWriteTree_,t);if(Hk(e.pendingWriteTree_,t)){let o=new Ge(null);return i.snap!=null?o=o.set(K(),!0):Me(i.children,s=>{o=o.set(new Q(s),!0)}),ro(e,new dg(i.path,o,n))}else return[]}function Ws(e,t,n){return ro(e,new Jr(Zg(),t,n))}function wP(e,t,n){let i=Ge.fromObject(n);return ro(e,new Fs(Zg(),t,i))}function DP(e,t){return ro(e,new Nc(Zg(),t))}function CP(e,t,n){let i=im(e,n);if(i){let r=rm(i),o=r.path,s=r.queryId,a=$e(o,t),l=new Nc(Jg(s),a);return om(e,o,l)}else return[]}function Bc(e,t,n,i,r=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||tC(s,t))){let l=mP(s,t,n,i);pP(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let c=l.removed;if(a=l.events,!r){let u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(h,f)=>ei(f));if(u&&!d){let h=e.syncPointTree_.subtree(o);if(!h.isEmpty()){let f=IP(h);for(let p=0;p<f.length;++p){let _=f[p],y=_.query,M=oC(e,_);e.listenProvider_.startListening(Ms(y),Vs(e,y),M.hashFn,M.onComplete)}}}!d&&c.length>0&&!i&&(u?e.listenProvider_.stopListening(Ms(t),null):c.forEach(h=>{let f=e.queryToTagMap.get(Jc(h));e.listenProvider_.stopListening(Ms(h),f)}))}TP(e,c)}return a}function nC(e,t,n,i){let r=im(e,i);if(r!=null){let o=rm(r),s=o.path,a=o.queryId,l=$e(s,t),c=new Jr(Jg(a),l,n);return om(e,s,c)}else return[]}function EP(e,t,n,i){let r=im(e,i);if(r){let o=rm(r),s=o.path,a=o.queryId,l=$e(s,t),c=Ge.fromObject(n),u=new Fs(Jg(a),l,c);return om(e,s,u)}else return[]}function wg(e,t,n,i=!1){let r=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(r,(h,f)=>{let p=$e(h,r);o=o||Zn(f,p),s=s||ei(f)});let a=e.syncPointTree_.get(r);a?(s=s||ei(a),o=o||Zn(a,K())):(a=new Fc,e.syncPointTree_=e.syncPointTree_.set(r,a));let l;o!=null?l=!0:(l=!1,o=P.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((f,p)=>{let _=Zn(p,K());_&&(o=o.updateImmediateChild(f,_))}));let c=tC(a,t);if(!c&&!t._queryParams.loadsAllData()){let h=Jc(t);v(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=MP();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}let u=Qc(e.pendingWriteTree_,r),d=gP(a,t,n,u,o,l);if(!c&&!s&&!i){let h=eC(a,t);d=d.concat(AP(e,t,h))}return d}function Zc(e,t,n){let r=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let l=$e(s,t),c=Zn(a,l);if(c)return c});return WD(r,t,o,n,!0)}function SP(e,t){let n=t._path,i=null;e.syncPointTree_.foreachOnPath(n,(c,u)=>{let d=$e(c,n);i=i||Zn(u,d)});let r=e.syncPointTree_.get(n);r?i=i||Zn(r,K()):(r=new Fc,e.syncPointTree_=e.syncPointTree_.set(n,r));let o=i!=null,s=o?new en(i,!0,!1):null,a=Qc(e.pendingWriteTree_,t._path),l=JD(r,t,a,o?s.getNode():P.EMPTY_NODE,o);return lP(l)}function ro(e,t){return iC(t,e.syncPointTree_,null,Qc(e.pendingWriteTree_,K()))}function iC(e,t,n,i){if(G(e.path))return rC(e,t,n,i);{let r=t.get(K());n==null&&r!=null&&(n=Zn(r,K()));let o=[],s=$(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){let c=n?n.getImmediateChild(s):null,u=qD(i,s);o=o.concat(iC(a,l,c,u))}return r&&(o=o.concat(tm(r,e,i,n))),o}}function rC(e,t,n,i){let r=t.get(K());n==null&&r!=null&&(n=Zn(r,K()));let o=[];return t.children.inorderTraversal((s,a)=>{let l=n?n.getImmediateChild(s):null,c=qD(i,s),u=e.operationForChild(s);u&&(o=o.concat(rC(u,a,l,c)))}),r&&(o=o.concat(tm(r,e,i,n))),o}function oC(e,t){let n=t.query,i=Vs(e,n);return{hashFn:()=>(aP(t)||P.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?CP(e,n._path,i):DP(e,n._path);{let o=Bx(r,n);return Bc(e,n,null,o)}}}}function Vs(e,t){let n=Jc(t);return e.queryToTagMap.get(n)}function Jc(e){return e._path.toString()+"$"+e._queryIdentifier}function im(e,t){return e.tagToQueryMap.get(t)}function rm(e){let t=e.indexOf("$");return v(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Q(e.substr(0,t))}}function om(e,t,n){let i=e.syncPointTree_.get(t);v(i,"Missing sync point for query tag that we're tracking");let r=Qc(e.pendingWriteTree_,t);return tm(i,n,r,null)}function IP(e){return e.fold((t,n,i)=>{if(n&&ei(n))return[Yc(n)];{let r=[];return n&&(r=XD(n)),Me(i,(o,s)=>{r=r.concat(s)}),r}})}function Ms(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(vP())(e._repo,e._path):e}function TP(e,t){for(let n=0;n<t.length;++n){let i=t[n];if(!i._queryParams.loadsAllData()){let r=Jc(i),o=e.queryToTagMap.get(r);e.queryToTagMap.delete(r),e.tagToQueryMap.delete(o)}}}function MP(){return yP++}function AP(e,t,n){let i=t._path,r=Vs(e,t),o=oC(e,n),s=e.listenProvider_.startListening(Ms(t),r,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(i);if(r)v(!ei(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,u,d)=>{if(!G(c)&&u&&ei(u))return[Yc(u).query];{let h=[];return u&&(h=h.concat(XD(u).map(f=>f.query))),Me(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){let u=l[c];e.listenProvider_.stopListening(Ms(u),Vs(e,u))}}return s}var Dg=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},Cg=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=ae(this.path_,t);return new e(this.syncTree_,n)}node(){return Zc(this.syncTree_,this.path_)}},NP=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},cD=function(e,t,n){if(!e||typeof e!="object")return e;if(v(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return RP(e[".sv"],t,n);if(typeof e[".sv"]=="object")return OP(e[".sv"],t);v(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},RP=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:v(!1,"Unexpected server value: "+e)}},OP=function(e,t,n){e.hasOwnProperty("increment")||v(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;typeof i!="number"&&v(!1,"Unexpected increment value: "+i);let r=t.node();if(v(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let s=r.getValue();return typeof s!="number"?i:s+i},sC=function(e,t,n,i){return am(t,new Cg(n,e),i)},sm=function(e,t,n){return am(e,new Dg(t),n)};function am(e,t,n){let i=e.getPriority().val(),r=cD(i,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=cD(s.getValue(),t,n);return a!==s.getValue()||r!==s.getPriority().val()?new Qr(a,ue(r)):e}else{let s=e;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new Qr(r))),s.forEachChild(oe,(a,l)=>{let c=am(l,t.getImmediateChild(a),n);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}var Bs=class{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}};function Xc(e,t){let n=t instanceof Q?t:new Q(t),i=e,r=$(n);for(;r!==null;){let o=In(i.node.children,r)||{children:{},childCount:0};i=new Bs(r,i,o),n=re(n),r=$(n)}return i}function Vi(e){return e.node.value}function lm(e,t){e.node.value=t,Eg(e)}function aC(e){return e.node.childCount>0}function xP(e){return Vi(e)===void 0&&!aC(e)}function eu(e,t){Me(e.node.children,(n,i)=>{t(new Bs(n,e,i))})}function lC(e,t,n,i){n&&!i&&t(e),eu(e,r=>{lC(r,t,!0,i)}),n&&i&&t(e)}function kP(e,t,n){let i=n?e:e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function qs(e){return new Q(e.parent===null?e.name:qs(e.parent)+"/"+e.name)}function Eg(e){e.parent!==null&&PP(e.parent,e.name,e)}function PP(e,t,n){let i=xP(n),r=ut(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,Eg(e)):!i&&!r&&(e.node.children[t]=n.node,e.node.childCount++,Eg(e))}var FP=/[\[\].#$\/\u0000-\u001F\u007F]/,LP=/[\[\].#$\u0000-\u001F\u007F]/,Pp=10*1024*1024,tu=function(e){return typeof e=="string"&&e.length!==0&&!FP.test(e)},cC=function(e){return typeof e=="string"&&e.length!==0&&!LP.test(e)},VP=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),cC(e)},js=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Wc(e)||e&&typeof e=="object"&&ut(e,".sv")},tn=function(e,t,n,i){i&&t===void 0||Ks(qe(e,"value"),t,n)},Ks=function(e,t,n){let i=n instanceof Q?new Kp(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Oi(i));if(typeof t=="function")throw new Error(e+"contains a function "+Oi(i)+" with contents = "+t.toString());if(Wc(t))throw new Error(e+"contains "+t.toString()+" "+Oi(i));if(typeof t=="string"&&t.length>Pp/3&&bo(t)>Pp)throw new Error(e+"contains a string greater than "+Pp+" utf8 bytes "+Oi(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,o=!1;if(Me(t,(s,a)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!tu(s)))throw new Error(e+" contains an invalid key ("+s+") "+Oi(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);pk(i,s),Ks(e,a,i),gk(i)}),r&&o)throw new Error(e+' contains ".value" child '+Oi(i)+" in addition to actual children.")}},BP=function(e,t){let n,i;for(n=0;n<t.length;n++){i=t[n];let o=Ns(i);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!tu(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(fk);let r=null;for(n=0;n<t.length;n++){if(i=t[n],r!==null&&Dt(r,i))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},uC=function(e,t,n,i){if(i&&t===void 0)return;let r=qe(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");let o=[];Me(t,(s,a)=>{let l=new Q(s);if(Ks(r,a,ae(n,l)),zg(l)===".priority"&&!js(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),BP(r,o)},cm=function(e,t,n){if(!(n&&t===void 0)){if(Wc(t))throw new Error(qe(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!js(t))throw new Error(qe(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Qs=function(e,t,n,i){if(!(i&&n===void 0)&&!tu(n))throw new Error(qe(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},oo=function(e,t,n,i){if(!(i&&n===void 0)&&!cC(n))throw new Error(qe(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},jP=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),oo(e,t,n,i)},ot=function(e,t){if($(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},dC=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!tu(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!VP(n))throw new Error(qe(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Sg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function nu(e,t){let n=null;for(let i=0;i<t.length;i++){let r=t[i],o=r.getPath();n!==null&&!Wg(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&e.eventLists_.push(n)}function hC(e,t,n){nu(e,n),fC(e,i=>Wg(i,t))}function st(e,t,n){nu(e,n),fC(e,i=>Dt(i,t)||Dt(t,i))}function fC(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){let r=e.eventLists_[i];if(r){let o=r.path;t(o)?(UP(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function UP(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let i=n.getEventRunner();ki&&Te("event: "+n.toString()),no(i)}}}var pC="repo_interrupt",HP=25,Ig=class{constructor(t,n,i,r){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ac(),this.transactionQueueTree_=new Bs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function $P(e,t,n){if(e.stats_=Gg(e.repoInfo_),e.forceRestClient_||$x())e.server_=new og(e.repoInfo_,(i,r,o,s)=>{uD(e,i,r,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>dD(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{me(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new qg(e.repoInfo_,t,(i,r,o,s)=>{uD(e,i,r,o,s)},i=>{dD(e,i)},i=>{GP(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=zx(e.repoInfo_,()=>new ug(e.stats_,e.server_)),e.infoData_=new sg,e.infoSyncTree_=new Vc({startListening:(i,r,o,s)=>{let a=[],l=e.infoData_.getNode(i._path);return l.isEmpty()||(a=Ws(e.infoSyncTree_,i._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),um(e,"connected",!1),e.serverSyncTree_=new Vc({startListening:(i,r,o,s)=>(e.server_.listen(i,o,r,(a,l)=>{let c=s(a,l);st(e.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{e.server_.unlisten(i,r)}})}function gC(e){let n=e.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ys(e){return NP({timestamp:gC(e)})}function uD(e,t,n,i,r){e.dataUpdateCount++;let o=new Q(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(r)if(i){let l=yo(n,c=>ue(c));s=EP(e.serverSyncTree_,o,l,r)}else{let l=ue(n);s=nC(e.serverSyncTree_,o,l,r)}else if(i){let l=yo(n,c=>ue(c));s=wP(e.serverSyncTree_,o,l)}else{let l=ue(n);s=Ws(e.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=eo(e,o)),st(e.eventQueue_,a,s)}function dD(e,t){um(e,"connected",t),t===!1&&qP(e)}function GP(e,t){Me(t,(n,i)=>{um(e,n,i)})}function um(e,t,n){let i=new Q("/.info/"+t),r=ue(n);e.infoData_.updateSnapshot(i,r);let o=Ws(e.infoSyncTree_,i,r);st(e.eventQueue_,i,o)}function iu(e){return e.nextWriteId_++}function zP(e,t,n){let i=SP(e.serverSyncTree_,t);return i!=null?Promise.resolve(i):e.server_.get(t).then(r=>{let o=ue(r).withIndex(t._queryParams.getIndex());wg(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=Ws(e.serverSyncTree_,t._path,o);else{let a=Vs(e.serverSyncTree_,t);s=nC(e.serverSyncTree_,t._path,o,a)}return st(e.eventQueue_,t._path,s),Bc(e.serverSyncTree_,t,n,null,!0),o},r=>(so(e,"get for query "+me(t)+" failed: "+r),Promise.reject(new Error(r))))}function dm(e,t,n,i,r){so(e,"set",{path:t.toString(),value:n,priority:i});let o=Ys(e),s=ue(n,i),a=Zc(e.serverSyncTree_,t),l=sm(s,a,o),c=iu(e),u=nm(e.serverSyncTree_,t,l,c,!0);nu(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(h,f)=>{let p=h==="ok";p||Be("set at "+t+" failed: "+h);let _=Qn(e.serverSyncTree_,c,!p);st(e.eventQueue_,t,_),ti(e,r,h,f)});let d=fm(e,t);eo(e,d),st(e.eventQueue_,d,[])}function WP(e,t,n,i){so(e,"update",{path:t.toString(),value:n});let r=!0,o=Ys(e),s={};if(Me(n,(a,l)=>{r=!1,s[a]=sC(ae(t,a),ue(l),e.serverSyncTree_,o)}),r)Te("update() called with empty data.  Don't do anything."),ti(e,i,"ok",void 0);else{let a=iu(e),l=bP(e.serverSyncTree_,t,s,a);nu(e.eventQueue_,l),e.server_.merge(t.toString(),n,(c,u)=>{let d=c==="ok";d||Be("update at "+t+" failed: "+c);let h=Qn(e.serverSyncTree_,a,!d),f=h.length>0?eo(e,t):t;st(e.eventQueue_,f,h),ti(e,i,c,u)}),Me(n,c=>{let u=fm(e,ae(t,c));eo(e,u)}),st(e.eventQueue_,t,[])}}function qP(e){so(e,"onDisconnectEvents");let t=Ys(e),n=Ac();lg(e.onDisconnect_,K(),(r,o)=>{let s=sC(r,o,e.serverSyncTree_,t);io(n,r,s)});let i=[];lg(n,K(),(r,o)=>{i=i.concat(Ws(e.serverSyncTree_,r,o));let s=fm(e,r);eo(e,s)}),e.onDisconnect_=Ac(),st(e.eventQueue_,K(),i)}function KP(e,t,n){e.server_.onDisconnectCancel(t.toString(),(i,r)=>{i==="ok"&&ag(e.onDisconnect_,t),ti(e,n,i,r)})}function hD(e,t,n,i){let r=ue(n);e.server_.onDisconnectPut(t.toString(),r.val(!0),(o,s)=>{o==="ok"&&io(e.onDisconnect_,t,r),ti(e,i,o,s)})}function QP(e,t,n,i,r){let o=ue(n,i);e.server_.onDisconnectPut(t.toString(),o.val(!0),(s,a)=>{s==="ok"&&io(e.onDisconnect_,t,o),ti(e,r,s,a)})}function YP(e,t,n,i){if(la(n)){Te("onDisconnect().update() called with empty data.  Don't do anything."),ti(e,i,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,(r,o)=>{r==="ok"&&Me(n,(s,a)=>{let l=ue(a);io(e.onDisconnect_,ae(t,s),l)}),ti(e,i,r,o)})}function ZP(e,t,n){let i;$(t._path)===".info"?i=wg(e.infoSyncTree_,t,n):i=wg(e.serverSyncTree_,t,n),hC(e.eventQueue_,t._path,i)}function Tg(e,t,n){let i;$(t._path)===".info"?i=Bc(e.infoSyncTree_,t,n):i=Bc(e.serverSyncTree_,t,n),hC(e.eventQueue_,t._path,i)}function mC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(pC)}function JP(e){e.persistentConnection_&&e.persistentConnection_.resume(pC)}function so(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Te(n,...t)}function ti(e,t,n,i){t&&no(()=>{if(n==="ok")t(null);else{let r=(n||"error").toUpperCase(),o=r;i&&(o+=": "+i);let s=new Error(o);s.code=r,t(s)}})}function XP(e,t,n,i,r,o){so(e,"transaction on "+t);let s={path:t,update:n,onComplete:i,status:null,order:gD(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=hm(e,t,void 0);s.currentInputSnapshot=a;let l=s.update(a.val());if(l===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Ks("transaction failed: Data returned ",l,s.path),s.status=0;let c=Xc(e.transactionQueueTree_,t),u=Vi(c)||[];u.push(s),lm(c,u);let d;typeof l=="object"&&l!==null&&ut(l,".priority")?(d=In(l,".priority"),v(js(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Zc(e.serverSyncTree_,t)||P.EMPTY_NODE).getPriority().val();let h=Ys(e),f=ue(l,d),p=sm(f,a,h);s.currentOutputSnapshotRaw=f,s.currentOutputSnapshotResolved=p,s.currentWriteId=iu(e);let _=nm(e.serverSyncTree_,t,p,s.currentWriteId,s.applyLocally);st(e.eventQueue_,t,_),ru(e,e.transactionQueueTree_)}}function hm(e,t,n){return Zc(e.serverSyncTree_,t,n)||P.EMPTY_NODE}function ru(e,t=e.transactionQueueTree_){if(t||ou(e,t),Vi(t)){let n=vC(e,t);v(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&eF(e,qs(t),n)}else aC(t)&&eu(t,n=>{ru(e,n)})}function eF(e,t,n){let i=n.map(c=>c.currentWriteId),r=hm(e,t,i),o=r,s=r.hash();for(let c=0;c<n.length;c++){let u=n[c];v(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=$e(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),l=t;e.server_.put(l.toString(),a,c=>{so(e,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Qn(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();ou(e,Xc(e.transactionQueueTree_,t)),ru(e,e.transactionQueueTree_),st(e.eventQueue_,t,u);for(let h=0;h<d.length;h++)no(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Be("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}eo(e,t)}},s)}function eo(e,t){let n=_C(e,t),i=qs(n),r=vC(e,n);return tF(e,r,i),i}function tF(e,t,n){if(t.length===0)return;let i=[],r=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let l=t[a],c=$e(n,l.path),u=!1,d;if(v(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,r=r.concat(Qn(e.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=HP)u=!0,d="maxretry",r=r.concat(Qn(e.serverSyncTree_,l.currentWriteId,!0));else{let h=hm(e,l.path,s);l.currentInputSnapshot=h;let f=t[a].update(h.val());if(f!==void 0){Ks("transaction failed: Data returned ",f,l.path);let p=ue(f);typeof f=="object"&&f!=null&&ut(f,".priority")||(p=p.updatePriority(h.getPriority()));let y=l.currentWriteId,M=Ys(e),k=sm(p,h,M);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=k,l.currentWriteId=iu(e),s.splice(s.indexOf(y),1),r=r.concat(nm(e.serverSyncTree_,l.path,k,l.currentWriteId,l.applyLocally)),r=r.concat(Qn(e.serverSyncTree_,y,!0))}else u=!0,d="nodata",r=r.concat(Qn(e.serverSyncTree_,l.currentWriteId,!0))}st(e.eventQueue_,n,r),r=[],u&&(t[a].status=2,function(h){setTimeout(h,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(d),!1,null))))}ou(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)no(i[a]);ru(e,e.transactionQueueTree_)}function _C(e,t){let n,i=e.transactionQueueTree_;for(n=$(t);n!==null&&Vi(i)===void 0;)i=Xc(i,n),t=re(t),n=$(t);return i}function vC(e,t){let n=[];return yC(e,t,n),n.sort((i,r)=>i.order-r.order),n}function yC(e,t,n){let i=Vi(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);eu(t,r=>{yC(e,r,n)})}function ou(e,t){let n=Vi(t);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,lm(t,n.length>0?n:void 0)}eu(t,i=>{ou(e,i)})}function fm(e,t){let n=qs(_C(e,t)),i=Xc(e.transactionQueueTree_,t);return kP(i,r=>{Fp(e,r)}),Fp(e,i),lC(i,r=>{Fp(e,r)}),n}function Fp(e,t){let n=Vi(t);if(n){let i=[],r=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(v(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(v(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),r=r.concat(Qn(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&i.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?lm(t,void 0):n.length=o+1,st(e.eventQueue_,qs(t),r);for(let s=0;s<i.length;s++)no(i[s])}}function nF(e){let t="",n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function iF(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Be(`Invalid query segment '${n}' in query '${e}'`)}return t}var Mg=function(e,t){let n=rF(e),i=n.namespace;n.domain==="firebase.com"&&Xt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Xt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||kx();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new wc(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new Q(n.pathString)}},rF=function(e){let t="",n="",i="",r="",o="",s=!0,a="https",l=443;if(typeof e=="string"){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(r=nF(e.substring(u,d)));let h=iF(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;let f=t.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let p=t.indexOf(".");i=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=i}"ns"in h&&(o=h.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}};var fD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",oF=function(){let e=0,t=[];return function(n){let i=n===e;e=n;let r,o=new Array(8);for(r=7;r>=0;r--)o[r]=fD.charAt(n%64),n=Math.floor(n/64);v(n===0,"Cannot push at time == 0");let s=o.join("");if(i){for(r=11;r>=0&&t[r]===63;r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)s+=fD.charAt(t[r]);return v(s.length===20,"nextPushId: Length should be 20."),s}}();var jc=class{constructor(t,n,i,r){this.eventType=t,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+me(this.snapshot.exportVal())}},Uc=class{constructor(t,n,i){this.eventRegistration=t,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Us=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return v(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Hc=class{constructor(t,n){this._repo=t,this._path=n}cancel(){let t=new De;return KP(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){ot("OnDisconnect.remove",this._path);let t=new De;return hD(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){ot("OnDisconnect.set",this._path),tn("OnDisconnect.set",t,this._path,!1);let n=new De;return hD(this._repo,this._path,t,n.wrapCallback(()=>{})),n.promise}setWithPriority(t,n){ot("OnDisconnect.setWithPriority",this._path),tn("OnDisconnect.setWithPriority",t,this._path,!1),cm("OnDisconnect.setWithPriority",n,!1);let i=new De;return QP(this._repo,this._path,t,n,i.wrapCallback(()=>{})),i.promise}update(t){ot("OnDisconnect.update",this._path),uC("OnDisconnect.update",t,this._path,!1);let n=new De;return YP(this._repo,this._path,t,n.wrapCallback(()=>{})),n.promise}};var ze=class e{constructor(t,n,i,r){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return G(this._path)?null:zg(this._path)}get ref(){return new at(this._repo,this._path)}get _queryIdentifier(){let t=Xw(this._queryParams),n=$g(t);return n==="{}"?"default":n}get _queryObject(){return Xw(this._queryParams)}isEqual(t){if(t=se(t),!(t instanceof e))return!1;let n=this._repo===t._repo,i=Wg(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+hk(this._path)}};function su(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function ii(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Jt){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Jn)throw new Error(i);if(typeof t!="string")throw new Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!==En)throw new Error(i);if(typeof n!="string")throw new Error(r)}}else if(e.getIndex()===oe){if(t!=null&&!js(t)||n!=null&&!js(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(v(e.getIndex()instanceof Rs||e.getIndex()===Qg,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function au(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var at=class e extends ze{constructor(t,n){super(t,n,new Ps,!1)}get parent(){let t=FD(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},to=class e{constructor(t,n,i){this._node=t,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new Q(t),i=ni(this.ref,t);return new e(this._node.getChild(n),i,oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>t(new e(r,ni(this.ref,i),oe)))}hasChild(t){let n=new Q(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function pm(e,t){return e=se(e),e._checkNotDeleted("ref"),t!==void 0?ni(e._root,t):e._root}function gm(e,t){e=se(e),e._checkNotDeleted("refFromURL");let n=Mg(t,e._repo.repoInfo_.nodeAdmin);dC("refFromURL",n);let i=n.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&i.host!==e._repo.repoInfo_.host&&Xt("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+e._repo.repoInfo_.host+")"),pm(e,n.path.toString())}function ni(e,t){return e=se(e),$(e._path)===null?jP("child","path",t,!1):oo("child","path",t,!1),new at(e._repo,ae(e._path,t))}function bC(e,t){e=se(e),ot("push",e._path),tn("push",t,e._path,!0);let n=gC(e._repo),i=oF(n),r=ni(e,i),o=ni(e,i),s;return t!=null?s=lu(o,t).then(()=>o):s=Promise.resolve(o),r.then=s.then.bind(s),r.catch=s.then.bind(s,void 0),r}function wC(e){return ot("remove",e._path),lu(e,null)}function lu(e,t){e=se(e),ot("set",e._path),tn("set",t,e._path,!1);let n=new De;return dm(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function DC(e,t){e=se(e),ot("setPriority",e._path),cm("setPriority",t,!1);let n=new De;return dm(e._repo,ae(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}function CC(e,t,n){if(ot("setWithPriority",e._path),tn("setWithPriority",t,e._path,!1),cm("setWithPriority",n,!1),e.key===".length"||e.key===".keys")throw"setWithPriority failed: "+e.key+" is a read-only object.";let i=new De;return dm(e._repo,e._path,t,n,i.wrapCallback(()=>{})),i.promise}function EC(e,t){uC("update",t,e._path,!1);let n=new De;return WP(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function SC(e){e=se(e);let t=new Us(()=>{}),n=new Hs(t);return zP(e._repo,e,n).then(i=>new to(i,new at(e._repo,e._path),e._queryParams.getIndex()))}var Hs=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let i=n._queryParams.getIndex();return new jc("value",this,new to(t.snapshotNode,new at(n._repo,n._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Uc(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},$c=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Uc(this,t,n):null}createEvent(t,n){v(t.childName!=null,"Child events should have a childName.");let i=ni(new at(n._repo,n._path),t.childName),r=n._queryParams.getIndex();return new jc(t.type,this,new to(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Zs(e,t,n,i,r){let o;if(typeof i=="object"&&(o=void 0,r=i),typeof i=="function"&&(o=i),r&&r.onlyOnce){let l=n,c=(u,d)=>{Tg(e._repo,e,a),l(u,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}let s=new Us(n,o||void 0),a=t==="value"?new Hs(s):new $c(t,s);return ZP(e._repo,e,a),()=>Tg(e._repo,e,a)}function cu(e,t,n,i){return Zs(e,"value",t,n,i)}function mm(e,t,n,i){return Zs(e,"child_added",t,n,i)}function _m(e,t,n,i){return Zs(e,"child_changed",t,n,i)}function vm(e,t,n,i){return Zs(e,"child_moved",t,n,i)}function ym(e,t,n,i){return Zs(e,"child_removed",t,n,i)}function bm(e,t,n){let i=null,r=n?new Us(n):null;t==="value"?i=new Hs(r):t&&(i=new $c(t,r)),Tg(e._repo,e,i)}var lt=class{},Gc=class extends lt{constructor(t,n){super(),this._value=t,this._key=n,this.type="endAt"}_apply(t){tn("endAt",this._value,t._path,!0);let n=rg(t._queryParams,this._value,this._key);if(au(n),ii(n),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ze(t._repo,t._path,n,t._orderByCalled)}};function IC(e,t){return Qs("endAt","key",t,!0),new Gc(e,t)}var Ag=class extends lt{constructor(t,n){super(),this._value=t,this._key=n,this.type="endBefore"}_apply(t){tn("endBefore",this._value,t._path,!1);let n=Rk(t._queryParams,this._value,this._key);if(au(n),ii(n),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ze(t._repo,t._path,n,t._orderByCalled)}};function TC(e,t){return Qs("endBefore","key",t,!0),new Ag(e,t)}var zc=class extends lt{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAt"}_apply(t){tn("startAt",this._value,t._path,!0);let n=ig(t._queryParams,this._value,this._key);if(au(n),ii(n),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ze(t._repo,t._path,n,t._orderByCalled)}};function MC(e=null,t){return Qs("startAt","key",t,!0),new zc(e,t)}var Ng=class extends lt{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAfter"}_apply(t){tn("startAfter",this._value,t._path,!1);let n=Nk(t._queryParams,this._value,this._key);if(au(n),ii(n),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ze(t._repo,t._path,n,t._orderByCalled)}};function AC(e,t){return Qs("startAfter","key",t,!0),new Ng(e,t)}var Rg=class extends lt{constructor(t){super(),this._limit=t,this.type="limitToFirst"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ze(t._repo,t._path,Mk(t._queryParams,this._limit),t._orderByCalled)}};function NC(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Rg(e)}var Og=class extends lt{constructor(t){super(),this._limit=t,this.type="limitToLast"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ze(t._repo,t._path,Ak(t._queryParams,this._limit),t._orderByCalled)}};function RC(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Og(e)}var xg=class extends lt{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){su(t,"orderByChild");let n=new Q(this._path);if(G(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let i=new Rs(n),r=qc(t._queryParams,i);return ii(r),new ze(t._repo,t._path,r,!0)}};function OC(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return oo("orderByChild","path",e,!1),new xg(e)}var kg=class extends lt{constructor(){super(...arguments),this.type="orderByKey"}_apply(t){su(t,"orderByKey");let n=qc(t._queryParams,Jt);return ii(n),new ze(t._repo,t._path,n,!0)}};function xC(){return new kg}var Pg=class extends lt{constructor(){super(...arguments),this.type="orderByPriority"}_apply(t){su(t,"orderByPriority");let n=qc(t._queryParams,oe);return ii(n),new ze(t._repo,t._path,n,!0)}};function kC(){return new Pg}var Fg=class extends lt{constructor(){super(...arguments),this.type="orderByValue"}_apply(t){su(t,"orderByValue");let n=qc(t._queryParams,Qg);return ii(n),new ze(t._repo,t._path,n,!0)}};function PC(){return new Fg}var Lg=class extends lt{constructor(t,n){super(),this._value=t,this._key=n,this.type="equalTo"}_apply(t){if(tn("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gc(this._value,this._key)._apply(new zc(this._value,this._key)._apply(t))}};function FC(e,t){return Qs("equalTo","key",t,!0),new Lg(e,t)}function Et(e,...t){let n=se(e);for(let i of t)n=i._apply(n);return n}hP(at);_P(at);var sF="FIREBASE_DATABASE_EMULATOR_HOST",Vg={},aF=!1;function lF(e,t,n,i){e.repoInfo_=new wc(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function wm(e,t,n,i,r){let o=i||e.options.databaseURL;o===void 0&&(e.options.projectId||Xt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Te("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=Mg(o,r),a=s.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[sF]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=Mg(o,r),a=s.repoInfo):l=!s.repoInfo.secure;let u=r&&l?new Ss(Ss.OWNER):new Hp(e.name,e.options,t);dC("Invalid Firebase Database URL",s),G(s.path)||Xt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=uF(a,e,u,new Up(e.name,n));return new Bg(d,e)}function cF(e,t){let n=Vg[t];(!n||n[e.key]!==e)&&Xt(`Database ${t}(${e.repoInfo_}) has already been deleted.`),mC(e),delete n[e.key]}function uF(e,t,n,i){let r=Vg[t.name];r||(r={},Vg[t.name]=r);let o=r[e.toURLString()];return o&&Xt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ig(e,aF,n,i),r[e.toURLString()]=o,o}var Bg=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($P(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new at(this._repo,K())),this._rootInternal}_delete(){return this._rootInternal!==null&&(cF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Xt("Cannot call "+t+" on a deleted database.")}};function LC(){PD.IS_TRANSPORT_INITIALIZED&&Be("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function VC(){LC(),As.forceDisallow()}function BC(){LC(),zr.forceDisallow(),As.forceAllow()}function jC(e,t,n,i={}){e=se(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Xt("Cannot call useEmulator() after instance has already been initialized.");let r=e._repoInternal,o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Xt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ss(Ss.OWNER);else if(i.mockUserToken){let s=typeof i.mockUserToken=="string"?i.mockUserToken:sa(i.mockUserToken,e.app.options.projectId);o=new Ss(s)}lF(r,t,n,o)}function UC(e){e=se(e),e._checkNotDeleted("goOffline"),mC(e._repo)}function HC(e){e=se(e),e._checkNotDeleted("goOnline"),JP(e._repo)}function $C(e,t){_D(e,t)}function dF(e){Hg(ua),oi(new Je("database",(t,{instanceIdentifier:n})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return wm(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),St(Fw,Lw,e),St(Fw,Lw,"esm2017")}var hF={".sv":"timestamp"};function GC(){return hF}function zC(e){return{".sv":{increment:e}}}var jg=class{constructor(t,n){this.committed=t,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function WC(e,t,n){var i;if(e=se(e),ot("Reference.transaction",e._path),e.key===".length"||e.key===".keys")throw"Reference.transaction failed: "+e.key+" is a read-only object.";let r=(i=n?.applyLocally)!==null&&i!==void 0?i:!0,o=new De,s=(l,c,u)=>{let d=null;l?o.reject(l):(d=new to(u,new at(e._repo,e._path),oe),o.resolve(new jg(c,d)))},a=cu(e,()=>{});return XP(e._repo,e._path,t,s,a,r),o.promise}qg.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};qg.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};dF();var fF="@firebase/database-compat",pF="1.0.8";var gF=new zi("@firebase/database-compat"),qC=function(e){let t="FIREBASE WARNING: "+e;gF.warn(t)};var mF=function(e,t,n,i){if(!(i&&n===void 0)&&typeof n!="boolean")throw new Error(qe(e,t)+"must be a boolean.")},_F=function(e,t,n){if(!(n&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(qe(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var Dm=class{constructor(t){this._delegate=t}cancel(t){A("OnDisconnect.cancel",0,1,arguments.length),ve("OnDisconnect.cancel","onComplete",t,!0);let n=this._delegate.cancel();return t&&n.then(()=>t(null),i=>t(i)),n}remove(t){A("OnDisconnect.remove",0,1,arguments.length),ve("OnDisconnect.remove","onComplete",t,!0);let n=this._delegate.remove();return t&&n.then(()=>t(null),i=>t(i)),n}set(t,n){A("OnDisconnect.set",1,2,arguments.length),ve("OnDisconnect.set","onComplete",n,!0);let i=this._delegate.set(t);return n&&i.then(()=>n(null),r=>n(r)),i}setWithPriority(t,n,i){A("OnDisconnect.setWithPriority",2,3,arguments.length),ve("OnDisconnect.setWithPriority","onComplete",i,!0);let r=this._delegate.setWithPriority(t,n);return i&&r.then(()=>i(null),o=>i(o)),r}update(t,n){if(A("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,qC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ve("OnDisconnect.update","onComplete",n,!0);let i=this._delegate.update(t);return n&&i.then(()=>n(null),r=>n(r)),i}};var Cm=class{constructor(t,n){this.committed=t,this.snapshot=n}toJSON(){return A("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Bi=class e{constructor(t,n){this._database=t,this._delegate=n}val(){return A("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return A("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return A("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return A("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return A("DataSnapshot.child",0,1,arguments.length),t=String(t),oo("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}hasChild(t){return A("DataSnapshot.hasChild",1,1,arguments.length),oo("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return A("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return A("DataSnapshot.forEach",1,1,arguments.length),ve("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(n=>t(new e(this._database,n)))}hasChildren(){return A("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return A("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return A("DataSnapshot.ref",0,0,arguments.length),new Sn(this._database,this._delegate.ref)}get ref(){return this.getRef()}},uu=class e{constructor(t,n){this.database=t,this._delegate=n}on(t,n,i,r){var o;A("Query.on",2,4,arguments.length),ve("Query.on","callback",n,!1);let s=e.getCancelAndContextArgs_("Query.on",i,r),a=(c,u)=>{n.call(s.context,new Bi(this.database,c),u)};a.userCallback=n,a.context=s.context;let l=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(t){case"value":return cu(this._delegate,a,l),n;case"child_added":return mm(this._delegate,a,l),n;case"child_removed":return ym(this._delegate,a,l),n;case"child_changed":return _m(this._delegate,a,l),n;case"child_moved":return vm(this._delegate,a,l),n;default:throw new Error(qe("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,n,i){if(A("Query.off",0,3,arguments.length),_F("Query.off",t,!0),ve("Query.off","callback",n,!0),Mu("Query.off","context",i,!0),n){let r=()=>{};r.userCallback=n,r.context=i,bm(this._delegate,t,r)}else bm(this._delegate,t)}get(){return SC(this._delegate).then(t=>new Bi(this.database,t))}once(t,n,i,r){A("Query.once",1,4,arguments.length),ve("Query.once","callback",n,!0);let o=e.getCancelAndContextArgs_("Query.once",i,r),s=new De,a=(c,u)=>{let d=new Bi(this.database,c);n&&n.call(o.context,d,u),s.resolve(d)};a.userCallback=n,a.context=o.context;let l=c=>{o.cancel&&o.cancel.call(o.context,c),s.reject(c)};switch(t){case"value":cu(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":mm(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":ym(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":_m(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":vm(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(qe("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(t){return A("Query.limitToFirst",1,1,arguments.length),new e(this.database,Et(this._delegate,NC(t)))}limitToLast(t){return A("Query.limitToLast",1,1,arguments.length),new e(this.database,Et(this._delegate,RC(t)))}orderByChild(t){return A("Query.orderByChild",1,1,arguments.length),new e(this.database,Et(this._delegate,OC(t)))}orderByKey(){return A("Query.orderByKey",0,0,arguments.length),new e(this.database,Et(this._delegate,xC()))}orderByPriority(){return A("Query.orderByPriority",0,0,arguments.length),new e(this.database,Et(this._delegate,kC()))}orderByValue(){return A("Query.orderByValue",0,0,arguments.length),new e(this.database,Et(this._delegate,PC()))}startAt(t=null,n){return A("Query.startAt",0,2,arguments.length),new e(this.database,Et(this._delegate,MC(t,n)))}startAfter(t=null,n){return A("Query.startAfter",0,2,arguments.length),new e(this.database,Et(this._delegate,AC(t,n)))}endAt(t=null,n){return A("Query.endAt",0,2,arguments.length),new e(this.database,Et(this._delegate,IC(t,n)))}endBefore(t=null,n){return A("Query.endBefore",0,2,arguments.length),new e(this.database,Et(this._delegate,TC(t,n)))}equalTo(t,n){return A("Query.equalTo",1,2,arguments.length),new e(this.database,Et(this._delegate,FC(t,n)))}toString(){return A("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return A("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if(A("Query.isEqual",1,1,arguments.length),!(t instanceof e)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,n,i){let r={cancel:void 0,context:void 0};if(n&&i)r.cancel=n,ve(t,"cancel",r.cancel,!0),r.context=i,Mu(t,"context",r.context,!0);else if(n)if(typeof n=="object"&&n!==null)r.context=n;else if(typeof n=="function")r.cancel=n;else throw new Error(qe(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new Sn(this.database,new at(this._delegate._repo,this._delegate._path))}},Sn=class e extends uu{constructor(t,n){super(t,new ze(n._repo,n._path,new Ps,!1)),this.database=t,this._delegate=n}getKey(){return A("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return A("Reference.child",1,1,arguments.length),typeof t=="number"&&(t=String(t)),new e(this.database,ni(this._delegate,t))}getParent(){A("Reference.parent",0,0,arguments.length);let t=this._delegate.parent;return t?new e(this.database,t):null}getRoot(){return A("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)}set(t,n){A("Reference.set",1,2,arguments.length),ve("Reference.set","onComplete",n,!0);let i=lu(this._delegate,t);return n&&i.then(()=>n(null),r=>n(r)),i}update(t,n){if(A("Reference.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,qC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ot("Reference.update",this._delegate._path),ve("Reference.update","onComplete",n,!0);let i=EC(this._delegate,t);return n&&i.then(()=>n(null),r=>n(r)),i}setWithPriority(t,n,i){A("Reference.setWithPriority",2,3,arguments.length),ve("Reference.setWithPriority","onComplete",i,!0);let r=CC(this._delegate,t,n);return i&&r.then(()=>i(null),o=>i(o)),r}remove(t){A("Reference.remove",0,1,arguments.length),ve("Reference.remove","onComplete",t,!0);let n=wC(this._delegate);return t&&n.then(()=>t(null),i=>t(i)),n}transaction(t,n,i){A("Reference.transaction",1,3,arguments.length),ve("Reference.transaction","transactionUpdate",t,!1),ve("Reference.transaction","onComplete",n,!0),mF("Reference.transaction","applyLocally",i,!0);let r=WC(this._delegate,t,{applyLocally:i}).then(o=>new Cm(o.committed,new Bi(this.database,o.snapshot)));return n&&r.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),r}setPriority(t,n){A("Reference.setPriority",1,2,arguments.length),ve("Reference.setPriority","onComplete",n,!0);let i=DC(this._delegate,t);return n&&i.then(()=>n(null),r=>n(r)),i}push(t,n){A("Reference.push",0,2,arguments.length),ve("Reference.push","onComplete",n,!0);let i=bC(this._delegate,t),r=i.then(s=>new e(this.database,s));n&&r.then(()=>n(null),s=>n(s));let o=new e(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return ot("Reference.onDisconnect",this._delegate._path),new Dm(new Hc(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var ji=class{constructor(t,n){this._delegate=t,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:VC,forceLongPolling:BC}}useEmulator(t,n,i={}){jC(this._delegate,t,n,i)}ref(t){if(A("database.ref",0,1,arguments.length),t instanceof Sn){let n=gm(this._delegate,t.toString());return new Sn(this,n)}else{let n=pm(this._delegate,t);return new Sn(this,n)}}refFromURL(t){A("database.refFromURL",1,1,arguments.length);let i=gm(this._delegate,t);return new Sn(this,i)}goOffline(){return A("database.goOffline",0,0,arguments.length),UC(this._delegate)}goOnline(){return A("database.goOnline",0,0,arguments.length),HC(this._delegate)}};ji.ServerValue={TIMESTAMP:GC(),increment:e=>zC(e)};function vF({app:e,url:t,version:n,customAuthImpl:i,customAppCheckImpl:r,namespace:o,nodeAdmin:s=!1}){Hg(n);let a=new Au("database-standalone"),l=new ca("auth-internal",a);l.setComponent(new Je("auth-internal",()=>i,"PRIVATE"));let c;return r&&(c=new ca("app-check-internal",a),c.setComponent(new Je("app-check-internal",()=>r,"PRIVATE"))),{instance:new ji(wm(e,l,c,t,s),e),namespace:o}}var yF=Object.freeze({__proto__:null,initStandalone:vF});var bF=ji.ServerValue;function wF(e){e.INTERNAL.registerComponent(new Je("database-compat",(t,{instanceIdentifier:n})=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:n});return new ji(r,i)},"PUBLIC").setServiceProps({Reference:Sn,Query:uu,Database:ji,DataSnapshot:Bi,enableLogging:$C,INTERNAL:yF,ServerValue:bF}).setMultipleInstances(!0)),e.registerVersion(fF,pF)}wF(Ce);function Js(e,t,n="on",i=Tn){return new N(r=>{let o=null;return o=e[n](t,(s,a)=>{i.schedule(()=>{r.next({snapshot:s,prevKey:a})}),n==="once"&&i.schedule(()=>r.complete())},s=>{i.schedule(()=>r.error(s))}),n==="on"?{unsubscribe(){o!=null&&e.off(t,o)}}:{unsubscribe(){}}}).pipe(I(r=>{let{snapshot:o,prevKey:s}=r,a=null;return o.exists()&&(a=o.key),{type:t,payload:o,prevKey:s,key:a}}),Eo())}function DF(e){return typeof e=="string"}function CF(e){return typeof e.exportVal=="function"}function JC(e){return e==null}function XC(e){return typeof e.set=="function"}function KC(e,t){return XC(t)?t:e.ref(t)}function e1(e,t){if(DF(e))return t.stringCase();if(XC(e))return t.firebaseCase();if(CF(e))return t.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof e}`)}function t1(e){return(JC(e)||e.length===0)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function n1(e,t,n){t=t1(t);let i=t.map(r=>Js(e,r,"on",n));return ui(...i)}function EF(e,t,n){let i=n1(e,t).pipe(sr((r,o)=>[...r,o],[]));return IF(e,i,n)}function SF(e,t){return Js(e,"value","on",t).pipe(I(n=>{let i;return n.payload.forEach(r=>(i=r.key,!1)),{data:n,lastKeyToLoad:i}}))}function IF(e,t,n){return SF(e,n).pipe(ar(t),I(([r,o])=>{let s=r.lastKeyToLoad,a=o.map(l=>l.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),od(r=>r.loadedKeys.indexOf(r.lastKeyToLoad)===-1),I(r=>r.actions))}function QC(e,t){return function(i,r){return e1(i,{stringCase:()=>e.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function TF(e){return function(n){return n?e1(n,{stringCase:()=>e.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):e.remove()}}function MF(e,t,n){return Js(e,"value","once",n).pipe(te(i=>{let r=[C(i)];return t.forEach(o=>r.push(Js(e,o,"on",n))),ui(...r).pipe(sr(NF,[]))}),xa())}function i1(e,t){let n=e.length;for(let i=0;i<n;i++)if(e[i].payload.key===t)return i;return-1}function AF(e,t){if(JC(t))return 0;{let n=i1(e,t);return n===-1?e.length:n+1}}function NF(e,t){let{payload:n,prevKey:i,key:r}=t,o=i1(e,r),s=AF(e,i);switch(t.type){case"value":if(t.payload?.exists()){let a=null;t.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,e=[...e,c],!1})}return e;case"child_added":if(o>-1)(e[o-1]?.key||null)!==i&&(e=e.filter(l=>l.payload.key!==n.key),e.splice(s,0,t));else{if(i==null)return[t,...e];e=e.slice(),e.splice(s,0,t)}return e;case"child_removed":return e.filter(a=>a.payload.key!==n.key);case"child_changed":return e.map(a=>a.payload.key===r?t:a);case"child_moved":if(o>-1){let a=e.splice(o,1)[0];return e=e.slice(),e.splice(s,0,a),e}return e;default:return e}}function YC(e,t,n){return t=t1(t),MF(e,t,n)}function RF(e,t){let n=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>e.ref);return{query:e,update:QC(i,"update"),set:QC(i,"set"),push:r=>i.push(r),remove:TF(i),snapshotChanges(r){return YC(e,r,n).pipe(wt)},stateChanges(r){return n1(e,r,n).pipe(wt)},auditTrail(r){return EF(e,r,n).pipe(wt)},valueChanges(r,o){return YC(e,r,n).pipe(I(a=>a.map(l=>o&&o.idField?ee(b({},l.payload.val()),{[o.idField]:l.key}):l.payload.val())),wt)}}}function ZC(e,t){return function(){return Js(e,"value","on",t)}}function OF(e,t){return{query:e,snapshotChanges(){return ZC(e,t.schedulers.outsideAngular)().pipe(wt)},update(n){return e.ref.update(n)},set(n){return e.ref.set(n)},remove(){return e.ref.remove()},valueChanges(){return ZC(e,t.schedulers.outsideAngular)().pipe(wt,I(i=>i.payload.exists()?i.payload.val():null))}}}var xF=new w("angularfire2.realtimeDatabaseURL"),kF=new w("angularfire2.database.use-emulator"),Em=(()=>{class e{schedulers;database;constructor(n,i,r,o,s,a,l,c,u,d,h,f,p,_,y){this.schedulers=a;let M=l,k=Ri(n,s,i);c&&Ap(k,s,u,h,f,p,d,_),this.database=$r(`${k.name}.database.${r}`,"AngularFireDatabase",k.name,()=>{let E=s.runOutsideAngular(()=>k.database(r||void 0));return M&&E.useEmulator(...M),E},[M])}list(n,i){let r=this.schedulers.ngZone.runOutsideAngular(()=>KC(this.database,n)),o=r;return i&&(o=i(r)),RF(o,this)}object(n){let i=this.schedulers.ngZone.runOutsideAngular(()=>KC(this.database,n));return OF(i,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||e)(m(qn),m(Kn,8),m(xF,8),m(Re),m(j),m(Hr),m(kF,8),m(Pw,8),m(Cp,8),m(Ep,8),m(Sp,8),m(Ip,8),m(Tp,8),m(Mp,8),m(Cn,8))};static \u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),r1=(()=>{class e{constructor(){Ce.registerVersion("angularfire",zn.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=L({type:e});static \u0275inj=F({providers:[Em]})}return e})();var f1="firebasestorage.googleapis.com",p1="storageBucket",FF=2*60*1e3,LF=10*60*1e3,VF=1e3;var de=class e extends Xm{constructor(t,n,i=0){super(Sm(t),`Firebase Storage: ${n} (${Sm(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,e.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Sm(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},le=function(e){return e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment",e}(le||{});function Sm(e){return"storage/"+e}function xm(){let e="An unknown error occurred, please check the error payload for server response.";return new de(le.UNKNOWN,e)}function BF(e){return new de(le.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function jF(e){return new de(le.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UF(){let e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new de(le.UNAUTHENTICATED,e)}function HF(){return new de(le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $F(e){return new de(le.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function g1(){return new de(le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m1(){return new de(le.CANCELED,"User canceled the upload/download.")}function GF(e){return new de(le.INVALID_URL,"Invalid URL '"+e+"'.")}function zF(e){return new de(le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function WF(){return new de(le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+p1+"' property when initializing the app?")}function _1(){return new de(le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qF(){return new de(le.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function KF(){return new de(le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QF(e){return new de(le.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ui(e){return new de(le.INVALID_ARGUMENT,e)}function v1(){return new de(le.APP_DELETED,"The Firebase app was deleted.")}function km(e){return new de(le.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ea(e,t){return new de(le.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Xs(e){throw new de(le.INTERNAL_ERROR,"Internal error: "+e)}var We=class e{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=e.makeFromUrl(t,n)}catch{return new e(t,"")}if(i.path==="")return i;throw zF(t)}static makeFromUrl(t,n){let i=null,r="([A-Za-z0-9.\\-_]+)";function o(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+r+s,"i"),l={bucket:1,path:3};function c(V){V.path_=decodeURIComponent(V.path)}let u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${u}/b/${r}/o${h}`,"i"),p={bucket:1,path:3},_=n===f1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",M=new RegExp(`^https?://${_}/${r}/${y}`,"i"),E=[{regex:a,indices:l,postModify:o},{regex:f,indices:p,postModify:c},{regex:M,indices:{bucket:1,path:2},postModify:c}];for(let V=0;V<E.length;V++){let pe=E[V],ge=pe.regex.exec(t);if(ge){let Vt=ge[pe.indices.bucket],on=ge[pe.indices.path];on||(on=""),i=new e(Vt,on),pe.postModify(i);break}}if(i==null)throw GF(t);return i}},Tm=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function YF(e,t,n){let i=1,r=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function u(...y){c||(c=!0,t.apply(null,y))}function d(y){r=setTimeout(()=>{r=null,e(f,l())},y)}function h(){o&&clearTimeout(o)}function f(y,...M){if(c){h();return}if(y){h(),u.call(null,y,...M);return}if(l()||s){h(),u.call(null,y,...M);return}i<64&&(i*=2);let E;a===1?(a=2,E=0):E=(i+Math.random())*1e3,d(E)}let p=!1;function _(y){p||(p=!0,h(),!c&&(r!==null?(y||(a=2),clearTimeout(r),d(0)):y||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,_(!0)},n),_}function ZF(e){e(!1)}function JF(e){return e!==void 0}function XF(e){return typeof e=="function"}function eL(e){return typeof e=="object"&&!Array.isArray(e)}function fu(e){return typeof e=="string"||e instanceof String}function o1(e){return Pm()&&e instanceof Blob}function Pm(){return typeof Blob<"u"}function Mm(e,t,n,i){if(i<t)throw Ui(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw Ui(`Invalid value for '${e}'. Expected ${n} or less.`)}function ri(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function y1(e){let t=encodeURIComponent,n="?";for(let i in e)if(e.hasOwnProperty(i)){let r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var co=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}(co||{});function b1(e,t){let n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return n||r||o}var Am=class{constructor(t,n,i,r,o,s,a,l,c,u,d,h=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){let t=(i,r)=>{if(r){i(!1,new lo(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===co.NO_ERROR,l=o.getStatus();if(!a||b1(l,this.additionalRetryCodes_)&&this.retry){let u=o.getErrorCode()===co.ABORT;i(!1,new lo(!1,null,u));return}let c=this.successCodes_.indexOf(l)!==-1;i(!0,new lo(c,o))})},n=(i,r)=>{let o=this.resolve_,s=this.reject_,a=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());JF(l)?o(l):o()}catch(l){s(l)}else if(a!==null){let l=xm();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(r.canceled){let l=this.appDelete_?v1():m1();s(l)}else{let l=g1();s(l)}};this.canceled_?n(!1,new lo(!1,null,!0)):this.backoffId_=YF(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&ZF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},lo=class{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}};function tL(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function nL(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function iL(e,t){t&&(e["X-Firebase-GMPID"]=t)}function rL(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function oL(e,t,n,i,r,o,s=!0){let a=y1(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return iL(c,t),tL(c,n),nL(c,o),rL(c,i),new Am(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,s)}function sL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aL(...e){let t=sL();if(t!==void 0){let n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(Pm())return new Blob(e);throw new de(le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lL(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}function cL(e){if(typeof atob>"u")throw QF("base-64");return atob(e)}var ct={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ta=class{constructor(t,n){this.data=t,this.contentType=n||null}};function Fm(e,t){switch(e){case ct.RAW:return new ta(w1(t));case ct.BASE64:case ct.BASE64URL:return new ta(D1(e,t));case ct.DATA_URL:return new ta(dL(t),hL(t))}throw xm()}function w1(e){let t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{let o=i,s=e.charCodeAt(++n);i=65536|(o&1023)<<10|s&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function uL(e){let t;try{t=decodeURIComponent(e)}catch{throw ea(ct.DATA_URL,"Malformed data URL.")}return w1(t)}function D1(e,t){switch(e){case ct.BASE64:{let r=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(r||o)throw ea(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ct.BASE64URL:{let r=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(r||o)throw ea(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cL(t)}catch(r){throw r.message.includes("polyfill")?r:ea(e,"Invalid character found")}let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var hu=class{constructor(t){this.base64=!1,this.contentType=null;let n=t.match(/^data:([^,]+)?,/);if(n===null)throw ea(ct.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=n[1]||null;i!=null&&(this.base64=fL(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}};function dL(e){let t=new hu(e);return t.base64?D1(ct.BASE64,t.rest):uL(t.rest)}function hL(e){return new hu(e).contentType}function fL(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}var uo=class e{constructor(t,n){let i=0,r="";o1(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(o1(this.data_)){let i=this.data_,r=lL(i,t,n);return r===null?null:new e(r)}else{let i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}}static getBlob(...t){if(Pm()){let n=t.map(i=>i instanceof e?i.data_:i);return new e(aL.apply(null,n))}else{let n=t.map(s=>fu(s)?Fm(ct.RAW,s).data:s.data_),i=0;n.forEach(s=>{i+=s.byteLength});let r=new Uint8Array(i),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)r[o++]=s[a]}),new e(r,!0)}}uploadData(){return this.data_}};function Lm(e){let t;try{t=JSON.parse(e)}catch{return null}return eL(t)?t:null}function pL(e){if(e.length===0)return null;let t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function gL(e,t){let n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function C1(e){let t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}function mL(e,t){return t}var Oe=class{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||mL}},du=null;function _L(e){return!fu(e)||e.length<2?e:C1(e)}function pu(){if(du)return du;let e=[];e.push(new Oe("bucket")),e.push(new Oe("generation")),e.push(new Oe("metageneration")),e.push(new Oe("name","fullPath",!0));function t(o,s){return _L(s)}let n=new Oe("name");n.xform=t,e.push(n);function i(o,s){return s!==void 0?Number(s):s}let r=new Oe("size");return r.xform=i,e.push(r),e.push(new Oe("timeCreated")),e.push(new Oe("updated")),e.push(new Oe("md5Hash",null,!0)),e.push(new Oe("cacheControl",null,!0)),e.push(new Oe("contentDisposition",null,!0)),e.push(new Oe("contentEncoding",null,!0)),e.push(new Oe("contentLanguage",null,!0)),e.push(new Oe("contentType",null,!0)),e.push(new Oe("metadata","customMetadata",!0)),du=e,du}function vL(e,t){function n(){let i=e.bucket,r=e.fullPath,o=new We(i,r);return t._makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function yL(e,t,n){let i={};i.type="file";let r=n.length;for(let o=0;o<r;o++){let s=n[o];i[s.local]=s.xform(i,t[s.server])}return vL(i,e),i}function E1(e,t,n){let i=Lm(t);return i===null?null:yL(e,i,n)}function bL(e,t,n,i){let r=Lm(t);if(r===null||!fu(r.downloadTokens))return null;let o=r.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(c=>{let u=e.bucket,d=e.fullPath,h="/b/"+s(u)+"/o/"+s(d),f=ri(h,n,i),p=y1({alt:"media",token:c});return f+p})[0]}function Vm(e,t){let n={},i=t.length;for(let r=0;r<i;r++){let o=t[r];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}var s1="prefixes",a1="items";function wL(e,t,n){let i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[s1])for(let r of n[s1]){let o=r.replace(/\/$/,""),s=e._makeStorageReference(new We(t,o));i.prefixes.push(s)}if(n[a1])for(let r of n[a1]){let o=e._makeStorageReference(new We(t,r.name));i.items.push(o)}return i}function DL(e,t,n){let i=Lm(n);return i===null?null:wL(e,t,i)}var Lt=class{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function rn(e){if(!e)throw xm()}function gu(e,t){function n(i,r){let o=E1(e,r,t);return rn(o!==null),o}return n}function CL(e,t){function n(i,r){let o=DL(e,t,r);return rn(o!==null),o}return n}function EL(e,t){function n(i,r){let o=E1(e,r,t);return rn(o!==null),bL(o,r,e.host,e._protocol)}return n}function po(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=HF():r=UF():n.getStatus()===402?r=jF(e.bucket):n.getStatus()===403?r=$F(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function mu(e){let t=po(e);function n(i,r){let o=t(i,r);return i.getStatus()===404&&(o=BF(e.path)),o.serverResponse=r.serverResponse,o}return n}function S1(e,t,n){let i=t.fullServerUrl(),r=ri(i,e.host,e._protocol),o="GET",s=e.maxOperationRetryTime,a=new Lt(r,o,gu(e,n),s);return a.errorHandler=mu(t),a}function SL(e,t,n,i,r){let o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),i&&(o.pageToken=i),r&&(o.maxResults=r);let s=t.bucketOnlyServerUrl(),a=ri(s,e.host,e._protocol),l="GET",c=e.maxOperationRetryTime,u=new Lt(a,l,CL(e,t.bucket),c);return u.urlParams=o,u.errorHandler=po(t),u}function IL(e,t,n){let i=t.fullServerUrl(),r=ri(i,e.host,e._protocol),o="GET",s=e.maxOperationRetryTime,a=new Lt(r,o,EL(e,n),s);return a.errorHandler=mu(t),a}function TL(e,t,n,i){let r=t.fullServerUrl(),o=ri(r,e.host,e._protocol),s="PATCH",a=Vm(n,i),l={"Content-Type":"application/json; charset=utf-8"},c=e.maxOperationRetryTime,u=new Lt(o,s,gu(e,i),c);return u.headers=l,u.body=a,u.errorHandler=mu(t),u}function ML(e,t){let n=t.fullServerUrl(),i=ri(n,e.host,e._protocol),r="DELETE",o=e.maxOperationRetryTime;function s(l,c){}let a=new Lt(i,r,s,o);return a.successCodes=[200,204],a.errorHandler=mu(t),a}function AL(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function I1(e,t,n){let i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=AL(null,t)),i}function NL(e,t,n,i,r){let o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let V=0;V<2;V++)E=E+Math.random().toString().slice(2);return E}let l=a();s["Content-Type"]="multipart/related; boundary="+l;let c=I1(t,i,r),u=Vm(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=uo.getBlob(d,i,h);if(f===null)throw _1();let p={name:c.fullPath},_=ri(o,e.host,e._protocol),y="POST",M=e.maxUploadRetryTime,k=new Lt(_,y,gu(e,n),M);return k.urlParams=p,k.headers=s,k.body=f.uploadData(),k.errorHandler=po(t),k}var ho=class{constructor(t,n,i,r){this.current=t,this.total=n,this.finalized=!!i,this.metadata=r||null}};function Bm(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch{rn(!1)}return rn(!!n&&(t||["active"]).indexOf(n)!==-1),n}function RL(e,t,n,i,r){let o=t.bucketOnlyServerUrl(),s=I1(t,i,r),a={name:s.fullPath},l=ri(o,e.host,e._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},d=Vm(s,n),h=e.maxUploadRetryTime;function f(_){Bm(_);let y;try{y=_.getResponseHeader("X-Goog-Upload-URL")}catch{rn(!1)}return rn(fu(y)),y}let p=new Lt(l,c,f,h);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=po(t),p}function OL(e,t,n,i){let r={"X-Goog-Upload-Command":"query"};function o(c){let u=Bm(c,["active","final"]),d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{rn(!1)}d||rn(!1);let h=Number(d);return rn(!isNaN(h)),new ho(h,i.size(),u==="final")}let s="POST",a=e.maxUploadRetryTime,l=new Lt(n,s,o,a);return l.headers=r,l.errorHandler=po(t),l}var l1=256*1024;function xL(e,t,n,i,r,o,s,a){let l=new ho(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw qF();let c=l.total-l.current,u=c;r>0&&(u=Math.min(u,r));let d=l.current,h=d+u,f="";u===0?f="finalize":c===u?f="upload, finalize":f="upload";let p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},_=i.slice(d,h);if(_===null)throw _1();function y(V,pe){let ge=Bm(V,["active","final"]),Vt=l.current+u,on=i.size(),vo;return ge==="final"?vo=gu(t,o)(V,pe):vo=null,new ho(Vt,on,ge==="final",vo)}let M="POST",k=t.maxUploadRetryTime,E=new Lt(n,M,y,k);return E.headers=p,E.body=_.uploadData(),E.progressCallback=a||null,E.errorHandler=po(e),E}var T1={STATE_CHANGED:"state_changed"},je={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Im(e){switch(e){case"running":case"pausing":case"canceling":return je.RUNNING;case"paused":return je.PAUSED;case"success":return je.SUCCESS;case"canceled":return je.CANCELED;case"error":return je.ERROR;default:return je.ERROR}}var Nm=class{constructor(t,n,i){if(XF(t)||n!=null||i!=null)this.next=t,this.error=n??void 0,this.complete=i??void 0;else{let o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function ao(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}var c1=null,Rm=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=co.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=co.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=co.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw Xs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(let o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xs("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xs("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xs("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xs("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}},Om=class extends Rm{initXhr(){this.xhr_.responseType="text"}};function nn(){return c1?c1():new Om}var na=class{constructor(t,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=pu(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(le.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(b1(r.status,[]))if(o)r=g1();else{this.sleepTime=Math.max(this.sleepTime*2,VF),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(le.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let t=this._transferred;return n=>this._updateProgress(t+n)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":t(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,n)=>{let i=RL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,nn,t,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let t=this._uploadUrl;this._resolveToken((n,i)=>{let r=OL(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(r,nn,n,i);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let t=l1*this._chunkMultiplier,n=new ho(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let s;try{s=xL(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}let a=this._ref.storage._makeRequest(s,nn,r,o,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){l1*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,n)=>{let i=S1(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,nn,t,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,n)=>{let i=NL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,nn,t,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){let n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=t,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=m1(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let t=Im(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,n,i,r){let o=new Nm(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,n){return this._promise.then(t,n)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){let n=this._observers.indexOf(t);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(Im(this._state)){case je.SUCCESS:ao(this._resolve.bind(null,this.snapshot))();break;case je.CANCELED:case je.ERROR:let n=this._reject;ao(n.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(Im(this._state)){case je.RUNNING:case je.PAUSED:t.next&&ao(t.next.bind(t,this.snapshot))();break;case je.SUCCESS:t.complete&&ao(t.complete.bind(t))();break;case je.CANCELED:case je.ERROR:t.error&&ao(t.error.bind(t,this._error))();break;default:t.error&&ao(t.error.bind(t,this._error))()}}resume(){let t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){let t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){let t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}};var fo=class e{constructor(t,n){this._service=t,n instanceof We?this._location=n:this._location=We.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new e(t,n)}get root(){let t=new We(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return C1(this._location.path)}get storage(){return this._service}get parent(){let t=pL(this._location.path);if(t===null)return null;let n=new We(this._location.bucket,t);return new e(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw km(t)}};function kL(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new na(e,new uo(t),n)}function PL(e){let t={prefixes:[],items:[]};return M1(e,t).then(()=>t)}function M1(e,t,n){return xe(this,null,function*(){let r=yield A1(e,{pageToken:n});t.prefixes.push(...r.prefixes),t.items.push(...r.items),r.nextPageToken!=null&&(yield M1(e,t,r.nextPageToken))})}function A1(e,t){t!=null&&typeof t.maxResults=="number"&&Mm("options.maxResults",1,1e3,t.maxResults);let n=t||{},i=SL(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(i,nn)}function FL(e){e._throwIfRoot("getMetadata");let t=S1(e.storage,e._location,pu());return e.storage.makeRequestWithTokens(t,nn)}function LL(e,t){e._throwIfRoot("updateMetadata");let n=TL(e.storage,e._location,t,pu());return e.storage.makeRequestWithTokens(n,nn)}function VL(e){e._throwIfRoot("getDownloadURL");let t=IL(e.storage,e._location,pu());return e.storage.makeRequestWithTokens(t,nn).then(n=>{if(n===null)throw KF();return n})}function BL(e){e._throwIfRoot("deleteObject");let t=ML(e.storage,e._location);return e.storage.makeRequestWithTokens(t,nn)}function N1(e,t){let n=gL(e._location.path,t),i=new We(e._location.bucket,n);return new fo(e.storage,i)}function jL(e){return/^[A-Za-z]+:\/\//.test(e)}function UL(e,t){return new fo(e,t)}function R1(e,t){if(e instanceof ia){let n=e;if(n._bucket==null)throw WF();let i=new fo(n,n._bucket);return t!=null?R1(i,t):i}else return t!==void 0?N1(e,t):e}function HL(e,t){if(t&&jL(t)){if(e instanceof ia)return UL(e,t);throw Ui("To use ref(service, url), the first argument must be a Storage instance.")}else return R1(e,t)}function u1(e,t){let n=t?.[p1];return n==null?null:We.makeFromBucketSpec(n,e)}function $L(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";let{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:sa(r,e.app.options.projectId))}var ia=class{constructor(t,n,i,r,o){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=f1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FF,this._maxUploadRetryTime=LF,this._requests=new Set,r!=null?this._bucket=We.makeFromBucketSpec(r,this._host):this._bucket=u1(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=We.makeFromBucketSpec(this._url,t):this._bucket=u1(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Mm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Mm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return xe(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let n=yield t.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return xe(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new fo(this,t)}_makeRequest(t,n,i,r,o=!0){if(this._deleted)return new Tm(v1());{let s=oL(t,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,n){return xe(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()})}},d1="@firebase/storage",h1="0.13.2";var GL="storage";function O1(e,t,n){return e=se(e),kL(e,t,n)}function x1(e){return e=se(e),FL(e)}function k1(e,t){return e=se(e),LL(e,t)}function P1(e,t){return e=se(e),A1(e,t)}function F1(e){return e=se(e),PL(e)}function L1(e){return e=se(e),VL(e)}function V1(e){return e=se(e),BL(e)}function jm(e,t){return e=se(e),HL(e,t)}function B1(e,t){return N1(e,t)}function j1(e,t,n,i={}){$L(e,t,n,i)}function zL(e,{instanceIdentifier:t}){let n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new ia(n,i,r,t,ua)}function WL(){oi(new Je(GL,zL,"PUBLIC").setMultipleInstances(!0)),St(d1,h1,""),St(d1,h1,"esm2017")}WL();var go=class{constructor(t,n,i){this._delegate=t,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var _u=class{constructor(t,n){this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new go(this._delegate.snapshot,this,this._ref)}then(t,n){return this._delegate.then(i=>{if(t)return t(new go(i,this,this._ref))},n)}on(t,n,i,r){let o;return n&&(typeof n=="function"?o=s=>n(new go(s,this,this._ref)):o={next:n.next?s=>n.next(new go(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(t,o,i||void 0,r||void 0)}},vu=class{constructor(t,n){this._delegate=t,this._service=n}get prefixes(){return this._delegate.prefixes.map(t=>new Hi(t,this._service))}get items(){return this._delegate.items.map(t=>new Hi(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Hi=class e{constructor(t,n){this._delegate=t,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){let n=B1(this._delegate,t);return new e(n,this.storage)}get root(){return new e(this._delegate.root,this.storage)}get parent(){let t=this._delegate.parent;return t==null?null:new e(t,this.storage)}put(t,n){return this._throwIfRoot("put"),new _u(O1(this._delegate,t,n),this)}putString(t,n=ct.RAW,i){this._throwIfRoot("putString");let r=Fm(n,t),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),new _u(new na(this._delegate,new uo(r.data,!0),o),this)}listAll(){return F1(this._delegate).then(t=>new vu(t,this.storage))}list(t){return P1(this._delegate,t||void 0).then(n=>new vu(n,this.storage))}getMetadata(){return x1(this._delegate)}updateMetadata(t){return k1(this._delegate,t)}getDownloadURL(){return L1(this._delegate)}delete(){return this._throwIfRoot("delete"),V1(this._delegate)}_throwIfRoot(t){if(this._delegate._location.path==="")throw km(t)}};var yu=class{constructor(t,n){this.app=t,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(U1(t))throw Ui("ref() expected a child path but got a URL, use refFromURL instead.");return new Hi(jm(this._delegate,t),this)}refFromURL(t){if(!U1(t))throw Ui("refFromURL() expected a full URL but got a child path, use ref() instead.");try{We.makeFromUrl(t,this._delegate.host)}catch{throw Ui("refFromUrl() expected a valid full URL but got an invalid one.")}return new Hi(jm(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,n,i={}){j1(this._delegate,t,n,i)}};function U1(e){return/^[A-Za-z]+:\/\//.test(e)}var qL="@firebase/storage-compat",KL="0.3.12";var QL="storage-compat";function YL(e,{instanceIdentifier:t}){let n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:t});return new yu(n,i)}function ZL(e){let t={TaskState:je,TaskEvent:T1,StringFormat:ct,Storage:yu,Reference:Hi};e.INTERNAL.registerComponent(new Je(QL,YL,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(qL,KL)}ZL(Ce);function JL(e){return new N(t=>{let n=s=>t.next(s),i=s=>t.error(s),r=()=>t.complete();n(e.snapshot);let o=e.on("state_changed",n);return e.then(s=>{n(s),r()},s=>{n(e.snapshot),i(s)}),function(){o()}}).pipe(ed(0))}function H1(e){let t=JL(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>t,percentageChanges:()=>t.pipe(I(n=>n.bytesTransferred/n.totalBytes*100))}}function bu(e){return{getDownloadURL:()=>C(void 0).pipe(pp,te(()=>e.getDownloadURL()),wt),getMetadata:()=>C(void 0).pipe(pp,te(()=>e.getMetadata()),wt),delete:()=>J(e.delete()),child:t=>bu(e.child(t)),updateMetadata:t=>J(e.updateMetadata(t)),put:(t,n)=>{let i=e.put(t,n);return H1(i)},putString:(t,n,i)=>{let r=e.putString(t,n,i);return H1(r)},list:t=>J(e.list(t)),listAll:()=>J(e.listAll())}}var XL=new w("angularfire2.storageBucket"),e2=new w("angularfire2.storage.maxUploadRetryTime"),t2=new w("angularfire2.storage.maxOperationRetryTime"),n2=new w("angularfire2.storage.use-emulator"),Um=(()=>{class e{storage;constructor(n,i,r,o,s,a,l,c,u,d){let h=Ri(n,s,i);this.storage=$r(`${h.name}.storage.${r}`,"AngularFireStorage",h.name,()=>{let f=s.runOutsideAngular(()=>h.storage(r||void 0)),p=u;return p&&f.useEmulator(...p),l&&f.setMaxUploadRetryTime(l),c&&f.setMaxOperationRetryTime(c),f},[l,c])}ref(n){return bu(this.storage.ref(n))}refFromURL(n){return bu(this.storage.refFromURL(n))}upload(n,i,r){let o=this.storage.ref(n);return bu(o).put(i,r)}static \u0275fac=function(i){return new(i||e)(m(qn),m(Kn,8),m(XL,8),m(Re),m(j),m(Hr),m(e2,8),m(t2,8),m(n2,8),m(Cn,8))};static \u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var i2=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=L({type:e});static \u0275inj=F({})}return e})(),$1=(()=>{class e{constructor(){Ce.registerVersion("angularfire",zn.full,"gcs-compat")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=L({type:e});static \u0275inj=F({providers:[Um],imports:[i2]})}return e})();var mo=class e{constructor(t,n){this.db=t;this.storage=n}basePath="/uploads";pushFile(t){let n=Date.now()+t.name,i=this.basePath+"/"+n,r=this.storage.ref(i),o=this.storage.upload(i,t);return o.snapshotChanges().pipe(ln(()=>{r.getDownloadURL().subscribe(s=>{let a={url:s,filename:n};this.saveFileData(a)})})).subscribe(),o.percentageChanges()}saveFileData(t){this.db.list(this.basePath).push(t)}getFiles(){return this.db.list(this.basePath)}deleteFile(t){this.deleteFileDatabase(t.key).then(()=>this.deleteFileStorage(t.filename)).catch(n=>console.log(n))}deleteFileStorage(t){this.storage.ref(this.basePath).child(t).delete()}deleteFileDatabase(t){return this.db.list(this.basePath).remove(t)}static \u0275fac=function(n){return new(n||e)(m(Em),m(Um))};static \u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})};var o2=e=>({width:e}),wu=class e{constructor(t){this.uploadservice=t}files;selectedFile=void 0;percentage=0;upload(){console.log("Files: ",this.selectedFile);for(let t of this.selectedFile)this.uploadservice.pushFile(t).subscribe(n=>this.percentage=Math.round(Number(n)));this.selectedFile=void 0}changes(t){console.log(t.target.files),this.selectedFile={},this.selectedFile=t.target.files}static \u0275fac=function(n){return new(n||e)(Le(mo))};static \u0275cmp=Ot({type:e,selectors:[["app-upload-form"]],decls:9,vars:6,consts:[[1,"mb-3"],["for","formFile",1,"form-label"],["type","file","id","formFile","multiple","true",1,"form-control",3,"change"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"progress","mt-3"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated",3,"ngStyle"]],template:function(n,i){n&1&&(Ue(0,"div",0)(1,"label",1),Hn(2,"Default file input example"),He(),Ue(3,"input",2),_n("change",function(o){return i.changes(o)}),He()(),Ue(4,"button",3),_n("click",function(){return i.upload()}),Hn(5,"Upload"),He(),Ue(6,"div",4)(7,"div",5),Hn(8),He()()),n&2&&(Bn(4),Un("disabled",!i.selectedFile),Bn(3),Un("ngStyle",sf(4,o2,i.percentage+"%")),Ei("aria-valuenow",i.percentage),Bn(),zo("",i.percentage,"%"))},dependencies:[hb]})};function a2(e,t){if(e&1){let n=tf();Ue(0,"div",1)(1,"div",2)(2,"a",3),Hn(3),He()(),Ue(4,"div",2)(5,"button",4),_n("click",function(){let r=Sh(n).$implicit,o=nf();return Ih(o.delFile(r))}),Hn(6," Delete "),He()()()}if(e&2){let n=t.$implicit;Bn(2),Un("href",n.url,Uy),Bn(),Ll(n.filename.substring(13))}}var Du=class e{constructor(t){this.uploadservice=t;this.uploadservice.getFiles().snapshotChanges().pipe(I(n=>n.map(i=>b({key:i.payload.key},i.payload.val())))).subscribe(n=>this.files=n)}files;delFile(t){this.uploadservice.deleteFile(t)}static \u0275fac=function(n){return new(n||e)(Le(mo))};static \u0275cmp=Ot({type:e,selectors:[["app-upload-list"]],decls:1,vars:1,consts:[["class","row mt-2",4,"ngFor","ngForOf"],[1,"row","mt-2"],[1,"col"],[3,"href"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,i){n&1&&Pl(0,a2,7,2,"div",0),n&2&&Un("ngForOf",i.files)},dependencies:[db]})};var Cu=class e{title="Tarolo";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ot({type:e,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container"],[1,"row"]],template:function(n,i){n&1&&(Ue(0,"div",0)(1,"div",1),Si(2,"app-upload-form"),He(),Ue(3,"div",1),Si(4,"app-upload-list"),He()())},dependencies:[wu,Du]})};var d2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},KW=ee(b({},d2),{"[class.ng-submitted]":"isSubmitted"});var h2=new w("CallSetDisabledState",{providedIn:"root",factory:()=>W1}),W1="always";var f2=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var q1=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:h2,useValue:n.callSetDisabledState??W1}]}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({imports:[f2]})}}return e})();var p2=["*"];var g2=["dialog"];var K1={animation:!0,transitionTimerDelayMs:5},m2=(()=>{class e{constructor(){this.animation=K1.animation}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function _2(e){let{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e),i=parseFloat(t),r=parseFloat(n);return(i+r)*1e3}function Q1(e){return typeof e=="string"}function Hm(e){return e!=null}function v2(e){return e&&e.then}function Y1(e){return(e||document.body).getBoundingClientRect()}function y2(e){return t=>new N(n=>{let i=s=>e.run(()=>n.next(s)),r=s=>e.run(()=>n.error(s)),o=()=>e.run(()=>n.complete());return t.subscribe({next:i,error:r,complete:o})})}var b2=()=>{},{transitionTimerDelayMs:w2}=K1,Eu=new Map,$i=(e,t,n,i)=>{let r=i.context||{},o=Eu.get(t);if(o)switch(i.runningTransition){case"continue":return ye;case"stop":e.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),Eu.delete(t)}let s=n(t,i.animation,r)||b2;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return e.run(()=>s()),C(void 0).pipe(y2(e));let a=new Z,l=new Z,c=a.pipe(nd(!0));Eu.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let u=_2(t);return e.runOutsideAngular(()=>{let d=dt(t,"transitionend").pipe(ke(c),be(({target:f})=>f===t)),h=Ju(u+w2).pipe(ke(c));Xu(h,d,l).pipe(ke(c)).subscribe(()=>{Eu.delete(t),e.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};var Z1=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var J1=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var X1=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})(),eE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var B5=(()=>{let e=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(e()||t()):!1})();var D2=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function tE(e){let t=Array.from(e.querySelectorAll(D2)).filter(n=>n.tabIndex!==-1);return[t[0],t[t.length-1]]}var C2=(e,t,n,i=!1)=>{e.runOutsideAngular(()=>{let r=dt(t,"focusin").pipe(ke(n),I(o=>o.target));dt(t,"keydown").pipe(ke(n),be(o=>o.key==="Tab"),ar(r)).subscribe(([o,s])=>{let[a,l]=tE(t);(s===a||s===t)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&dt(t,"click").pipe(ke(n),ar(r),I(o=>o[1])).subscribe(o=>o.focus())})};var j5=new Date(1882,10,12),U5=new Date(2174,10,25);var H5=1e3*60*60*24;var zm=1080,E2=24*zm,S2=12*zm+793,$5=29*E2+S2,G5=11*zm+204;var nE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var iE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})(),I2=(()=>{class e{constructor(){this._ngbConfig=g(m2),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(n){this._animation=n}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),_o=class{constructor(t,n,i){this.nodes=t,this.viewRef=n,this.componentRef=i}};var T2=(()=>{class e{constructor(){this._document=g(Se)}hide(){let n=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:s}=r;if(n>0){let a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+n}px`}return r.overflow="hidden",()=>{n>0&&(r.paddingRight=s),r.overflow=o}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),M2=(()=>{class e{constructor(){this._nativeElement=g(yt).nativeElement,this._zone=g(j)}ngOnInit(){this._zone.onStable.asObservable().pipe(Qe(1)).subscribe(()=>{$i(this._zone,this._nativeElement,(n,i)=>{i&&Y1(n),n.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return $i(this._zone,this._nativeElement,({classList:n})=>n.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Ot({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){i&2&&(Fl("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),Go("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Wo],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return e})(),Su=class{update(t){}close(t){}dismiss(t){}},A2=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],N2=["animation","backdropClass"],$m=class{_applyWindowOptions(t,n){A2.forEach(i=>{Hm(n[i])&&(t[i]=n[i])})}_applyBackdropOptions(t,n){N2.forEach(i=>{Hm(n[i])&&(t[i]=n[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ke(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ke(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,n,i,r){this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Z,this._dismissed=new Z,this._hidden=new Z,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(t);else{let n=this._beforeDismiss();v2(n)?n.then(i=>{i!==!1&&this._dismiss(t)},()=>{}):n!==!1&&this._dismiss(t)}}_removeModalElements(){let t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():C(void 0);t.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Co(t,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},Gm=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}(Gm||{}),R2=(()=>{class e{constructor(){this._document=g(Se),this._elRef=g(yt),this._zone=g(j),this._closed$=new Z,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new _e,this.shown=new Z,this.hidden=new Z}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":Q1(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(n){this.dismissEvent.emit(n)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Qe(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:n}=this._elRef,i={animation:this.animation,runningTransition:"stop"},r=$i(this._zone,n,()=>n.classList.remove("show"),i),o=$i(this._zone,this._dialogEl.nativeElement,()=>{},i),s=Co(r,o);return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){let n={animation:this.animation,runningTransition:"continue"},i=$i(this._zone,this._elRef.nativeElement,(o,s)=>{s&&Y1(o),o.classList.add("show")},n),r=$i(this._zone,this._dialogEl.nativeElement,()=>{},n);Co(i,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:n}=this._elRef;this._zone.runOutsideAngular(()=>{dt(n,"keydown").pipe(ke(this._closed$),be(r=>r.key==="Escape")).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Gm.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;dt(this._dialogEl.nativeElement,"mousedown").pipe(ke(this._closed$),fe(()=>i=!1),te(()=>dt(n,"mouseup").pipe(ke(this._closed$),Qe(1))),be(({target:r})=>n===r)).subscribe(()=>{i=!0}),dt(n,"click").pipe(ke(this._closed$)).subscribe(({target:r})=>{n===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(Gm.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:n}=this._elRef;if(!n.contains(document.activeElement)){let i=n.querySelector("[ngbAutofocus]"),r=tE(n)[0];(i||r||n).focus()}}_restoreFocus(){let n=this._document.body,i=this._elWithFocus,r;i&&i.focus&&n.contains(i)?r=i:r=n,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&$i(this._zone,this._elRef.nativeElement,({classList:n})=>(n.add("modal-static"),()=>n.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Ot({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(i&1&&H0(g2,7),i&2){let o;rf(o=of())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){i&2&&(Ei("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Fl("modal d-block"+(r.windowClass?" "+r.windowClass:"")),Go("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Wo],ngContentSelectors:p2,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,r){i&1&&(j0(),Ue(0,"div",1,0)(2,"div",2),U0(3),He()()),i&2&&Fl("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return e})(),O2=(()=>{class e{constructor(){this._applicationRef=g(Qt),this._injector=g(Ne),this._environmentInjector=g(Pe),this._document=g(Se),this._scrollBar=g(T2),this._activeWindowCmptHasChanged=new Z,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new _e;let n=g(j);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];C2(n,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let n=this._scrollBarRestoreFn;n&&(this._scrollBarRestoreFn=null,n())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(n,i,r){let o=r.container instanceof HTMLElement?r.container:Hm(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let s=new Su;n=r.injector||n;let a=n.get(Pe,null)||this._environmentInjector,l=this._getContentRef(n,a,i,s,r),c=r.backdrop!==!1?this._attachBackdrop(o):void 0,u=this._attachWindowComponent(o,l.nodes),d=new $m(u,l,c,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(u),d.hidden.pipe(Qe(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),s.close=h=>{d.close(h)},s.dismiss=h=>{d.dismiss(h)},s.update=h=>{d.update(h)},d.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),c&&c.instance&&c.changeDetectorRef.detectChanges(),u.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(n){this._modalRefs.forEach(i=>i.dismiss(n))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(n){let i=Gl(M2,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),n.appendChild(i.location.nativeElement),i}_attachWindowComponent(n,i){let r=Gl(R2,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),n.appendChild(r.location.nativeElement),r}_getContentRef(n,i,r,o,s){return r?r instanceof Fn?this._createFromTemplateRef(r,o):Q1(r)?this._createFromString(r):this._createFromComponent(n,i,r,o,s):new _o([])}_createFromTemplateRef(n,i){let r={$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}},o=n.createEmbeddedView(r);return this._applicationRef.attachView(o),new _o([o.rootNodes],o)}_createFromString(n){let i=this._document.createTextNode(`${n}`);return new _o([[i]])}_createFromComponent(n,i,r,o,s){let a=Ne.create({providers:[{provide:Su,useValue:o}],parent:n}),l=Gl(r,{environmentInjector:i,elementInjector:a}),c=l.location.nativeElement;return s.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new _o([[c]],l.hostView,l)}_setAriaHidden(n){let i=n.parentElement;i&&n!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==n&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((n,i)=>{n?i.setAttribute("aria-hidden",n):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(n){let i=()=>{let r=this._modalRefs.indexOf(n);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(n),this._activeInstances.emit(this._modalRefs),n.result.then(i,i)}_registerWindowCmpt(n){this._windowCmpts.push(n),this._activeWindowCmptHasChanged.next(),n.onDestroy(()=>{let i=this._windowCmpts.indexOf(n);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),x2=(()=>{class e{constructor(){this._injector=g(Ne),this._modalStack=g(O2),this._config=g(I2)}open(n,i={}){let r=b(ee(b({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,n,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(n){this._modalStack.dismissAll(n)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),rE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({providers:[x2]})}}return e})();var oE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var sE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var aE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var lE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var cE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var uE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var dE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var hE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var fE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var z5=new w("live announcer delay",{providedIn:"root",factory:()=>100});var pE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})();var gE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({})}}return e})(),k2=[Z1,J1,X1,eE,nE,iE,rE,oE,gE,sE,aE,lE,cE,uE,dE,hE,fE,pE],mE=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=L({type:e})}static{this.\u0275inj=F({imports:[k2,Z1,J1,X1,eE,nE,iE,rE,oE,gE,sE,aE,lE,cE,uE,dE,hE,fE,pE]})}}return e})();var _E={production:!1,firebaseConfig:{apiKey:"AIzaSyARjrEqGGtk2bmfcDMQ5doA-t67iqN9i54",authDomain:"osztalyzatokauth.firebaseapp.com",databaseURL:"https://osztalyzatokauth-default-rtdb.europe-west1.firebasedatabase.app",projectId:"osztalyzatokauth",storageBucket:"osztalyzatokauth.firebasestorage.app",messagingSenderId:"114588389611",appId:"1:114588389611:web:b239641216cea88d226eae"}};var Iu=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=L({type:e,bootstrap:[Cu]});static \u0275inj=F({imports:[Sb,gc,mE,q1,kw.initializeApp(_E.firebaseConfig),r1,$1]})};Eb().bootstrapModule(Iu,{ngZoneEventCoalescing:!0}).catch(e=>console.error(e));
